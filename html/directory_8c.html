<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PKUOS - Pintos: src/filesys/directory.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PKUOS - Pintos
   </div>
   <div id="projectbrief">Pintos source browser for PKU Operating System course</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_462cf8f5a5a6b6c35369e33c5cc1b3e4.html">filesys</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">directory.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="directory_8h_source.html">filesys/directory.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;<a class="el" href="string_8h_source.html">string.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="list_8h_source.html">list.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="filesys_8h_source.html">filesys/filesys.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="inode_8h_source.html">filesys/inode.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="malloc_8h_source.html">threads/malloc.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for directory.c:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c__incl.png" border="0" usemap="#asrc_2filesys_2directory_8c" alt=""/></div>
<map name="asrc_2filesys_2directory_8c" id="asrc_2filesys_2directory_8c">
<area shape="rect" title=" " alt="" coords="275,5,421,32"/>
<area shape="rect" href="directory_8h.html" title=" " alt="" coords="285,80,411,107"/>
<area shape="rect" title=" " alt="" coords="149,80,211,107"/>
<area shape="rect" href="string_8h.html" title=" " alt="" coords="181,155,246,181"/>
<area shape="rect" href="list_8h.html" title=" " alt="" coords="701,80,750,107"/>
<area shape="rect" href="filesys_8h.html" title=" " alt="" coords="566,80,677,107"/>
<area shape="rect" href="inode_8h.html" title=" " alt="" coords="435,80,541,107"/>
<area shape="rect" href="malloc_8h.html" title=" " alt="" coords="5,80,125,107"/>
<area shape="rect" href="stdbool_8h.html" title=" " alt="" coords="583,155,659,181"/>
<area shape="rect" href="stddef_8h.html" title=" " alt="" coords="249,229,319,256"/>
<area shape="rect" href="block_8h.html" title=" " alt="" coords="322,155,435,181"/>
<area shape="rect" href="inttypes_8h.html" title=" " alt="" coords="369,229,447,256"/>
<area shape="rect" href="stdint_8h.html" title=" " alt="" coords="477,304,542,331"/>
<area shape="rect" href="off__t_8h.html" title=" " alt="" coords="459,155,559,181"/>
<area shape="rect" href="debug_8h.html" title=" " alt="" coords="30,155,101,181"/>
</map>
</div>
</div>
<p><a href="directory_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdir.html">dir</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A directory.  <a href="structdir.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structdir__entry.html">dir_entry</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A single directory entry.  <a href="structdir__entry.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab3951213f266ce0e0404203a35fefe8f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="directory_8c.html#ab3951213f266ce0e0404203a35fefe8f">dir_create</a> (<a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a> sector, <a class="el" href="stddef_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> entry_cnt)</td></tr>
<tr class="memdesc:ab3951213f266ce0e0404203a35fefe8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a directory with space for ENTRY_CNT entries in the given SECTOR.  <a href="directory_8c.html#ab3951213f266ce0e0404203a35fefe8f">More...</a><br /></td></tr>
<tr class="separator:ab3951213f266ce0e0404203a35fefe8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12c77ad2315eb1079f7914b1b1b27ce2"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdir.html">dir</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="directory_8c.html#a12c77ad2315eb1079f7914b1b1b27ce2">dir_open</a> (struct <a class="el" href="structinode.html">inode</a> *<a class="el" href="structinode.html">inode</a>)</td></tr>
<tr class="memdesc:a12c77ad2315eb1079f7914b1b1b27ce2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens and returns the directory for the given INODE, of which it takes ownership.  <a href="directory_8c.html#a12c77ad2315eb1079f7914b1b1b27ce2">More...</a><br /></td></tr>
<tr class="separator:a12c77ad2315eb1079f7914b1b1b27ce2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdea7fe972a97776e832c4324b0c4b9d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdir.html">dir</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="directory_8c.html#afdea7fe972a97776e832c4324b0c4b9d">dir_open_root</a> (void)</td></tr>
<tr class="memdesc:afdea7fe972a97776e832c4324b0c4b9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens the root directory and returns a directory for it.  <a href="directory_8c.html#afdea7fe972a97776e832c4324b0c4b9d">More...</a><br /></td></tr>
<tr class="separator:afdea7fe972a97776e832c4324b0c4b9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c479e18ce6294ba5d6c3fe23dd2b5bf"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structdir.html">dir</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="directory_8c.html#a8c479e18ce6294ba5d6c3fe23dd2b5bf">dir_reopen</a> (struct <a class="el" href="structdir.html">dir</a> *<a class="el" href="structdir.html">dir</a>)</td></tr>
<tr class="memdesc:a8c479e18ce6294ba5d6c3fe23dd2b5bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens and returns a new directory for the same inode as DIR.  <a href="directory_8c.html#a8c479e18ce6294ba5d6c3fe23dd2b5bf">More...</a><br /></td></tr>
<tr class="separator:a8c479e18ce6294ba5d6c3fe23dd2b5bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92d246b6a292843fdfd7e3e1d2b29701"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="directory_8c.html#a92d246b6a292843fdfd7e3e1d2b29701">dir_close</a> (struct <a class="el" href="structdir.html">dir</a> *<a class="el" href="structdir.html">dir</a>)</td></tr>
<tr class="memdesc:a92d246b6a292843fdfd7e3e1d2b29701"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys DIR and frees associated resources.  <a href="directory_8c.html#a92d246b6a292843fdfd7e3e1d2b29701">More...</a><br /></td></tr>
<tr class="separator:a92d246b6a292843fdfd7e3e1d2b29701"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d91377dd5b1d11929f7901b960b1777"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structinode.html">inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="directory_8c.html#a1d91377dd5b1d11929f7901b960b1777">dir_get_inode</a> (struct <a class="el" href="structdir.html">dir</a> *<a class="el" href="structdir.html">dir</a>)</td></tr>
<tr class="memdesc:a1d91377dd5b1d11929f7901b960b1777"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the inode encapsulated by DIR.  <a href="directory_8c.html#a1d91377dd5b1d11929f7901b960b1777">More...</a><br /></td></tr>
<tr class="separator:a1d91377dd5b1d11929f7901b960b1777"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2c71a2a1a0ffa3c618792babf4fc8b9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="directory_8c.html#ab2c71a2a1a0ffa3c618792babf4fc8b9">lookup</a> (const struct <a class="el" href="structdir.html">dir</a> *<a class="el" href="structdir.html">dir</a>, const char *<a class="el" href="insult_8c.html#a458312c43d951ea41bca2379541164e6">name</a>, struct <a class="el" href="structdir__entry.html">dir_entry</a> *ep, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> *ofsp)</td></tr>
<tr class="memdesc:ab2c71a2a1a0ffa3c618792babf4fc8b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches DIR for a file with the given NAME.  <a href="directory_8c.html#ab2c71a2a1a0ffa3c618792babf4fc8b9">More...</a><br /></td></tr>
<tr class="separator:ab2c71a2a1a0ffa3c618792babf4fc8b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a782062143b05a6f32d11457cfd6259f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="directory_8c.html#a782062143b05a6f32d11457cfd6259f6">dir_lookup</a> (const struct <a class="el" href="structdir.html">dir</a> *<a class="el" href="structdir.html">dir</a>, const char *<a class="el" href="insult_8c.html#a458312c43d951ea41bca2379541164e6">name</a>, struct <a class="el" href="structinode.html">inode</a> **<a class="el" href="structinode.html">inode</a>)</td></tr>
<tr class="memdesc:a782062143b05a6f32d11457cfd6259f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Searches DIR for a file with the given NAME and returns true if one exists, false otherwise.  <a href="directory_8c.html#a782062143b05a6f32d11457cfd6259f6">More...</a><br /></td></tr>
<tr class="separator:a782062143b05a6f32d11457cfd6259f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86380e077145f4f4ca42e0bd413c79fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="directory_8c.html#a86380e077145f4f4ca42e0bd413c79fd">dir_add</a> (struct <a class="el" href="structdir.html">dir</a> *<a class="el" href="structdir.html">dir</a>, const char *<a class="el" href="insult_8c.html#a458312c43d951ea41bca2379541164e6">name</a>, <a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a> inode_sector)</td></tr>
<tr class="memdesc:a86380e077145f4f4ca42e0bd413c79fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a file named NAME to DIR, which must not already contain a file by that name.  <a href="directory_8c.html#a86380e077145f4f4ca42e0bd413c79fd">More...</a><br /></td></tr>
<tr class="separator:a86380e077145f4f4ca42e0bd413c79fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae277e450f2d6d436a61adccc0ad5ce23"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="directory_8c.html#ae277e450f2d6d436a61adccc0ad5ce23">dir_remove</a> (struct <a class="el" href="structdir.html">dir</a> *<a class="el" href="structdir.html">dir</a>, const char *<a class="el" href="insult_8c.html#a458312c43d951ea41bca2379541164e6">name</a>)</td></tr>
<tr class="memdesc:ae277e450f2d6d436a61adccc0ad5ce23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes any entry for NAME in DIR.  <a href="directory_8c.html#ae277e450f2d6d436a61adccc0ad5ce23">More...</a><br /></td></tr>
<tr class="separator:ae277e450f2d6d436a61adccc0ad5ce23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9ec2107e448111aca8951c2f7bfa61b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="directory_8c.html#ae9ec2107e448111aca8951c2f7bfa61b">dir_readdir</a> (struct <a class="el" href="structdir.html">dir</a> *<a class="el" href="structdir.html">dir</a>, char <a class="el" href="insult_8c.html#a458312c43d951ea41bca2379541164e6">name</a>[<a class="el" href="directory_8h.html#ac64541bdd81c961304b9babef1402640">NAME_MAX</a>+1])</td></tr>
<tr class="memdesc:ae9ec2107e448111aca8951c2f7bfa61b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the next directory entry in DIR and stores the name in NAME.  <a href="directory_8c.html#ae9ec2107e448111aca8951c2f7bfa61b">More...</a><br /></td></tr>
<tr class="separator:ae9ec2107e448111aca8951c2f7bfa61b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a86380e077145f4f4ca42e0bd413c79fd" name="a86380e077145f4f4ca42e0bd413c79fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86380e077145f4f4ca42e0bd413c79fd">&#9670;&nbsp;</a></span>dir_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> dir_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdir.html">dir</a> *&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a>&#160;</td>
          <td class="paramname"><em>inode_sector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a file named NAME to DIR, which must not already contain a file by that name. </p>
<p >The file's inode is in sector INODE_SECTOR. Returns true if successful, false on failure. Fails if NAME is invalid (i.e. too long) or a disk or memory error occurs. </p>

<p class="definition">Definition at line <a class="el" href="directory_8c_source.html#l00142">142</a> of file <a class="el" href="directory_8c_source.html">directory.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="directory_8c_source.html#l00021">dir_entry::in_use</a>, <a class="el" href="directory_8c_source.html#l00012">dir::inode</a>, <a class="el" href="inode_8c_source.html#l00201">inode_read_at()</a>, <a class="el" href="directory_8c_source.html#l00019">dir_entry::inode_sector</a>, <a class="el" href="inode_8c_source.html#l00258">inode_write_at()</a>, <a class="el" href="directory_8c_source.html#l00092">lookup()</a>, <a class="el" href="insult_8c_source.html#l00047">name</a>, <a class="el" href="directory_8c_source.html#l00020">dir_entry::name</a>, <a class="el" href="directory_8h_source.html#l00012">NAME_MAX</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, <a class="el" href="string_8c_source.html#l00326">strlcpy()</a>, and <a class="el" href="string_8c_source.html#l00293">strlen()</a>.</p>

<p class="reference">Referenced by <a class="el" href="filesys_8c_source.html#l00046">filesys_create()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_a86380e077145f4f4ca42e0bd413c79fd_cgraph.png" border="0" usemap="#adirectory_8c_a86380e077145f4f4ca42e0bd413c79fd_cgraph" alt=""/></div>
<map name="adirectory_8c_a86380e077145f4f4ca42e0bd413c79fd_cgraph" id="adirectory_8c_a86380e077145f4f4ca42e0bd413c79fd_cgraph">
<area shape="rect" title="Adds a file named NAME to DIR, which must not already contain a file by that name." alt="" coords="5,478,72,504"/>
<area shape="rect" href="inode_8c.html#a31fcd756c686b818d56067b4460bfdb9" title="Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET." alt="" coords="231,376,337,403"/>
<area shape="rect" href="inode_8c.html#a09402d2c8d33dc00b2557daa27d944ee" title="Writes SIZE bytes from BUFFER into INODE, starting at OFFSET." alt="" coords="229,478,339,504"/>
<area shape="rect" href="directory_8c.html#ab2c71a2a1a0ffa3c618792babf4fc8b9" title="Searches DIR for a file with the given NAME." alt="" coords="120,427,181,454"/>
<area shape="rect" href="string_8c.html#a4637af6f79bac4043e1064f0837d0ddc" title="Copies string SRC to DST." alt="" coords="121,528,181,555"/>
<area shape="rect" href="string_8c.html#a2869404e70f06f4477271f26ce8c4920" title="Returns the length of STRING." alt="" coords="257,579,311,606"/>
<area shape="rect" href="block_8c.html#a8c08b3ab03d5cdb52856bab0aafe7006" title="Reads sector SECTOR from BLOCK into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="398,528,485,555"/>
<area shape="rect" href="inode_8c.html#a9b48abdaf996c82819f49d6d8fc4c224" title="Returns the block device sector that contains byte offset POS within INODE." alt="" coords="387,199,496,226"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="419,300,464,327"/>
<area shape="rect" href="inode_8c.html#a67214eb44fb24ef254fca76f9a63fd6d" title="Returns the length, in bytes, of INODE&#39;s data." alt="" coords="392,250,491,276"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="411,478,471,504"/>
<area shape="rect" href="string_8c.html#a75301dc67774ade574b3b3205ee4f39e" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="405,630,477,656"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="556,983,656,1010"/>
<area shape="rect" href="block_8c.html#abfb4cd8ff36ddbdf93ebc1944ccfbd4d" title="Returns BLOCK&#39;s name (e.g." alt="" coords="739,983,833,1010"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="549,452,663,479"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="549,250,663,276"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1302,359,1411,386"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1460,410,1551,436"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="931,756,1029,783"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="931,612,1029,639"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="945,351,1015,378"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="716,148,856,175"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="544,148,668,175"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="949,300,1011,327"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="727,300,845,327"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1729,448,1808,475"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1466,460,1545,487"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1600,410,1680,436"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1612,460,1668,487"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1311,874,1402,900"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1104,765,1253,806"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1302,815,1411,842"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1132,714,1225,740"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1460,714,1551,740"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1307,714,1407,740"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1301,612,1412,639"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1735,587,1803,614"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1140,612,1217,639"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1599,562,1681,588"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1305,511,1408,538"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1469,511,1541,538"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="939,250,1021,276"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1109,300,1249,327"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="921,148,1039,175"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1149,123,1208,150"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="718,452,854,479"/>
<area shape="rect" href="palloc_8c.html#a0c66d7fdb0a9c8da247421261b5ca188" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="546,554,666,580"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="904,427,1056,454"/>
<area shape="rect" href="block_8c.html#ab7e44f7861385a5c4630d899a469f9d4" title="Write sector SECTOR to BLOCK from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="397,579,486,606"/>
<area shape="rect" href="string_8c.html#ae99b71772ffcf066739c8568013425e3" title="Finds the first differing characters in strings A and B." alt="" coords="253,427,315,454"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_a86380e077145f4f4ca42e0bd413c79fd_icgraph.png" border="0" usemap="#adirectory_8c_a86380e077145f4f4ca42e0bd413c79fd_icgraph" alt=""/></div>
<map name="adirectory_8c_a86380e077145f4f4ca42e0bd413c79fd_icgraph" id="adirectory_8c_a86380e077145f4f4ca42e0bd413c79fd_icgraph">
<area shape="rect" title="Adds a file named NAME to DIR, which must not already contain a file by that name." alt="" coords="572,5,639,32"/>
<area shape="rect" href="filesys_8c.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="420,5,524,32"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="275,5,372,32"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,5,227,32"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,88,32"/>
</map>
</div>

</div>
</div>
<a id="a92d246b6a292843fdfd7e3e1d2b29701" name="a92d246b6a292843fdfd7e3e1d2b29701"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92d246b6a292843fdfd7e3e1d2b29701">&#9670;&nbsp;</a></span>dir_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dir_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdir.html">dir</a> *&#160;</td>
          <td class="paramname"><em>dir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys DIR and frees associated resources. </p>

<p class="definition">Definition at line <a class="el" href="directory_8c_source.html#l00070">70</a> of file <a class="el" href="directory_8c_source.html">directory.c</a>.</p>

<p class="reference">References <a class="el" href="malloc_8c_source.html#l00219">free()</a>, <a class="el" href="directory_8c_source.html#l00012">dir::inode</a>, <a class="el" href="inode_8c_source.html#l00164">inode_close()</a>, and <a class="el" href="stddef_8h_source.html#l00004">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="filesys_8c_source.html#l00046">filesys_create()</a>, <a class="el" href="filesys_8c_source.html#l00067">filesys_open()</a>, <a class="el" href="filesys_8c_source.html#l00084">filesys_remove()</a>, and <a class="el" href="fsutil_8c_source.html#l00016">fsutil_ls()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_a92d246b6a292843fdfd7e3e1d2b29701_cgraph.png" border="0" usemap="#adirectory_8c_a92d246b6a292843fdfd7e3e1d2b29701_cgraph" alt=""/></div>
<map name="adirectory_8c_a92d246b6a292843fdfd7e3e1d2b29701_cgraph" id="adirectory_8c_a92d246b6a292843fdfd7e3e1d2b29701_cgraph">
<area shape="rect" title="Destroys DIR and frees associated resources." alt="" coords="5,955,81,982"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="309,879,355,906"/>
<area shape="rect" href="inode_8c.html#a74e1a19b5bcae248617541fe6f2f77c5" title="Closes INODE and writes it to disk." alt="" coords="129,981,223,1007"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="447,879,560,906"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="627,879,740,906"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1003,727,1113,754"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1013,778,1103,805"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="635,271,732,298"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="455,474,552,501"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="841,981,911,1007"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="613,1057,753,1083"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="441,1082,565,1109"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="845,930,907,957"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="1483,499,1600,526"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1339,651,1418,678"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1181,727,1259,754"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1339,778,1419,805"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1351,727,1407,754"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1333,449,1424,475"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="801,5,951,47"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1165,119,1275,146"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="829,271,923,298"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1340,170,1417,197"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1323,119,1435,146"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1175,373,1265,399"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1008,474,1108,501"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1003,575,1113,602"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1009,170,1107,197"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1328,322,1429,349"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1176,423,1264,450"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1345,575,1413,602"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="1182,170,1258,197"/>
<area shape="rect" href="intq_8c.html#ac473f50d2829cba1321d34a57c425042" title="Returns the position after POS within an intq." alt="" coords="1355,221,1402,247"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="645,474,722,501"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1179,626,1261,653"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="825,677,927,703"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="819,423,933,450"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1022,677,1094,703"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="835,1133,917,1159"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="806,1183,946,1210"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="817,1082,935,1109"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1029,1031,1087,1058"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="999,1133,1117,1159"/>
<area shape="rect" href="bitmap_8c.html#ab8d6660c5e30dab9cecef1240c7423d9" title="Returns the value of the bit numbered IDX in B." alt="" coords="1175,1133,1265,1159"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1015,1183,1101,1210"/>
<area shape="rect" href="bitmap_8c.html#adb8912537854d4a2dcb1f35940a7134b" title="Atomically sets the bit numbered BIT_IDX in B to true." alt="" coords="1171,1234,1269,1261"/>
<area shape="rect" href="bitmap_8c.html#a5bb6be898ca442c95e725be80c2369a6" title="Atomically sets the bit numbered BIT_IDX in B to false." alt="" coords="1171,1183,1269,1210"/>
<area shape="rect" href="bitmap_8c.html#a576f7d29f091eac024f70ae8d68997a9" title="Bitmap size." alt="" coords="1011,1082,1105,1109"/>
<area shape="rect" href="inode_8c.html#af6294d594eab7d7afccf0d0cefd35a13" title="Returns the number of sectors to allocate for an inode SIZE bytes long." alt="" coords="271,1031,393,1058"/>
<area shape="rect" href="free-map_8c.html#a65586c8713124a199b6db7397c1aba6f" title="Makes CNT sectors starting at SECTOR available for use." alt="" coords="619,1133,748,1159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_a92d246b6a292843fdfd7e3e1d2b29701_icgraph.png" border="0" usemap="#adirectory_8c_a92d246b6a292843fdfd7e3e1d2b29701_icgraph" alt=""/></div>
<map name="adirectory_8c_a92d246b6a292843fdfd7e3e1d2b29701_icgraph" id="adirectory_8c_a92d246b6a292843fdfd7e3e1d2b29701_icgraph">
<area shape="rect" title="Destroys DIR and frees associated resources." alt="" coords="1028,157,1104,184"/>
<area shape="rect" href="filesys_8c.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="876,31,980,57"/>
<area shape="rect" href="filesys_8c.html#a79d6e6b4a6c2295fba2322000c7c19fd" title="Opens the file with the given NAME." alt="" coords="880,107,976,133"/>
<area shape="rect" href="filesys_8c.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="Deletes the file named NAME." alt="" coords="717,208,828,235"/>
<area shape="rect" href="fsutil_8c.html#a50cc451070af8d6fd949d2975b5f588d" title="List files in the root directory." alt="" coords="585,259,651,285"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="724,5,821,32"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,132,227,159"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,132,88,159"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="567,56,669,83"/>
<area shape="rect" href="fsutil_8c.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="420,107,495,133"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="749,157,796,184"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="567,157,669,184"/>
<area shape="rect" href="process_8c.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="396,157,519,184"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="275,157,348,184"/>
<area shape="rect" href="fsutil_8c.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="275,208,347,235"/>
</map>
</div>

</div>
</div>
<a id="ab3951213f266ce0e0404203a35fefe8f" name="ab3951213f266ce0e0404203a35fefe8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3951213f266ce0e0404203a35fefe8f">&#9670;&nbsp;</a></span>dir_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> dir_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a>&#160;</td>
          <td class="paramname"><em>sector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stddef_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>entry_cnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a directory with space for ENTRY_CNT entries in the given SECTOR. </p>
<p >Opening and closing directories.</p>
<p >Returns true if successful, false on failure. </p>

<p class="definition">Definition at line <a class="el" href="directory_8c_source.html#l00027">27</a> of file <a class="el" href="directory_8c_source.html">directory.c</a>.</p>

<p class="reference">References <a class="el" href="inode_8c_source.html#l00073">inode_create()</a>.</p>

<p class="reference">Referenced by <a class="el" href="filesys_8c_source.html#l00095">do_format()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_ab3951213f266ce0e0404203a35fefe8f_cgraph.png" border="0" usemap="#adirectory_8c_ab3951213f266ce0e0404203a35fefe8f_cgraph" alt=""/></div>
<map name="adirectory_8c_ab3951213f266ce0e0404203a35fefe8f_cgraph" id="adirectory_8c_ab3951213f266ce0e0404203a35fefe8f_cgraph">
<area shape="rect" title="Creates a directory with space for ENTRY_CNT entries in the given SECTOR." alt="" coords="5,816,87,843"/>
<area shape="rect" href="inode_8c.html#aa867b845d1fde30169c685397e05ac3f" title="Initializes an inode with LENGTH bytes of data and writes the new inode to sector SECTOR on the file ..." alt="" coords="135,816,233,843"/>
<area shape="rect" href="block_8c.html#ab7e44f7861385a5c4630d899a469f9d4" title="Write sector SECTOR to BLOCK from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="298,613,387,640"/>
<area shape="rect" href="inode_8c.html#af6294d594eab7d7afccf0d0cefd35a13" title="Returns the number of sectors to allocate for an inode SIZE bytes long." alt="" coords="281,765,404,792"/>
<area shape="rect" href="malloc_8c.html#a9b551bee9453c331a3a4a5d95d255e2e" title="Allocates and return A times B bytes initialized to zeroes." alt="" coords="315,867,371,893"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="637,816,683,843"/>
<area shape="rect" href="free-map_8c.html#a9cce17fe18443be5a61dbdf40c10e03a" title="Allocates CNT consecutive sectors from the free map and stores the first into *SECTORP." alt="" coords="770,1019,902,1045"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="452,233,552,260"/>
<area shape="rect" href="block_8c.html#abfb4cd8ff36ddbdf93ebc1944ccfbd4d" title="Returns BLOCK&#39;s name (e.g." alt="" coords="613,5,707,32"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="472,537,532,564"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1192,871,1261,897"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="779,664,893,691"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="779,917,893,944"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1684,284,1767,311"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1355,360,1457,387"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1511,487,1621,513"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="979,663,1077,689"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="979,561,1077,588"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="768,613,904,640"/>
<area shape="rect" href="palloc_8c.html#a0c66d7fdb0a9c8da247421261b5ca188" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="600,563,720,589"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1195,1120,1258,1147"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="1829,917,1947,944"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1849,487,1927,513"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1854,360,1922,387"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1530,284,1602,311"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1521,537,1611,564"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1848,537,1928,564"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1686,588,1765,615"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1860,588,1916,615"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1521,715,1611,741"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1152,653,1301,694"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1511,841,1621,868"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1180,601,1273,628"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1687,727,1764,753"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1669,892,1781,919"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1680,335,1771,361"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1516,233,1616,260"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1357,715,1455,741"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1188,259,1265,285"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1349,309,1463,336"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="952,1019,1104,1045"/>
<area shape="rect" href="bitmap_8c.html#a88a9127abe8322926d25de46140b778a" title="Finding set or unset bits." alt="" coords="1178,1019,1275,1045"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1157,1069,1297,1096"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1363,1069,1449,1096"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1511,588,1621,615"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="958,1171,1098,1197"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="774,1081,898,1108"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1185,1221,1268,1248"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1167,1171,1286,1197"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1377,1221,1435,1248"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_ab3951213f266ce0e0404203a35fefe8f_icgraph.png" border="0" usemap="#adirectory_8c_ab3951213f266ce0e0404203a35fefe8f_icgraph" alt=""/></div>
<map name="adirectory_8c_ab3951213f266ce0e0404203a35fefe8f_icgraph" id="adirectory_8c_ab3951213f266ce0e0404203a35fefe8f_icgraph">
<area shape="rect" title="Creates a directory with space for ENTRY_CNT entries in the given SECTOR." alt="" coords="399,5,480,32"/>
<area shape="rect" href="filesys_8c.html#a2710836971ed586925cb1c55850bf955" title="Formats the file system." alt="" coords="268,5,351,32"/>
<area shape="rect" href="filesys_8c.html#af905a48e295d86405ec08c307b6272f5" title="Initializes the file system module." alt="" coords="136,5,220,32"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,88,32"/>
</map>
</div>

</div>
</div>
<a id="a1d91377dd5b1d11929f7901b960b1777" name="a1d91377dd5b1d11929f7901b960b1777"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d91377dd5b1d11929f7901b960b1777">&#9670;&nbsp;</a></span>dir_get_inode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinode.html">inode</a> * dir_get_inode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdir.html">dir</a> *&#160;</td>
          <td class="paramname"><em>dir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the inode encapsulated by DIR. </p>

<p class="definition">Definition at line <a class="el" href="directory_8c_source.html#l00081">81</a> of file <a class="el" href="directory_8c_source.html">directory.c</a>.</p>

<p class="reference">References <a class="el" href="directory_8c_source.html#l00012">dir::inode</a>.</p>

</div>
</div>
<a id="a782062143b05a6f32d11457cfd6259f6" name="a782062143b05a6f32d11457cfd6259f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a782062143b05a6f32d11457cfd6259f6">&#9670;&nbsp;</a></span>dir_lookup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> dir_lookup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdir.html">dir</a> *&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> **&#160;</td>
          <td class="paramname"><em>inode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Searches DIR for a file with the given NAME and returns true if one exists, false otherwise. </p>
<p >Reading and writing.</p>
<p >On success, sets *INODE to an inode for the file, otherwise to a null pointer. The caller must close *INODE. </p>

<p class="definition">Definition at line <a class="el" href="directory_8c_source.html#l00119">119</a> of file <a class="el" href="directory_8c_source.html">directory.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="inode_8c_source.html#l00112">inode_open()</a>, <a class="el" href="directory_8c_source.html#l00019">dir_entry::inode_sector</a>, <a class="el" href="directory_8c_source.html#l00092">lookup()</a>, <a class="el" href="insult_8c_source.html#l00047">name</a>, and <a class="el" href="stddef_8h_source.html#l00004">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="filesys_8c_source.html#l00067">filesys_open()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_a782062143b05a6f32d11457cfd6259f6_cgraph.png" border="0" usemap="#adirectory_8c_a782062143b05a6f32d11457cfd6259f6_cgraph" alt=""/></div>
<map name="adirectory_8c_a782062143b05a6f32d11457cfd6259f6_cgraph" id="adirectory_8c_a782062143b05a6f32d11457cfd6259f6_cgraph">
<area shape="rect" title="Searches DIR for a file with the given NAME and returns true if one exists, false otherwise." alt="" coords="5,676,89,703"/>
<area shape="rect" href="inode_8c.html#a7adc21afc633b56d25a229ce0087c4a0" title="Reads an inode from SECTOR and returns a ‘struct inode’ that contains it." alt="" coords="254,296,346,323"/>
<area shape="rect" href="directory_8c.html#ab2c71a2a1a0ffa3c618792babf4fc8b9" title="Searches DIR for a file with the given NAME." alt="" coords="137,701,199,728"/>
<area shape="rect" href="block_8c.html#a8c08b3ab03d5cdb52856bab0aafe7006" title="Reads sector SECTOR from BLOCK into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="413,1031,499,1057"/>
<area shape="rect" href="inode_8c.html#a6244b29557e8dfa4f7fb0fb804e35413" title="Reopens and returns INODE." alt="" coords="404,220,508,247"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1807,169,1886,196"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1813,119,1881,145"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#abd2f8e3cf912b8f9ba5e592d32f11ff3" title="Returns the element after ELEM in its list." alt="" coords="421,271,491,297"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1131,575,1240,601"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="426,701,486,728"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="569,1043,669,1069"/>
<area shape="rect" href="block_8c.html#abfb4cd8ff36ddbdf93ebc1944ccfbd4d" title="Returns BLOCK&#39;s name (e.g." alt="" coords="748,1056,841,1083"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#aee78fb1351519ad20686f6eaf9018b4c" title="Returns true if ELEM is a head, false otherwise." alt="" coords="584,220,653,247"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1807,625,1887,652"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1645,676,1723,703"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1819,676,1875,703"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="930,904,1043,931"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="1129,1183,1242,1209"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1643,144,1725,171"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1313,296,1416,323"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1469,499,1580,525"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="938,803,1035,829"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="938,651,1035,677"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="727,727,863,753"/>
<area shape="rect" href="palloc_8c.html#a0c66d7fdb0a9c8da247421261b5ca188" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="559,752,679,779"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1333,1157,1396,1184"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="1788,1132,1905,1159"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1489,195,1561,221"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1479,651,1570,677"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1479,803,1570,829"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1111,737,1260,778"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1470,980,1579,1007"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1139,685,1232,712"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1645,853,1723,880"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1628,1056,1740,1083"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1639,372,1729,399"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1475,347,1575,373"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1315,904,1414,931"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1147,271,1224,297"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1308,397,1421,424"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="911,701,1063,728"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1330,1107,1399,1133"/>
<area shape="rect" href="inode_8c.html#a31fcd756c686b818d56067b4460bfdb9" title="Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET." alt="" coords="247,1031,353,1057"/>
<area shape="rect" href="string_8c.html#ae99b71772ffcf066739c8568013425e3" title="Finds the first differing characters in strings A and B." alt="" coords="269,701,331,728"/>
<area shape="rect" href="inode_8c.html#a9b48abdaf996c82819f49d6d8fc4c224" title="Returns the block device sector that contains byte offset POS within INODE." alt="" coords="401,1183,511,1209"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="772,955,817,981"/>
<area shape="rect" href="inode_8c.html#a67214eb44fb24ef254fca76f9a63fd6d" title="Returns the length, in bytes, of INODE&#39;s data." alt="" coords="407,1081,505,1108"/>
<area shape="rect" href="string_8c.html#a75301dc67774ade574b3b3205ee4f39e" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="420,1132,492,1159"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="1115,1107,1255,1133"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="925,1107,1049,1133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_a782062143b05a6f32d11457cfd6259f6_icgraph.png" border="0" usemap="#adirectory_8c_a782062143b05a6f32d11457cfd6259f6_icgraph" alt=""/></div>
<map name="adirectory_8c_a782062143b05a6f32d11457cfd6259f6_icgraph" id="adirectory_8c_a782062143b05a6f32d11457cfd6259f6_icgraph">
<area shape="rect" title="Searches DIR for a file with the given NAME and returns true if one exists, false otherwise." alt="" coords="980,81,1064,108"/>
<area shape="rect" href="filesys_8c.html#a79d6e6b4a6c2295fba2322000c7c19fd" title="Opens the file with the given NAME." alt="" coords="836,81,932,108"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="591,5,693,32"/>
<area shape="rect" href="fsutil_8c.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="444,56,519,83"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="275,107,372,133"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="741,157,788,184"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,81,227,108"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,81,88,108"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="591,157,693,184"/>
<area shape="rect" href="process_8c.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="420,157,543,184"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="287,157,360,184"/>
</map>
</div>

</div>
</div>
<a id="a12c77ad2315eb1079f7914b1b1b27ce2" name="a12c77ad2315eb1079f7914b1b1b27ce2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12c77ad2315eb1079f7914b1b1b27ce2">&#9670;&nbsp;</a></span>dir_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdir.html">dir</a> * dir_open </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens and returns the directory for the given INODE, of which it takes ownership. </p>
<p >Returns a null pointer on failure. </p>

<p class="definition">Definition at line <a class="el" href="directory_8c_source.html#l00035">35</a> of file <a class="el" href="directory_8c_source.html">directory.c</a>.</p>

<p class="reference">References <a class="el" href="malloc_8c_source.html#l00159">calloc()</a>, <a class="el" href="malloc_8c_source.html#l00219">free()</a>, <a class="el" href="directory_8c_source.html#l00012">dir::inode</a>, <a class="el" href="inode_8c_source.html#l00164">inode_close()</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, and <a class="el" href="directory_8c_source.html#l00013">dir::pos</a>.</p>

<p class="reference">Referenced by <a class="el" href="directory_8c_source.html#l00055">dir_open_root()</a>, and <a class="el" href="directory_8c_source.html#l00063">dir_reopen()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_a12c77ad2315eb1079f7914b1b1b27ce2_cgraph.png" border="0" usemap="#adirectory_8c_a12c77ad2315eb1079f7914b1b1b27ce2_cgraph" alt=""/></div>
<map name="adirectory_8c_a12c77ad2315eb1079f7914b1b1b27ce2_cgraph" id="adirectory_8c_a12c77ad2315eb1079f7914b1b1b27ce2_cgraph">
<area shape="rect" title="Opens and returns the directory for the given INODE, of which it takes ownership." alt="" coords="5,943,79,969"/>
<area shape="rect" href="malloc_8c.html#a9b551bee9453c331a3a4a5d95d255e2e" title="Allocates and return A times B bytes initialized to zeroes." alt="" coords="127,816,183,843"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="411,943,456,969"/>
<area shape="rect" href="inode_8c.html#a74e1a19b5bcae248617541fe6f2f77c5" title="Closes INODE and writes it to disk." alt="" coords="231,1044,324,1071"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="247,588,307,615"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="967,816,1036,843"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="554,715,667,741"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="554,867,667,893"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1464,664,1547,691"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1132,765,1235,792"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1291,512,1401,539"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="754,323,851,349"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="754,461,851,488"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="543,512,679,539"/>
<area shape="rect" href="palloc_8c.html#a0c66d7fdb0a9c8da247421261b5ca188" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="373,512,493,539"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="970,867,1033,893"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="1609,348,1727,375"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1629,703,1707,729"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1634,627,1702,653"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1310,725,1382,752"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1301,1159,1391,1185"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1628,937,1708,964"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1466,799,1545,825"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1640,799,1696,825"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1301,5,1391,32"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="927,315,1076,357"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1291,157,1401,184"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="955,107,1048,133"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1467,245,1544,272"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1449,169,1561,196"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1460,309,1551,336"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1296,309,1396,336"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1134,56,1233,83"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1617,196,1719,223"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="963,461,1040,488"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1127,411,1240,437"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="727,765,879,792"/>
<area shape="rect" href="bitmap_8c.html#a88a9127abe8322926d25de46140b778a" title="Finding set or unset bits." alt="" coords="953,765,1050,792"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="931,917,1071,944"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1124,968,1243,995"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1140,917,1227,944"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1291,799,1401,825"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="733,1019,873,1045"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="549,968,673,995"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="960,968,1043,995"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="942,1069,1061,1096"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1154,1019,1213,1045"/>
<area shape="rect" href="bitmap_8c.html#a576f7d29f091eac024f70ae8d68997a9" title="Bitmap size." alt="" coords="1137,1069,1230,1096"/>
<area shape="rect" href="inode_8c.html#af6294d594eab7d7afccf0d0cefd35a13" title="Returns the number of sectors to allocate for an inode SIZE bytes long." alt="" coords="372,1044,495,1071"/>
<area shape="rect" href="free-map_8c.html#a65586c8713124a199b6db7397c1aba6f" title="Makes CNT sectors starting at SECTOR available for use." alt="" coords="738,1069,867,1096"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_a12c77ad2315eb1079f7914b1b1b27ce2_icgraph.png" border="0" usemap="#adirectory_8c_a12c77ad2315eb1079f7914b1b1b27ce2_icgraph" alt=""/></div>
<map name="adirectory_8c_a12c77ad2315eb1079f7914b1b1b27ce2_icgraph" id="adirectory_8c_a12c77ad2315eb1079f7914b1b1b27ce2_icgraph">
<area shape="rect" title="Opens and returns the directory for the given INODE, of which it takes ownership." alt="" coords="1180,183,1253,209"/>
<area shape="rect" href="directory_8c.html#afdea7fe972a97776e832c4324b0c4b9d" title="Opens the root directory and returns a directory for it." alt="" coords="1028,157,1132,184"/>
<area shape="rect" href="directory_8c.html#a8c479e18ce6294ba5d6c3fe23dd2b5bf" title="Opens and returns a new directory for the same inode as DIR." alt="" coords="1037,208,1123,235"/>
<area shape="rect" href="filesys_8c.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="876,31,980,57"/>
<area shape="rect" href="filesys_8c.html#a79d6e6b4a6c2295fba2322000c7c19fd" title="Opens the file with the given NAME." alt="" coords="880,107,976,133"/>
<area shape="rect" href="filesys_8c.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="Deletes the file named NAME." alt="" coords="717,208,828,235"/>
<area shape="rect" href="fsutil_8c.html#a50cc451070af8d6fd949d2975b5f588d" title="List files in the root directory." alt="" coords="585,259,651,285"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="724,5,821,32"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,132,227,159"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,132,88,159"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="567,56,669,83"/>
<area shape="rect" href="fsutil_8c.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="420,107,495,133"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="749,157,796,184"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="567,157,669,184"/>
<area shape="rect" href="process_8c.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="396,157,519,184"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="275,157,348,184"/>
<area shape="rect" href="fsutil_8c.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="275,208,347,235"/>
</map>
</div>

</div>
</div>
<a id="afdea7fe972a97776e832c4324b0c4b9d" name="afdea7fe972a97776e832c4324b0c4b9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdea7fe972a97776e832c4324b0c4b9d">&#9670;&nbsp;</a></span>dir_open_root()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdir.html">dir</a> * dir_open_root </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens the root directory and returns a directory for it. </p>
<p >Return true if successful, false on failure. </p>

<p class="definition">Definition at line <a class="el" href="directory_8c_source.html#l00055">55</a> of file <a class="el" href="directory_8c_source.html">directory.c</a>.</p>

<p class="reference">References <a class="el" href="directory_8c_source.html#l00035">dir_open()</a>, <a class="el" href="inode_8c_source.html#l00112">inode_open()</a>, and <a class="el" href="filesys_8h_source.html#l00009">ROOT_DIR_SECTOR</a>.</p>

<p class="reference">Referenced by <a class="el" href="filesys_8c_source.html#l00046">filesys_create()</a>, <a class="el" href="filesys_8c_source.html#l00067">filesys_open()</a>, <a class="el" href="filesys_8c_source.html#l00084">filesys_remove()</a>, and <a class="el" href="fsutil_8c_source.html#l00016">fsutil_ls()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_afdea7fe972a97776e832c4324b0c4b9d_cgraph.png" border="0" usemap="#adirectory_8c_afdea7fe972a97776e832c4324b0c4b9d_cgraph" alt=""/></div>
<map name="adirectory_8c_afdea7fe972a97776e832c4324b0c4b9d_cgraph" id="adirectory_8c_afdea7fe972a97776e832c4324b0c4b9d_cgraph">
<area shape="rect" title="Opens the root directory and returns a directory for it." alt="" coords="5,791,109,817"/>
<area shape="rect" href="directory_8c.html#a12c77ad2315eb1079f7914b1b1b27ce2" title="Opens and returns the directory for the given INODE, of which it takes ownership." alt="" coords="157,461,231,488"/>
<area shape="rect" href="inode_8c.html#a7adc21afc633b56d25a229ce0087c4a0" title="Reads an inode from SECTOR and returns a ‘struct inode’ that contains it." alt="" coords="279,1145,371,1172"/>
<area shape="rect" href="malloc_8c.html#a9b551bee9453c331a3a4a5d95d255e2e" title="Allocates and return A times B bytes initialized to zeroes." alt="" coords="297,487,353,513"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="609,436,655,463"/>
<area shape="rect" href="inode_8c.html#a74e1a19b5bcae248617541fe6f2f77c5" title="Closes INODE and writes it to disk." alt="" coords="424,132,517,159"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="441,765,501,792"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1165,360,1235,387"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="753,664,866,691"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="753,512,866,539"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1639,968,1721,995"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1327,461,1429,488"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1323,1019,1433,1045"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="953,765,1050,792"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="953,715,1050,741"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="741,715,877,741"/>
<area shape="rect" href="palloc_8c.html#a0c66d7fdb0a9c8da247421261b5ca188" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="572,715,692,741"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1169,309,1231,336"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="943,512,1060,539"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1769,1221,1848,1248"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1775,1019,1843,1045"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1500,487,1572,513"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1491,424,1581,451"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1640,1069,1720,1096"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1497,1120,1575,1147"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1652,1120,1708,1147"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1491,867,1581,893"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1125,627,1275,669"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1481,740,1591,767"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1153,795,1247,821"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1491,563,1581,589"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1328,563,1428,589"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1329,816,1427,843"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1161,461,1239,488"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="925,613,1077,640"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1130,157,1270,184"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1323,1145,1433,1172"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="931,208,1071,235"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="747,309,871,336"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1159,107,1241,133"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1141,259,1259,285"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1349,233,1407,260"/>
<area shape="rect" href="inode_8c.html#af6294d594eab7d7afccf0d0cefd35a13" title="Returns the number of sectors to allocate for an inode SIZE bytes long." alt="" coords="571,5,693,32"/>
<area shape="rect" href="free-map_8c.html#a65586c8713124a199b6db7397c1aba6f" title="Makes CNT sectors starting at SECTOR available for use." alt="" coords="937,132,1066,159"/>
<area shape="rect" href="block_8c.html#a8c08b3ab03d5cdb52856bab0aafe7006" title="Reads sector SECTOR from BLOCK into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="427,1272,514,1299"/>
<area shape="rect" href="inode_8c.html#a6244b29557e8dfa4f7fb0fb804e35413" title="Reopens and returns INODE." alt="" coords="419,1171,523,1197"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#abd2f8e3cf912b8f9ba5e592d32f11ff3" title="Returns the element after ELEM in its list." alt="" coords="435,1069,506,1096"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="582,1272,682,1299"/>
<area shape="rect" href="block_8c.html#abfb4cd8ff36ddbdf93ebc1944ccfbd4d" title="Returns BLOCK&#39;s name (e.g." alt="" coords="763,1272,856,1299"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#aee78fb1351519ad20686f6eaf9018b4c" title="Returns true if ELEM is a head, false otherwise." alt="" coords="597,1120,667,1147"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_afdea7fe972a97776e832c4324b0c4b9d_icgraph.png" border="0" usemap="#adirectory_8c_afdea7fe972a97776e832c4324b0c4b9d_icgraph" alt=""/></div>
<map name="adirectory_8c_afdea7fe972a97776e832c4324b0c4b9d_icgraph" id="adirectory_8c_afdea7fe972a97776e832c4324b0c4b9d_icgraph">
<area shape="rect" title="Opens the root directory and returns a directory for it." alt="" coords="1028,157,1132,184"/>
<area shape="rect" href="filesys_8c.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="876,31,980,57"/>
<area shape="rect" href="filesys_8c.html#a79d6e6b4a6c2295fba2322000c7c19fd" title="Opens the file with the given NAME." alt="" coords="880,107,976,133"/>
<area shape="rect" href="filesys_8c.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="Deletes the file named NAME." alt="" coords="717,208,828,235"/>
<area shape="rect" href="fsutil_8c.html#a50cc451070af8d6fd949d2975b5f588d" title="List files in the root directory." alt="" coords="585,259,651,285"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="724,5,821,32"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,132,227,159"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,132,88,159"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="567,56,669,83"/>
<area shape="rect" href="fsutil_8c.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="420,107,495,133"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="749,157,796,184"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="567,157,669,184"/>
<area shape="rect" href="process_8c.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="396,157,519,184"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="275,157,348,184"/>
<area shape="rect" href="fsutil_8c.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="275,208,347,235"/>
</map>
</div>

</div>
</div>
<a id="ae9ec2107e448111aca8951c2f7bfa61b" name="ae9ec2107e448111aca8951c2f7bfa61b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9ec2107e448111aca8951c2f7bfa61b">&#9670;&nbsp;</a></span>dir_readdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> dir_readdir </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdir.html">dir</a> *&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>name</em>[NAME_MAX+1]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the next directory entry in DIR and stores the name in NAME. </p>
<p ><a class="el" href="directory_8h.html">filesys/directory.h</a></p>
<p >Returns true if successful, false if the directory contains no more entries. </p>

<p class="definition">Definition at line <a class="el" href="directory_8c_source.html#l00222">222</a> of file <a class="el" href="directory_8c_source.html">directory.c</a>.</p>

<p class="reference">References <a class="el" href="directory_8c_source.html#l00021">dir_entry::in_use</a>, <a class="el" href="directory_8c_source.html#l00012">dir::inode</a>, <a class="el" href="inode_8c_source.html#l00201">inode_read_at()</a>, <a class="el" href="insult_8c_source.html#l00047">name</a>, <a class="el" href="directory_8c_source.html#l00020">dir_entry::name</a>, <a class="el" href="directory_8h_source.html#l00012">NAME_MAX</a>, <a class="el" href="directory_8c_source.html#l00013">dir::pos</a>, and <a class="el" href="string_8c_source.html#l00326">strlcpy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="fsutil_8c_source.html#l00016">fsutil_ls()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_ae9ec2107e448111aca8951c2f7bfa61b_cgraph.png" border="0" usemap="#adirectory_8c_ae9ec2107e448111aca8951c2f7bfa61b_cgraph" alt=""/></div>
<map name="adirectory_8c_ae9ec2107e448111aca8951c2f7bfa61b_cgraph" id="adirectory_8c_ae9ec2107e448111aca8951c2f7bfa61b_cgraph">
<area shape="rect" title="Reads the next directory entry in DIR and stores the name in NAME." alt="" coords="5,868,91,894"/>
<area shape="rect" href="inode_8c.html#a31fcd756c686b818d56067b4460bfdb9" title="Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET." alt="" coords="139,817,245,844"/>
<area shape="rect" href="string_8c.html#a4637af6f79bac4043e1064f0837d0ddc" title="Copies string SRC to DST." alt="" coords="162,918,222,945"/>
<area shape="rect" href="block_8c.html#a8c08b3ab03d5cdb52856bab0aafe7006" title="Reads sector SECTOR from BLOCK into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="305,766,391,793"/>
<area shape="rect" href="inode_8c.html#a9b48abdaf996c82819f49d6d8fc4c224" title="Returns the block device sector that contains byte offset POS within INODE." alt="" coords="293,817,403,844"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="664,868,709,894"/>
<area shape="rect" href="inode_8c.html#a67214eb44fb24ef254fca76f9a63fd6d" title="Returns the length, in bytes, of INODE&#39;s data." alt="" coords="299,564,397,590"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="318,614,378,641"/>
<area shape="rect" href="string_8c.html#a75301dc67774ade574b3b3205ee4f39e" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="312,918,384,945"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="461,817,561,844"/>
<area shape="rect" href="block_8c.html#abfb4cd8ff36ddbdf93ebc1944ccfbd4d" title="Returns BLOCK&#39;s name (e.g." alt="" coords="640,817,733,844"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="822,804,935,830"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="822,728,935,754"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1389,868,1498,894"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1398,918,1489,945"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="830,285,927,312"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="830,412,927,438"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1235,817,1305,844"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="1007,969,1147,996"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="817,1020,941,1046"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1239,918,1301,945"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="1707,361,1824,388"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1726,690,1805,717"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1563,868,1642,894"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1725,918,1805,945"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1737,868,1793,894"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1398,6,1489,33"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1003,278,1152,319"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1389,108,1498,134"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1031,158,1124,185"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1564,216,1641,242"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1547,128,1659,154"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1557,342,1648,369"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1393,260,1493,286"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1388,462,1499,489"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1221,57,1319,84"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1731,564,1799,590"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1039,412,1116,438"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1561,614,1644,641"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1219,614,1321,641"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1213,361,1327,388"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1407,614,1479,641"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1229,969,1311,996"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1200,716,1340,742"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1211,1121,1329,1148"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1414,1070,1473,1097"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="619,462,755,489"/>
<area shape="rect" href="palloc_8c.html#a0c66d7fdb0a9c8da247421261b5ca188" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="451,462,571,489"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="803,462,955,489"/>
<area shape="rect" href="string_8c.html#a2869404e70f06f4477271f26ce8c4920" title="Returns the length of STRING." alt="" coords="321,969,375,996"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_ae9ec2107e448111aca8951c2f7bfa61b_icgraph.png" border="0" usemap="#adirectory_8c_ae9ec2107e448111aca8951c2f7bfa61b_icgraph" alt=""/></div>
<map name="adirectory_8c_ae9ec2107e448111aca8951c2f7bfa61b_icgraph" id="adirectory_8c_ae9ec2107e448111aca8951c2f7bfa61b_icgraph">
<area shape="rect" title="Reads the next directory entry in DIR and stores the name in NAME." alt="" coords="389,5,475,32"/>
<area shape="rect" href="fsutil_8c.html#a50cc451070af8d6fd949d2975b5f588d" title="List files in the root directory." alt="" coords="275,5,341,32"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,5,227,32"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,88,32"/>
</map>
</div>

</div>
</div>
<a id="ae277e450f2d6d436a61adccc0ad5ce23" name="ae277e450f2d6d436a61adccc0ad5ce23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae277e450f2d6d436a61adccc0ad5ce23">&#9670;&nbsp;</a></span>dir_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> dir_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdir.html">dir</a> *&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes any entry for NAME in DIR. </p>
<p >Returns true if successful, false on failure, which occurs only if there is no file with the given NAME. </p>

<p class="definition">Definition at line <a class="el" href="directory_8c_source.html#l00185">185</a> of file <a class="el" href="directory_8c_source.html">directory.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="directory_8c_source.html#l00021">dir_entry::in_use</a>, <a class="el" href="directory_8c_source.html#l00012">dir::inode</a>, <a class="el" href="inode_8c_source.html#l00164">inode_close()</a>, <a class="el" href="inode_8c_source.html#l00112">inode_open()</a>, <a class="el" href="inode_8c_source.html#l00191">inode_remove()</a>, <a class="el" href="directory_8c_source.html#l00019">dir_entry::inode_sector</a>, <a class="el" href="inode_8c_source.html#l00258">inode_write_at()</a>, <a class="el" href="directory_8c_source.html#l00092">lookup()</a>, <a class="el" href="insult_8c_source.html#l00047">name</a>, and <a class="el" href="stddef_8h_source.html#l00004">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="filesys_8c_source.html#l00084">filesys_remove()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_ae277e450f2d6d436a61adccc0ad5ce23_cgraph.png" border="0" usemap="#adirectory_8c_ae277e450f2d6d436a61adccc0ad5ce23_cgraph" alt=""/></div>
<map name="adirectory_8c_ae277e450f2d6d436a61adccc0ad5ce23_cgraph" id="adirectory_8c_ae277e450f2d6d436a61adccc0ad5ce23_cgraph">
<area shape="rect" title="Removes any entry for NAME in DIR." alt="" coords="5,561,95,588"/>
<area shape="rect" href="inode_8c.html#a74e1a19b5bcae248617541fe6f2f77c5" title="Closes INODE and writes it to disk." alt="" coords="305,112,399,139"/>
<area shape="rect" href="inode_8c.html#a7adc21afc633b56d25a229ce0087c4a0" title="Reads an inode from SECTOR and returns a ‘struct inode’ that contains it." alt="" coords="306,992,398,1019"/>
<area shape="rect" href="inode_8c.html#af37b7ea512c8cb2a43e593b3b2d32ed9" title="Marks INODE to be deleted when it is closed by the last caller who has it open." alt="" coords="143,663,249,689"/>
<area shape="rect" href="inode_8c.html#a09402d2c8d33dc00b2557daa27d944ee" title="Writes SIZE bytes from BUFFER into INODE, starting at OFFSET." alt="" coords="297,561,407,588"/>
<area shape="rect" href="directory_8c.html#ab2c71a2a1a0ffa3c618792babf4fc8b9" title="Searches DIR for a file with the given NAME." alt="" coords="165,511,227,537"/>
<area shape="rect" href="inode_8c.html#af6294d594eab7d7afccf0d0cefd35a13" title="Returns the number of sectors to allocate for an inode SIZE bytes long." alt="" coords="455,61,577,88"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="493,384,539,411"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1529,509,1620,536"/>
<area shape="rect" href="free-map_8c.html#a65586c8713124a199b6db7397c1aba6f" title="Makes CNT sectors starting at SECTOR available for use." alt="" coords="803,93,932,120"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="631,637,744,664"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="631,384,744,411"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="813,655,922,681"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1007,891,1104,917"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="1007,824,1104,851"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1021,359,1090,385"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="797,181,937,208"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="625,232,749,259"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1024,245,1087,272"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="809,384,926,411"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1535,1056,1614,1083"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1535,1005,1614,1032"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1668,1005,1748,1032"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1381,967,1471,993"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1173,825,1323,866"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1371,891,1481,917"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1201,941,1295,968"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1371,1031,1481,1057"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1541,1107,1609,1133"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1209,773,1287,800"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1385,1093,1467,1120"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1375,723,1477,749"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1014,43,1097,69"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="985,93,1125,120"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="996,195,1115,221"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1219,169,1277,196"/>
<area shape="rect" href="block_8c.html#a8c08b3ab03d5cdb52856bab0aafe7006" title="Reads sector SECTOR from BLOCK into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="473,688,559,715"/>
<area shape="rect" href="inode_8c.html#a6244b29557e8dfa4f7fb0fb804e35413" title="Reopens and returns INODE." alt="" coords="464,1296,568,1323"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#abd2f8e3cf912b8f9ba5e592d32f11ff3" title="Returns the element after ELEM in its list." alt="" coords="481,1245,551,1272"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="486,865,546,892"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="637,688,737,715"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#aee78fb1351519ad20686f6eaf9018b4c" title="Returns true if ELEM is a head, false otherwise." alt="" coords="653,1245,722,1272"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="799,824,935,851"/>
<area shape="rect" href="palloc_8c.html#a0c66d7fdb0a9c8da247421261b5ca188" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="627,840,747,867"/>
<area shape="rect" href="block_8c.html#ab7e44f7861385a5c4630d899a469f9d4" title="Write sector SECTOR to BLOCK from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="471,637,561,664"/>
<area shape="rect" href="inode_8c.html#a9b48abdaf996c82819f49d6d8fc4c224" title="Returns the block device sector that contains byte offset POS within INODE." alt="" coords="461,536,571,563"/>
<area shape="rect" href="inode_8c.html#a67214eb44fb24ef254fca76f9a63fd6d" title="Returns the length, in bytes, of INODE&#39;s data." alt="" coords="467,435,565,461"/>
<area shape="rect" href="string_8c.html#a75301dc67774ade574b3b3205ee4f39e" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="480,485,552,512"/>
<area shape="rect" href="inode_8c.html#a31fcd756c686b818d56067b4460bfdb9" title="Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET." alt="" coords="299,511,405,537"/>
<area shape="rect" href="string_8c.html#ae99b71772ffcf066739c8568013425e3" title="Finds the first differing characters in strings A and B." alt="" coords="321,460,383,487"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_ae277e450f2d6d436a61adccc0ad5ce23_icgraph.png" border="0" usemap="#adirectory_8c_ae277e450f2d6d436a61adccc0ad5ce23_icgraph" alt=""/></div>
<map name="adirectory_8c_ae277e450f2d6d436a61adccc0ad5ce23_icgraph" id="adirectory_8c_ae277e450f2d6d436a61adccc0ad5ce23_icgraph">
<area shape="rect" title="Removes any entry for NAME in DIR." alt="" coords="553,5,643,32"/>
<area shape="rect" href="filesys_8c.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="Deletes the file named NAME." alt="" coords="395,5,505,32"/>
<area shape="rect" href="fsutil_8c.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="275,5,347,32"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,5,227,32"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,88,32"/>
</map>
</div>

</div>
</div>
<a id="a8c479e18ce6294ba5d6c3fe23dd2b5bf" name="a8c479e18ce6294ba5d6c3fe23dd2b5bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c479e18ce6294ba5d6c3fe23dd2b5bf">&#9670;&nbsp;</a></span>dir_reopen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structdir.html">dir</a> * dir_reopen </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structdir.html">dir</a> *&#160;</td>
          <td class="paramname"><em>dir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens and returns a new directory for the same inode as DIR. </p>
<p >Returns a null pointer on failure. </p>

<p class="definition">Definition at line <a class="el" href="directory_8c_source.html#l00063">63</a> of file <a class="el" href="directory_8c_source.html">directory.c</a>.</p>

<p class="reference">References <a class="el" href="directory_8c_source.html#l00035">dir_open()</a>, <a class="el" href="directory_8c_source.html#l00012">dir::inode</a>, and <a class="el" href="inode_8c_source.html#l00146">inode_reopen()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_a8c479e18ce6294ba5d6c3fe23dd2b5bf_cgraph.png" border="0" usemap="#adirectory_8c_a8c479e18ce6294ba5d6c3fe23dd2b5bf_cgraph" alt=""/></div>
<map name="adirectory_8c_a8c479e18ce6294ba5d6c3fe23dd2b5bf_cgraph" id="adirectory_8c_a8c479e18ce6294ba5d6c3fe23dd2b5bf_cgraph">
<area shape="rect" title="Opens and returns a new directory for the same inode as DIR." alt="" coords="5,1003,91,1030"/>
<area shape="rect" href="directory_8c.html#a12c77ad2315eb1079f7914b1b1b27ce2" title="Opens and returns the directory for the given INODE, of which it takes ownership." alt="" coords="154,978,227,1005"/>
<area shape="rect" href="inode_8c.html#a6244b29557e8dfa4f7fb0fb804e35413" title="Reopens and returns INODE." alt="" coords="139,1029,243,1055"/>
<area shape="rect" href="malloc_8c.html#a9b551bee9453c331a3a4a5d95d255e2e" title="Allocates and return A times B bytes initialized to zeroes." alt="" coords="291,927,347,954"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="575,927,620,954"/>
<area shape="rect" href="inode_8c.html#a74e1a19b5bcae248617541fe6f2f77c5" title="Closes INODE and writes it to disk." alt="" coords="395,1155,488,1182"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="411,598,471,625"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1131,927,1200,954"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="718,725,831,751"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="718,826,831,853"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1628,674,1711,701"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1296,725,1399,751"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1455,573,1565,599"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="918,319,1015,346"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="918,471,1015,498"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="707,497,843,523"/>
<area shape="rect" href="palloc_8c.html#a0c66d7fdb0a9c8da247421261b5ca188" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="537,522,657,549"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1134,978,1197,1005"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="1773,686,1891,713"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1793,762,1871,789"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1798,623,1866,650"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1474,725,1546,751"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1465,1149,1555,1175"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1792,959,1872,986"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1630,877,1709,903"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1804,877,1860,903"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1465,15,1555,42"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1091,316,1240,357"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1455,179,1565,206"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1119,265,1212,291"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1631,262,1708,289"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1613,186,1725,213"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1624,363,1715,390"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1460,370,1560,397"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1298,66,1397,93"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1127,471,1204,498"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1291,471,1404,498"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="891,1130,1043,1157"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1095,1130,1235,1157"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1304,1130,1391,1157"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1455,826,1565,853"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="897,1079,1037,1106"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="713,1029,837,1055"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1124,1231,1207,1258"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1106,1079,1225,1106"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1318,1029,1377,1055"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1288,1231,1407,1258"/>
<area shape="rect" href="bitmap_8c.html#a576f7d29f091eac024f70ae8d68997a9" title="Bitmap size." alt="" coords="1301,1079,1394,1106"/>
<area shape="rect" href="inode_8c.html#af6294d594eab7d7afccf0d0cefd35a13" title="Returns the number of sectors to allocate for an inode SIZE bytes long." alt="" coords="536,1155,659,1182"/>
<area shape="rect" href="free-map_8c.html#a65586c8713124a199b6db7397c1aba6f" title="Makes CNT sectors starting at SECTOR available for use." alt="" coords="902,1231,1031,1258"/>
</map>
</div>

</div>
</div>
<a id="ab2c71a2a1a0ffa3c618792babf4fc8b9" name="ab2c71a2a1a0ffa3c618792babf4fc8b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2c71a2a1a0ffa3c618792babf4fc8b9">&#9670;&nbsp;</a></span>lookup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> lookup </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structdir.html">dir</a> *&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structdir__entry.html">dir_entry</a> *&#160;</td>
          <td class="paramname"><em>ep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> *&#160;</td>
          <td class="paramname"><em>ofsp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Searches DIR for a file with the given NAME. </p>
<p >If successful, returns true, sets *EP to the directory entry if EP is non-null, and sets *OFSP to the byte offset of the directory entry if OFSP is non-null. otherwise, returns false and ignores EP and OFSP. </p>

<p class="definition">Definition at line <a class="el" href="directory_8c_source.html#l00092">92</a> of file <a class="el" href="directory_8c_source.html">directory.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="directory_8c_source.html#l00021">dir_entry::in_use</a>, <a class="el" href="directory_8c_source.html#l00012">dir::inode</a>, <a class="el" href="inode_8c_source.html#l00201">inode_read_at()</a>, <a class="el" href="insult_8c_source.html#l00047">name</a>, <a class="el" href="directory_8c_source.html#l00020">dir_entry::name</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, and <a class="el" href="string_8c_source.html#l00073">strcmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="directory_8c_source.html#l00142">dir_add()</a>, <a class="el" href="directory_8c_source.html#l00119">dir_lookup()</a>, and <a class="el" href="directory_8c_source.html#l00185">dir_remove()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_ab2c71a2a1a0ffa3c618792babf4fc8b9_cgraph.png" border="0" usemap="#adirectory_8c_ab2c71a2a1a0ffa3c618792babf4fc8b9_cgraph" alt=""/></div>
<map name="adirectory_8c_ab2c71a2a1a0ffa3c618792babf4fc8b9_cgraph" id="adirectory_8c_ab2c71a2a1a0ffa3c618792babf4fc8b9_cgraph">
<area shape="rect" title="Searches DIR for a file with the given NAME." alt="" coords="5,424,67,450"/>
<area shape="rect" href="inode_8c.html#a31fcd756c686b818d56067b4460bfdb9" title="Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET." alt="" coords="115,398,221,425"/>
<area shape="rect" href="string_8c.html#ae99b71772ffcf066739c8568013425e3" title="Finds the first differing characters in strings A and B." alt="" coords="137,449,199,476"/>
<area shape="rect" href="block_8c.html#a8c08b3ab03d5cdb52856bab0aafe7006" title="Reads sector SECTOR from BLOCK into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="281,221,367,248"/>
<area shape="rect" href="inode_8c.html#a9b48abdaf996c82819f49d6d8fc4c224" title="Returns the block device sector that contains byte offset POS within INODE." alt="" coords="269,272,379,298"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="640,322,685,349"/>
<area shape="rect" href="inode_8c.html#a67214eb44fb24ef254fca76f9a63fd6d" title="Returns the length, in bytes, of INODE&#39;s data." alt="" coords="275,550,373,577"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="294,500,354,526"/>
<area shape="rect" href="string_8c.html#a75301dc67774ade574b3b3205ee4f39e" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="288,601,360,628"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="437,221,537,248"/>
<area shape="rect" href="block_8c.html#abfb4cd8ff36ddbdf93ebc1944ccfbd4d" title="Returns BLOCK&#39;s name (e.g." alt="" coords="616,221,709,248"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="798,373,911,400"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="798,424,911,450"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1369,32,1478,58"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1378,272,1469,298"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="806,829,903,856"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="806,728,903,754"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1211,322,1281,349"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="983,170,1123,197"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="793,120,917,146"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1215,221,1277,248"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="1691,430,1808,457"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1710,342,1789,369"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1547,272,1626,298"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1709,221,1789,248"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1721,272,1777,298"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1378,1184,1469,1210"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="979,822,1128,863"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1369,1006,1478,1033"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1007,930,1100,957"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1548,905,1625,932"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1531,981,1643,1008"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1541,804,1632,830"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1373,778,1473,805"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1368,626,1479,653"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1197,1082,1295,1109"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1715,557,1783,584"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1015,728,1092,754"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1545,525,1628,552"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1195,474,1297,501"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1189,829,1303,856"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1387,474,1459,501"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1205,69,1287,96"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1176,424,1316,450"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1187,170,1305,197"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1394,158,1453,185"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1364,82,1483,109"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="595,677,731,704"/>
<area shape="rect" href="palloc_8c.html#a0c66d7fdb0a9c8da247421261b5ca188" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="427,677,547,704"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="779,677,931,704"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="directory_8c_ab2c71a2a1a0ffa3c618792babf4fc8b9_icgraph.png" border="0" usemap="#adirectory_8c_ab2c71a2a1a0ffa3c618792babf4fc8b9_icgraph" alt=""/></div>
<map name="adirectory_8c_ab2c71a2a1a0ffa3c618792babf4fc8b9_icgraph" id="adirectory_8c_ab2c71a2a1a0ffa3c618792babf4fc8b9_icgraph">
<area shape="rect" title="Searches DIR for a file with the given NAME." alt="" coords="1160,81,1221,108"/>
<area shape="rect" href="directory_8c.html#a86380e077145f4f4ca42e0bd413c79fd" title="Adds a file named NAME to DIR, which must not already contain a file by that name." alt="" coords="1037,24,1103,51"/>
<area shape="rect" href="directory_8c.html#a782062143b05a6f32d11457cfd6259f6" title="Searches DIR for a file with the given NAME and returns true if one exists, false otherwise." alt="" coords="1028,81,1112,108"/>
<area shape="rect" href="directory_8c.html#ae277e450f2d6d436a61adccc0ad5ce23" title="Removes any entry for NAME in DIR." alt="" coords="883,196,973,223"/>
<area shape="rect" href="filesys_8c.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="876,19,980,45"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="724,5,821,32"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,107,227,133"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,107,88,133"/>
<area shape="rect" href="filesys_8c.html#a79d6e6b4a6c2295fba2322000c7c19fd" title="Opens the file with the given NAME." alt="" coords="880,81,976,108"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="567,56,669,83"/>
<area shape="rect" href="fsutil_8c.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="420,107,495,133"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="749,157,796,184"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="567,157,669,184"/>
<area shape="rect" href="process_8c.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="396,157,519,184"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="275,157,348,184"/>
<area shape="rect" href="filesys_8c.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="Deletes the file named NAME." alt="" coords="717,208,828,235"/>
<area shape="rect" href="fsutil_8c.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="275,208,347,235"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 4 2021 19:31:03 for PKUOS - Pintos by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
