<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PKUOS - Pintos: src/lib/ustar.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PKUOS - Pintos
   </div>
   <div id="projectbrief">Pintos source browser for PKU Operating System course</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_c85d3e3c5052e9ad9ce18c6863244a25.html">lib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">ustar.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="ustar_8h_source.html">ustar.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="limits_8h_source.html">limits.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="packed_8h_source.html">packed.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="stdio_8h_source.html">stdio.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="string_8h_source.html">string.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ustar.c:</div>
<div class="dyncontent">
<div class="center"><img src="ustar_8c__incl.png" border="0" usemap="#asrc_2lib_2ustar_8c" alt=""/></div>
<map name="asrc_2lib_2ustar_8c" id="asrc_2lib_2ustar_8c">
<area shape="rect" title=" " alt="" coords="176,5,276,32"/>
<area shape="rect" href="ustar_8h.html" title=" " alt="" coords="12,80,75,107"/>
<area shape="rect" href="limits_8h.html" title=" " alt="" coords="99,80,163,107"/>
<area shape="rect" href="packed_8h.html" title=" " alt="" coords="188,80,264,107"/>
<area shape="rect" href="stdio_8h.html" title=" " alt="" coords="289,80,350,107"/>
<area shape="rect" href="string_8h.html" title=" " alt="" coords="380,80,445,107"/>
<area shape="rect" href="stdbool_8h.html" title=" " alt="" coords="5,155,81,181"/>
<area shape="rect" href="debug_8h.html" title=" " alt="" coords="105,155,176,181"/>
<area shape="rect" href="stdarg_8h.html" title=" " alt="" coords="200,155,271,181"/>
<area shape="rect" href="stddef_8h.html" title=" " alt="" coords="385,155,454,181"/>
<area shape="rect" href="stdint_8h.html" title=" " alt="" coords="295,155,360,181"/>
</map>
</div>
</div>
<p><a href="ustar_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structustar__header.html">ustar_header</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Header for ustar-format tar archive.  <a href="structustar__header.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4abd06a3432f80c53d46dfa9fdf6204a"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ustar_8c.html#a4abd06a3432f80c53d46dfa9fdf6204a">calculate_chksum</a> (const struct <a class="el" href="structustar__header.html">ustar_header</a> *h)</td></tr>
<tr class="memdesc:a4abd06a3432f80c53d46dfa9fdf6204a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the checksum for the given ustar format HEADER.  <a href="ustar_8c.html#a4abd06a3432f80c53d46dfa9fdf6204a">More...</a><br /></td></tr>
<tr class="separator:a4abd06a3432f80c53d46dfa9fdf6204a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af69b8645dfc7ba2cbfcc8bbf8ffae4e5"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ustar_8c.html#af69b8645dfc7ba2cbfcc8bbf8ffae4e5">strip_antisocial_prefixes</a> (const char *<a class="el" href="syn-rw_8h.html#a88c223d2a4e2c9bc84fe0551d812d1c5">file_name</a>)</td></tr>
<tr class="memdesc:af69b8645dfc7ba2cbfcc8bbf8ffae4e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Drop possibly dangerous prefixes from FILE_NAME and return the stripped name.  <a href="ustar_8c.html#af69b8645dfc7ba2cbfcc8bbf8ffae4e5">More...</a><br /></td></tr>
<tr class="separator:af69b8645dfc7ba2cbfcc8bbf8ffae4e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7df8da167076821f714ddcf58700a26b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ustar_8c.html#a7df8da167076821f714ddcf58700a26b">ustar_make_header</a> (const char *<a class="el" href="syn-rw_8h.html#a88c223d2a4e2c9bc84fe0551d812d1c5">file_name</a>, enum <a class="el" href="ustar_8h.html#a568552540e7f88c695b72c238c009837">ustar_type</a> type, int size, char header[<a class="el" href="ustar_8h.html#a8e215ec8db6a2a0ac7eae408b9f1fc94">USTAR_HEADER_SIZE</a>])</td></tr>
<tr class="memdesc:a7df8da167076821f714ddcf58700a26b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Composes HEADER as a USTAR_HEADER_SIZE (512)-byte archive header in ustar format for a SIZE-byte file named FILE_NAME of the given TYPE.  <a href="ustar_8c.html#a7df8da167076821f714ddcf58700a26b">More...</a><br /></td></tr>
<tr class="separator:a7df8da167076821f714ddcf58700a26b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6409757818f6a37c3786e76df25fc925"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ustar_8c.html#a6409757818f6a37c3786e76df25fc925">parse_octal_field</a> (const char *<a class="el" href="random_8c.html#affc3a5a328a5817ad2aa41ef50241b6c">s</a>, <a class="el" href="stddef_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> size, unsigned long int *<a class="el" href="structvalue.html">value</a>)</td></tr>
<tr class="memdesc:a6409757818f6a37c3786e76df25fc925"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a SIZE-byte octal field in S in the format used by ustar format.  <a href="ustar_8c.html#a6409757818f6a37c3786e76df25fc925">More...</a><br /></td></tr>
<tr class="separator:a6409757818f6a37c3786e76df25fc925"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad27c5df357f5aeffc66d0e0438588635"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ustar_8c.html#ad27c5df357f5aeffc66d0e0438588635">is_all_zeros</a> (const char *<a class="el" href="structblock.html">block</a>, <a class="el" href="stddef_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> cnt)</td></tr>
<tr class="memdesc:ad27c5df357f5aeffc66d0e0438588635"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the CNT bytes starting at BLOCK are all zero, false otherwise.  <a href="ustar_8c.html#ad27c5df357f5aeffc66d0e0438588635">More...</a><br /></td></tr>
<tr class="separator:ad27c5df357f5aeffc66d0e0438588635"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4df2e884fd1761fc4165ecafcb6e3de"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ustar_8c.html#ae4df2e884fd1761fc4165ecafcb6e3de">ustar_parse_header</a> (const char header[<a class="el" href="ustar_8h.html#a8e215ec8db6a2a0ac7eae408b9f1fc94">USTAR_HEADER_SIZE</a>], const char **<a class="el" href="syn-rw_8h.html#a88c223d2a4e2c9bc84fe0551d812d1c5">file_name</a>, enum <a class="el" href="ustar_8h.html#a568552540e7f88c695b72c238c009837">ustar_type</a> *type, int *size)</td></tr>
<tr class="memdesc:ae4df2e884fd1761fc4165ecafcb6e3de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses HEADER as a ustar-format archive header for a regular file or directory.  <a href="ustar_8c.html#ae4df2e884fd1761fc4165ecafcb6e3de">More...</a><br /></td></tr>
<tr class="separator:ae4df2e884fd1761fc4165ecafcb6e3de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aed737449014c9ea4b1133ef50fa23bcd"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structustar__header.html">ustar_header</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ustar_8c.html#aed737449014c9ea4b1133ef50fa23bcd">PACKED</a></td></tr>
<tr class="separator:aed737449014c9ea4b1133ef50fa23bcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4abd06a3432f80c53d46dfa9fdf6204a" name="a4abd06a3432f80c53d46dfa9fdf6204a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4abd06a3432f80c53d46dfa9fdf6204a">&#9670;&nbsp;</a></span>calculate_chksum()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int calculate_chksum </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structustar__header.html">ustar_header</a> *&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the checksum for the given ustar format HEADER. </p>

<p class="definition">Definition at line <a class="el" href="ustar_8c_source.html#l00037">37</a> of file <a class="el" href="ustar_8c_source.html">ustar.c</a>.</p>

<p class="reference">References <a class="el" href="ustar_8c_source.html#l00019">ustar_header::chksum</a>, <a class="el" href="stddef_8h_source.html#l00005">offsetof</a>, and <a class="el" href="ustar_8h_source.html#l00021">USTAR_HEADER_SIZE</a>.</p>

<p class="reference">Referenced by <a class="el" href="ustar_8c_source.html#l00083">ustar_make_header()</a>, and <a class="el" href="ustar_8c_source.html#l00182">ustar_parse_header()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ustar_8c_a4abd06a3432f80c53d46dfa9fdf6204a_icgraph.png" border="0" usemap="#austar_8c_a4abd06a3432f80c53d46dfa9fdf6204a_icgraph" alt=""/></div>
<map name="austar_8c_a4abd06a3432f80c53d46dfa9fdf6204a_icgraph" id="austar_8c_a4abd06a3432f80c53d46dfa9fdf6204a_icgraph">
<area shape="rect" title="Returns the checksum for the given ustar format HEADER." alt="" coords="949,119,1077,145"/>
<area shape="rect" href="ustar_8c.html#a7df8da167076821f714ddcf58700a26b" title="Composes HEADER as a USTAR_HEADER_SIZE (512)&#45;byte archive header in ustar format for a SIZE&#45;byte file..." alt="" coords="761,93,901,120"/>
<area shape="rect" href="ustar_8c.html#ae4df2e884fd1761fc4165ecafcb6e3de" title="Parses HEADER as a ustar&#45;format archive header for a regular file or directory." alt="" coords="760,144,901,171"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="611,93,712,120"/>
<area shape="rect" href="tar_8c.html#aeae922065d4290e3c877a5f3a5d7a824" title=" " alt="" coords="612,43,711,69"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="445,132,535,159"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="283,132,366,159"/>
<area shape="rect" href="tar_8c.html#a11d3fc4ba0c33158e98b91bd973212f9" title=" " alt="" coords="428,56,552,83"/>
<area shape="rect" href="tar_8c.html#a95557238bd1ce1ece7c3859eff9888dc" title=" " alt="" coords="417,5,563,32"/>
<area shape="rect" href="tar_8c.html#a736a422fc49cb04f6601997fb136c19c" title=" " alt="" coords="280,56,369,83"/>
<area shape="rect" href="tar_8c.html#a5758c0d6627e2210b6e18ec360169e91" title=" " alt="" coords="104,56,232,83"/>
<area shape="rect" href="tar_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,56,56,83"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="613,144,710,171"/>
</map>
</div>

</div>
</div>
<a id="ad27c5df357f5aeffc66d0e0438588635" name="ad27c5df357f5aeffc66d0e0438588635"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad27c5df357f5aeffc66d0e0438588635">&#9670;&nbsp;</a></span>is_all_zeros()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> is_all_zeros </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>block</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stddef_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>cnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if the CNT bytes starting at BLOCK are all zero, false otherwise. </p>

<p class="definition">Definition at line <a class="el" href="ustar_8c_source.html#l00167">167</a> of file <a class="el" href="ustar_8c_source.html">ustar.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="ustar_8c_source.html#l00182">ustar_parse_header()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ustar_8c_ad27c5df357f5aeffc66d0e0438588635_icgraph.png" border="0" usemap="#austar_8c_ad27c5df357f5aeffc66d0e0438588635_icgraph" alt=""/></div>
<map name="austar_8c_ad27c5df357f5aeffc66d0e0438588635_icgraph" id="austar_8c_ad27c5df357f5aeffc66d0e0438588635_icgraph">
<area shape="rect" title="Returns true if the CNT bytes starting at BLOCK are all zero, false otherwise." alt="" coords="609,5,701,32"/>
<area shape="rect" href="ustar_8c.html#ae4df2e884fd1761fc4165ecafcb6e3de" title="Parses HEADER as a ustar&#45;format archive header for a regular file or directory." alt="" coords="420,5,561,32"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="275,5,372,32"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,5,227,32"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,88,32"/>
</map>
</div>

</div>
</div>
<a id="a6409757818f6a37c3786e76df25fc925" name="a6409757818f6a37c3786e76df25fc925"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6409757818f6a37c3786e76df25fc925">&#9670;&nbsp;</a></span>parse_octal_field()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> parse_octal_field </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stddef_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long int *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parses a SIZE-byte octal field in S in the format used by ustar format. </p>
<p >If successful, stores the field's value in VALUE and returns true; on failure, returns false.</p>
<p >ustar octal fields consist of a sequence of octal digits terminated by a space or a null byte. The ustar specification seems ambiguous as to whether these fields must be padded on the left with '0's, so we accept any field that fits in the available space, regardless of whether it fills the space. </p>

<p class="definition">Definition at line <a class="el" href="ustar_8c_source.html#l00130">130</a> of file <a class="el" href="ustar_8c_source.html">ustar.c</a>.</p>

<p class="reference">References <a class="el" href="random_8c_source.html#l00017">s</a>, <a class="el" href="ustar_8c_source.html#l00016">ustar_header::size</a>, and <a class="el" href="limits_8h_source.html#l00028">ULONG_MAX</a>.</p>

<p class="reference">Referenced by <a class="el" href="ustar_8c_source.html#l00182">ustar_parse_header()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ustar_8c_a6409757818f6a37c3786e76df25fc925_icgraph.png" border="0" usemap="#austar_8c_a6409757818f6a37c3786e76df25fc925_icgraph" alt=""/></div>
<map name="austar_8c_a6409757818f6a37c3786e76df25fc925_icgraph" id="austar_8c_a6409757818f6a37c3786e76df25fc925_icgraph">
<area shape="rect" title="Parses a SIZE&#45;byte octal field in S in the format used by ustar format." alt="" coords="609,5,732,32"/>
<area shape="rect" href="ustar_8c.html#ae4df2e884fd1761fc4165ecafcb6e3de" title="Parses HEADER as a ustar&#45;format archive header for a regular file or directory." alt="" coords="420,5,561,32"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="275,5,372,32"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,5,227,32"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,88,32"/>
</map>
</div>

</div>
</div>
<a id="af69b8645dfc7ba2cbfcc8bbf8ffae4e5" name="af69b8645dfc7ba2cbfcc8bbf8ffae4e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af69b8645dfc7ba2cbfcc8bbf8ffae4e5">&#9670;&nbsp;</a></span>strip_antisocial_prefixes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char * strip_antisocial_prefixes </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Drop possibly dangerous prefixes from FILE_NAME and return the stripped name. </p>
<p >An archive with file names that start with "/" or "../" could cause a naive tar extractor to write to arbitrary parts of the file system, not just the destination directory. We don't want to create such archives or be such a naive extractor.</p>
<p >The return value can be a suffix of FILE_NAME or a string literal. </p>

<p class="definition">Definition at line <a class="el" href="ustar_8c_source.html#l00066">66</a> of file <a class="el" href="ustar_8c_source.html">ustar.c</a>.</p>

<p class="reference">References <a class="el" href="syn-read_8h_source.html#l00005">file_name</a>, <a class="el" href="string_8c_source.html#l00053">memcmp()</a>, <a class="el" href="string_8c_source.html#l00113">strchr()</a>, and <a class="el" href="string_8c_source.html#l00073">strcmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ustar_8c_source.html#l00083">ustar_make_header()</a>, and <a class="el" href="ustar_8c_source.html#l00182">ustar_parse_header()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ustar_8c_af69b8645dfc7ba2cbfcc8bbf8ffae4e5_cgraph.png" border="0" usemap="#austar_8c_af69b8645dfc7ba2cbfcc8bbf8ffae4e5_cgraph" alt=""/></div>
<map name="austar_8c_af69b8645dfc7ba2cbfcc8bbf8ffae4e5_cgraph" id="austar_8c_af69b8645dfc7ba2cbfcc8bbf8ffae4e5_cgraph">
<area shape="rect" title="Drop possibly dangerous prefixes from FILE_NAME and return the stripped name." alt="" coords="5,56,169,83"/>
<area shape="rect" href="string_8c.html#a19c6163b9e87b586f4ddb7773faf9172" title="Find the first differing byte in the two blocks of SIZE bytes at A and B." alt="" coords="217,5,295,32"/>
<area shape="rect" href="string_8c.html#a0b5ce5a348a2190d38480f0478405a6c" title="Finds and returns the first occurrence of C in STRING, or a null pointer if C does not appear in STRI..." alt="" coords="228,56,284,83"/>
<area shape="rect" href="string_8c.html#ae99b71772ffcf066739c8568013425e3" title="Finds the first differing characters in strings A and B." alt="" coords="225,107,287,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ustar_8c_af69b8645dfc7ba2cbfcc8bbf8ffae4e5_icgraph.png" border="0" usemap="#austar_8c_af69b8645dfc7ba2cbfcc8bbf8ffae4e5_icgraph" alt=""/></div>
<map name="austar_8c_af69b8645dfc7ba2cbfcc8bbf8ffae4e5_icgraph" id="austar_8c_af69b8645dfc7ba2cbfcc8bbf8ffae4e5_icgraph">
<area shape="rect" title="Drop possibly dangerous prefixes from FILE_NAME and return the stripped name." alt="" coords="949,119,1113,145"/>
<area shape="rect" href="ustar_8c.html#a7df8da167076821f714ddcf58700a26b" title="Composes HEADER as a USTAR_HEADER_SIZE (512)&#45;byte archive header in ustar format for a SIZE&#45;byte file..." alt="" coords="761,93,901,120"/>
<area shape="rect" href="ustar_8c.html#ae4df2e884fd1761fc4165ecafcb6e3de" title="Parses HEADER as a ustar&#45;format archive header for a regular file or directory." alt="" coords="760,144,901,171"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="611,93,712,120"/>
<area shape="rect" href="tar_8c.html#aeae922065d4290e3c877a5f3a5d7a824" title=" " alt="" coords="612,43,711,69"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="445,132,535,159"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="283,132,366,159"/>
<area shape="rect" href="tar_8c.html#a11d3fc4ba0c33158e98b91bd973212f9" title=" " alt="" coords="428,56,552,83"/>
<area shape="rect" href="tar_8c.html#a95557238bd1ce1ece7c3859eff9888dc" title=" " alt="" coords="417,5,563,32"/>
<area shape="rect" href="tar_8c.html#a736a422fc49cb04f6601997fb136c19c" title=" " alt="" coords="280,56,369,83"/>
<area shape="rect" href="tar_8c.html#a5758c0d6627e2210b6e18ec360169e91" title=" " alt="" coords="104,56,232,83"/>
<area shape="rect" href="tar_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,56,56,83"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="613,144,710,171"/>
</map>
</div>

</div>
</div>
<a id="a7df8da167076821f714ddcf58700a26b" name="a7df8da167076821f714ddcf58700a26b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7df8da167076821f714ddcf58700a26b">&#9670;&nbsp;</a></span>ustar_make_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> ustar_make_header </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="ustar_8h.html#a568552540e7f88c695b72c238c009837">ustar_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>header</em>[USTAR_HEADER_SIZE]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Composes HEADER as a USTAR_HEADER_SIZE (512)-byte archive header in ustar format for a SIZE-byte file named FILE_NAME of the given TYPE. </p>
<p >The caller is responsible for writing the header to a file or device.</p>
<p >If successful, returns true. On failure (due to an excessively long file name), returns false. </p>

<p class="definition">Definition at line <a class="el" href="ustar_8c_source.html#l00083">83</a> of file <a class="el" href="ustar_8c_source.html">ustar.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="ustar_8c_source.html#l00037">calculate_chksum()</a>, <a class="el" href="ustar_8c_source.html#l00019">ustar_header::chksum</a>, <a class="el" href="syn-read_8h_source.html#l00005">file_name</a>, <a class="el" href="ustar_8c_source.html#l00015">ustar_header::gid</a>, <a class="el" href="ustar_8c_source.html#l00026">ustar_header::gname</a>, <a class="el" href="ustar_8c_source.html#l00023">ustar_header::magic</a>, <a class="el" href="string_8c_source.html#l00279">memset()</a>, <a class="el" href="ustar_8c_source.html#l00013">ustar_header::mode</a>, <a class="el" href="ustar_8c_source.html#l00017">ustar_header::mtime</a>, <a class="el" href="ustar_8c_source.html#l00012">ustar_header::name</a>, <a class="el" href="lib_2stdio_8c_source.html#l00079">printf()</a>, <a class="el" href="ustar_8c_source.html#l00016">ustar_header::size</a>, <a class="el" href="lib_2stdio_8c_source.html#l00062">snprintf()</a>, <a class="el" href="ustar_8c_source.html#l00066">strip_antisocial_prefixes()</a>, <a class="el" href="string_8c_source.html#l00326">strlcpy()</a>, <a class="el" href="string_8c_source.html#l00293">strlen()</a>, <a class="el" href="ustar_8c_source.html#l00020">ustar_header::typeflag</a>, <a class="el" href="ustar_8c_source.html#l00014">ustar_header::uid</a>, <a class="el" href="ustar_8c_source.html#l00025">ustar_header::uname</a>, <a class="el" href="ustar_8h_source.html#l00016">USTAR_DIRECTORY</a>, <a class="el" href="ustar_8h_source.html#l00021">USTAR_HEADER_SIZE</a>, <a class="el" href="ustar_8h_source.html#l00015">USTAR_REGULAR</a>, and <a class="el" href="ustar_8c_source.html#l00024">ustar_header::version</a>.</p>

<p class="reference">Referenced by <a class="el" href="fsutil_8c_source.html#l00167">fsutil_append()</a>, and <a class="el" href="tar_8c_source.html#l00186">write_header()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ustar_8c_a7df8da167076821f714ddcf58700a26b_cgraph.png" border="0" usemap="#austar_8c_a7df8da167076821f714ddcf58700a26b_cgraph" alt=""/></div>
<map name="austar_8c_a7df8da167076821f714ddcf58700a26b_cgraph" id="austar_8c_a7df8da167076821f714ddcf58700a26b_cgraph">
<area shape="rect" title="Composes HEADER as a USTAR_HEADER_SIZE (512)&#45;byte archive header in ustar format for a SIZE&#45;byte file..." alt="" coords="5,639,145,665"/>
<area shape="rect" href="ustar_8c.html#a4abd06a3432f80c53d46dfa9fdf6204a" title="Returns the checksum for the given ustar format HEADER." alt="" coords="211,487,339,513"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="241,537,310,564"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="249,639,301,665"/>
<area shape="rect" href="lib_2stdio_8c.html#a913035b9a30cd1b34c5e587dfbf26f92" title="Like printf(), except that output is stored into BUFFER, which must have space for BUF_SIZE character..." alt="" coords="243,588,308,615"/>
<area shape="rect" href="ustar_8c.html#af69b8645dfc7ba2cbfcc8bbf8ffae4e5" title="Drop possibly dangerous prefixes from FILE_NAME and return the stripped name." alt="" coords="193,689,357,716"/>
<area shape="rect" href="string_8c.html#a4637af6f79bac4043e1064f0837d0ddc" title="Copies string SRC to DST." alt="" coords="245,791,305,817"/>
<area shape="rect" href="string_8c.html#a2869404e70f06f4477271f26ce8c4920" title="Returns the length of STRING." alt="" coords="417,841,471,868"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="415,588,473,615"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="553,132,626,159"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="1015,892,1133,919"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="1015,841,1133,868"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="538,588,641,615"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="729,56,796,83"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="709,107,817,133"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="713,157,813,184"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="699,208,826,235"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="731,5,794,32"/>
<area shape="rect" href="lib_2stdio_8c.html#a9248d4643c7dd4c03f632fb1ce2b9d5f" title="Writes CH to OUTPUT with auxiliary data AUX, CNT times." alt="" coords="877,107,967,133"/>
<area shape="rect" href="ctype_8h.html#ad7fd5ce3790b81c86de5502ff6853f3a" title=" " alt="" coords="894,157,950,184"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1782,943,1873,969"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1225,892,1322,919"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1413,1070,1563,1111"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1773,1120,1882,1147"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1441,867,1535,893"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1948,829,2025,856"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1931,1120,2043,1147"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1941,385,2032,412"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1777,360,1877,387"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1772,703,1883,729"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1618,1069,1717,1096"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="1225,765,1322,792"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1449,487,1527,513"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1626,461,1709,488"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1616,512,1719,539"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1611,613,1724,640"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="696,588,829,615"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="1181,1070,1365,1111"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="879,588,965,615"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="1629,208,1705,235"/>
<area shape="rect" href="serial_8c.html#aa1fb82a5be4690023966ea841c88a624" title="Initializes the serial port device for polling mode." alt="" coords="1041,563,1107,589"/>
<area shape="rect" href="intq_8c.html#aff4db6a96c4a1fb6898f26451a1049c2" title="Returns true if Q is full, false otherwise." alt="" coords="1239,613,1307,640"/>
<area shape="rect" href="intq_8c.html#a45ba970f3357ff262d7fafecc50735c6" title="Removes a byte from Q and returns it." alt="" coords="1036,779,1112,805"/>
<area shape="rect" href="intq_8c.html#a6a440110d5417c12cedf1c2e86f445f8" title="Adds BYTE to the end of Q." alt="" coords="1036,664,1112,691"/>
<area shape="rect" href="lib_2stdio_8c.html#a1286c6b071007938f54e9b859109f89d" title="Like vprintf(), except that output is stored into BUFFER, which must have space for BUF_SIZE characte..." alt="" coords="408,132,480,159"/>
<area shape="rect" href="lib_2stdio_8c.html#acdff2b19969329b7777564346ac98c5d" title="Helper function for vsnprintf()." alt="" coords="531,81,648,108"/>
<area shape="rect" href="string_8c.html#a19c6163b9e87b586f4ddb7773faf9172" title="Find the first differing byte in the two blocks of SIZE bytes at A and B." alt="" coords="405,740,483,767"/>
<area shape="rect" href="string_8c.html#a0b5ce5a348a2190d38480f0478405a6c" title="Finds and returns the first occurrence of C in STRING, or a null pointer if C does not appear in STRI..." alt="" coords="416,639,472,665"/>
<area shape="rect" href="string_8c.html#ae99b71772ffcf066739c8568013425e3" title="Finds the first differing characters in strings A and B." alt="" coords="413,689,475,716"/>
<area shape="rect" href="string_8c.html#a75301dc67774ade574b3b3205ee4f39e" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="408,791,480,817"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ustar_8c_a7df8da167076821f714ddcf58700a26b_icgraph.png" border="0" usemap="#austar_8c_a7df8da167076821f714ddcf58700a26b_icgraph" alt=""/></div>
<map name="austar_8c_a7df8da167076821f714ddcf58700a26b_icgraph" id="austar_8c_a7df8da167076821f714ddcf58700a26b_icgraph">
<area shape="rect" title="Composes HEADER as a USTAR_HEADER_SIZE (512)&#45;byte archive header in ustar format for a SIZE&#45;byte file..." alt="" coords="760,31,900,57"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="611,5,712,32"/>
<area shape="rect" href="tar_8c.html#aeae922065d4290e3c877a5f3a5d7a824" title=" " alt="" coords="612,56,711,83"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="445,5,535,32"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="283,5,366,32"/>
<area shape="rect" href="tar_8c.html#a11d3fc4ba0c33158e98b91bd973212f9" title=" " alt="" coords="428,56,552,83"/>
<area shape="rect" href="tar_8c.html#a95557238bd1ce1ece7c3859eff9888dc" title=" " alt="" coords="417,107,563,133"/>
<area shape="rect" href="tar_8c.html#a736a422fc49cb04f6601997fb136c19c" title=" " alt="" coords="280,56,369,83"/>
<area shape="rect" href="tar_8c.html#a5758c0d6627e2210b6e18ec360169e91" title=" " alt="" coords="104,56,232,83"/>
<area shape="rect" href="tar_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,56,56,83"/>
</map>
</div>

</div>
</div>
<a id="ae4df2e884fd1761fc4165ecafcb6e3de" name="ae4df2e884fd1761fc4165ecafcb6e3de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4df2e884fd1761fc4165ecafcb6e3de">&#9670;&nbsp;</a></span>ustar_parse_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * ustar_parse_header </td>
          <td>(</td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>header</em>[USTAR_HEADER_SIZE], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="ustar_8h.html#a568552540e7f88c695b72c238c009837">ustar_type</a> *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses HEADER as a ustar-format archive header for a regular file or directory. </p>
<p ><a class="el" href="ustar_8h.html">lib/ustar.h</a></p>
<p >If successful, stores the archived file's name in *FILE_NAME (as a pointer into HEADER or a string literal), its type in *TYPE, and its size in bytes in *SIZE, and returns a null pointer. On failure, returns a human-readable error message. </p>

<p class="definition">Definition at line <a class="el" href="ustar_8c_source.html#l00182">182</a> of file <a class="el" href="ustar_8c_source.html">ustar.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="ustar_8c_source.html#l00037">calculate_chksum()</a>, <a class="el" href="ustar_8c_source.html#l00019">ustar_header::chksum</a>, <a class="el" href="syn-read_8h_source.html#l00005">file_name</a>, <a class="el" href="limits_8h_source.html#l00022">INT_MAX</a>, <a class="el" href="ustar_8c_source.html#l00167">is_all_zeros()</a>, <a class="el" href="ustar_8c_source.html#l00023">ustar_header::magic</a>, <a class="el" href="string_8c_source.html#l00053">memcmp()</a>, <a class="el" href="ustar_8c_source.html#l00012">ustar_header::name</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, <a class="el" href="ustar_8c_source.html#l00130">parse_octal_field()</a>, <a class="el" href="ustar_8c_source.html#l00029">ustar_header::prefix</a>, <a class="el" href="ustar_8c_source.html#l00016">ustar_header::size</a>, <a class="el" href="ustar_8c_source.html#l00066">strip_antisocial_prefixes()</a>, <a class="el" href="ustar_8c_source.html#l00020">ustar_header::typeflag</a>, <a class="el" href="ustar_8h_source.html#l00016">USTAR_DIRECTORY</a>, <a class="el" href="ustar_8h_source.html#l00017">USTAR_EOF</a>, <a class="el" href="ustar_8h_source.html#l00021">USTAR_HEADER_SIZE</a>, <a class="el" href="ustar_8h_source.html#l00015">USTAR_REGULAR</a>, and <a class="el" href="ustar_8c_source.html#l00024">ustar_header::version</a>.</p>

<p class="reference">Referenced by <a class="el" href="fsutil_8c_source.html#l00073">fsutil_extract()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ustar_8c_ae4df2e884fd1761fc4165ecafcb6e3de_cgraph.png" border="0" usemap="#austar_8c_ae4df2e884fd1761fc4165ecafcb6e3de_cgraph" alt=""/></div>
<map name="austar_8c_ae4df2e884fd1761fc4165ecafcb6e3de_cgraph" id="austar_8c_ae4df2e884fd1761fc4165ecafcb6e3de_cgraph">
<area shape="rect" title="Parses HEADER as a ustar&#45;format archive header for a regular file or directory." alt="" coords="5,107,147,133"/>
<area shape="rect" href="ustar_8c.html#a4abd06a3432f80c53d46dfa9fdf6204a" title="Returns the checksum for the given ustar format HEADER." alt="" coords="213,5,341,32"/>
<area shape="rect" href="ustar_8c.html#ad27c5df357f5aeffc66d0e0438588635" title="Returns true if the CNT bytes starting at BLOCK are all zero, false otherwise." alt="" coords="231,56,323,83"/>
<area shape="rect" href="string_8c.html#a19c6163b9e87b586f4ddb7773faf9172" title="Find the first differing byte in the two blocks of SIZE bytes at A and B." alt="" coords="407,120,484,147"/>
<area shape="rect" href="ustar_8c.html#a6409757818f6a37c3786e76df25fc925" title="Parses a SIZE&#45;byte octal field in S in the format used by ustar format." alt="" coords="215,157,338,184"/>
<area shape="rect" href="ustar_8c.html#af69b8645dfc7ba2cbfcc8bbf8ffae4e5" title="Drop possibly dangerous prefixes from FILE_NAME and return the stripped name." alt="" coords="195,208,359,235"/>
<area shape="rect" href="string_8c.html#a0b5ce5a348a2190d38480f0478405a6c" title="Finds and returns the first occurrence of C in STRING, or a null pointer if C does not appear in STRI..." alt="" coords="417,183,473,209"/>
<area shape="rect" href="string_8c.html#ae99b71772ffcf066739c8568013425e3" title="Finds the first differing characters in strings A and B." alt="" coords="414,233,477,260"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="ustar_8c_ae4df2e884fd1761fc4165ecafcb6e3de_icgraph.png" border="0" usemap="#austar_8c_ae4df2e884fd1761fc4165ecafcb6e3de_icgraph" alt=""/></div>
<map name="austar_8c_ae4df2e884fd1761fc4165ecafcb6e3de_icgraph" id="austar_8c_ae4df2e884fd1761fc4165ecafcb6e3de_icgraph">
<area shape="rect" title="Parses HEADER as a ustar&#45;format archive header for a regular file or directory." alt="" coords="420,5,561,32"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="275,5,372,32"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,5,227,32"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,88,32"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aed737449014c9ea4b1133ef50fa23bcd" name="aed737449014c9ea4b1133ef50fa23bcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed737449014c9ea4b1133ef50fa23bcd">&#9670;&nbsp;</a></span>PACKED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structustar__header.html">ustar_header</a> PACKED</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="partition_8c_source.html#l00050">read_partition_table()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 4 2021 19:31:04 for PKUOS - Pintos by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
