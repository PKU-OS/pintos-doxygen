<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PKUOS - Pintos: src/threads/interrupt.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PKUOS - Pintos
   </div>
   <div id="projectbrief">Pintos source browser for PKU Operating System course</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_3454632d1a606e9a309cdaae2c26d5ae.html">threads</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">interrupt.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="interrupt_8h_source.html">threads/interrupt.h</a>&quot;</code><br />
<code>#include &lt;<a class="el" href="debug_8h_source.html">debug.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="inttypes_8h_source.html">inttypes.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="stdint_8h_source.html">stdint.h</a>&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &quot;<a class="el" href="flags_8h_source.html">threads/flags.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="intr-stubs_8h_source.html">threads/intr-stubs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="io_8h_source.html">threads/io.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="thread_8h_source.html">threads/thread.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="vaddr_8h_source.html">threads/vaddr.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="timer_8h_source.html">devices/timer.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for interrupt.c:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c__incl.png" border="0" usemap="#asrc_2threads_2interrupt_8c" alt=""/></div>
<map name="asrc_2threads_2interrupt_8c" id="asrc_2threads_2interrupt_8c">
<area shape="rect" title=" " alt="" coords="710,5,861,32"/>
<area shape="rect" href="interrupt_8h.html" title=" " alt="" coords="5,155,136,181"/>
<area shape="rect" href="stdint_8h.html" title=" " alt="" coords="594,229,659,256"/>
<area shape="rect" href="debug_8h.html" title=" " alt="" coords="507,155,578,181"/>
<area shape="rect" href="inttypes_8h.html" title=" " alt="" coords="405,155,483,181"/>
<area shape="rect" title=" " alt="" coords="968,80,1029,107"/>
<area shape="rect" href="flags_8h.html" title=" " alt="" coords="1053,80,1163,107"/>
<area shape="rect" href="intr-stubs_8h.html" title=" " alt="" coords="1187,80,1323,107"/>
<area shape="rect" href="io_8h.html" title=" " alt="" coords="919,155,1011,181"/>
<area shape="rect" href="thread_8h.html" title=" " alt="" coords="585,80,703,107"/>
<area shape="rect" href="vaddr_8h.html" title=" " alt="" coords="264,80,379,107"/>
<area shape="rect" href="timer_8h.html" title=" " alt="" coords="729,80,841,107"/>
<area shape="rect" href="stdbool_8h.html" title=" " alt="" coords="135,229,211,256"/>
<area shape="rect" href="stddef_8h.html" title=" " alt="" coords="807,229,876,256"/>
<area shape="rect" href="list_8h.html" title=" " alt="" coords="602,155,651,181"/>
<area shape="rect" href="loader_8h.html" title=" " alt="" coords="262,155,381,181"/>
<area shape="rect" href="round_8h.html" title=" " alt="" coords="777,155,844,181"/>
</map>
</div>
</div>
<p><a href="interrupt_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a54d37320b3c66c210f1e076fe2bd684a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a54d37320b3c66c210f1e076fe2bd684a">PIC0_CTRL</a>&#160;&#160;&#160;0x20</td></tr>
<tr class="memdesc:a54d37320b3c66c210f1e076fe2bd684a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Programmable Interrupt Controller (PIC) registers.  <a href="interrupt_8c.html#a54d37320b3c66c210f1e076fe2bd684a">More...</a><br /></td></tr>
<tr class="separator:a54d37320b3c66c210f1e076fe2bd684a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b68fd97e5116d691d63708a21223032"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a5b68fd97e5116d691d63708a21223032">PIC0_DATA</a>&#160;&#160;&#160;0x21</td></tr>
<tr class="memdesc:a5b68fd97e5116d691d63708a21223032"><td class="mdescLeft">&#160;</td><td class="mdescRight">Master PIC data register address.  <a href="interrupt_8c.html#a5b68fd97e5116d691d63708a21223032">More...</a><br /></td></tr>
<tr class="separator:a5b68fd97e5116d691d63708a21223032"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5aafdb9618f2d83403037eff72d44c93"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a5aafdb9618f2d83403037eff72d44c93">PIC1_CTRL</a>&#160;&#160;&#160;0xa0</td></tr>
<tr class="memdesc:a5aafdb9618f2d83403037eff72d44c93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Slave PIC control register address.  <a href="interrupt_8c.html#a5aafdb9618f2d83403037eff72d44c93">More...</a><br /></td></tr>
<tr class="separator:a5aafdb9618f2d83403037eff72d44c93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af27e966ec947ca1172f30ae301c5f24b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#af27e966ec947ca1172f30ae301c5f24b">PIC1_DATA</a>&#160;&#160;&#160;0xa1</td></tr>
<tr class="memdesc:af27e966ec947ca1172f30ae301c5f24b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Slave PIC data register address.  <a href="interrupt_8c.html#af27e966ec947ca1172f30ae301c5f24b">More...</a><br /></td></tr>
<tr class="separator:af27e966ec947ca1172f30ae301c5f24b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7f76dfefd450f2e627e79ed5293a4a7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#af7f76dfefd450f2e627e79ed5293a4a7">INTR_CNT</a>&#160;&#160;&#160;256</td></tr>
<tr class="memdesc:af7f76dfefd450f2e627e79ed5293a4a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of x86 interrupts.  <a href="interrupt_8c.html#af7f76dfefd450f2e627e79ed5293a4a7">More...</a><br /></td></tr>
<tr class="separator:af7f76dfefd450f2e627e79ed5293a4a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a69ce22b1b1b67b59d13ee72c00570274"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a69ce22b1b1b67b59d13ee72c00570274">pic_init</a> (void)</td></tr>
<tr class="memdesc:a69ce22b1b1b67b59d13ee72c00570274"><td class="mdescLeft">&#160;</td><td class="mdescRight">Programmable Interrupt Controller helpers.  <a href="interrupt_8c.html#a69ce22b1b1b67b59d13ee72c00570274">More...</a><br /></td></tr>
<tr class="separator:a69ce22b1b1b67b59d13ee72c00570274"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63cfe8a21a3d7aca438e577f8ed5c50f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a63cfe8a21a3d7aca438e577f8ed5c50f">pic_end_of_interrupt</a> (int irq)</td></tr>
<tr class="memdesc:a63cfe8a21a3d7aca438e577f8ed5c50f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an end-of-interrupt signal to the PIC for the given IRQ.  <a href="interrupt_8c.html#a63cfe8a21a3d7aca438e577f8ed5c50f">More...</a><br /></td></tr>
<tr class="separator:a63cfe8a21a3d7aca438e577f8ed5c50f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75ac431d18ce7aff146bef22379c1dcd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a75ac431d18ce7aff146bef22379c1dcd">make_intr_gate</a> (void(*)(void), int dpl)</td></tr>
<tr class="memdesc:a75ac431d18ce7aff146bef22379c1dcd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt Descriptor Table helpers.  <a href="interrupt_8c.html#a75ac431d18ce7aff146bef22379c1dcd">More...</a><br /></td></tr>
<tr class="separator:a75ac431d18ce7aff146bef22379c1dcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79e99b0236c49a7a12d52a2ec74fefa5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a79e99b0236c49a7a12d52a2ec74fefa5">make_trap_gate</a> (void(*function)(void), int dpl)</td></tr>
<tr class="memdesc:a79e99b0236c49a7a12d52a2ec74fefa5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a trap gate that invokes FUNCTION with the given DPL.  <a href="interrupt_8c.html#a79e99b0236c49a7a12d52a2ec74fefa5">More...</a><br /></td></tr>
<tr class="separator:a79e99b0236c49a7a12d52a2ec74fefa5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb694fad923f4942cd9de0bd38172b4e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#afb694fad923f4942cd9de0bd38172b4e">make_idtr_operand</a> (<a class="el" href="stdint_8h.html#adf4d876453337156dde61095e1f20223">uint16_t</a> limit, void *base)</td></tr>
<tr class="memdesc:afb694fad923f4942cd9de0bd38172b4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a descriptor that yields the given LIMIT and BASE when used as an operand for the LIDT instruction.  <a href="interrupt_8c.html#afb694fad923f4942cd9de0bd38172b4e">More...</a><br /></td></tr>
<tr class="separator:afb694fad923f4942cd9de0bd38172b4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2ddb6c69915597ee636e732afa5795a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#ad2ddb6c69915597ee636e732afa5795a">intr_handler</a> (struct <a class="el" href="structintr__frame.html">intr_frame</a> *args)</td></tr>
<tr class="memdesc:ad2ddb6c69915597ee636e732afa5795a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt handlers.  <a href="interrupt_8c.html#ad2ddb6c69915597ee636e732afa5795a">More...</a><br /></td></tr>
<tr class="separator:ad2ddb6c69915597ee636e732afa5795a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2511f618361b04d286de89201486d01a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a2511f618361b04d286de89201486d01a">unexpected_interrupt</a> (const struct <a class="el" href="structintr__frame.html">intr_frame</a> *f)</td></tr>
<tr class="memdesc:a2511f618361b04d286de89201486d01a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles an unexpected interrupt with interrupt frame F.  <a href="interrupt_8c.html#a2511f618361b04d286de89201486d01a">More...</a><br /></td></tr>
<tr class="separator:a2511f618361b04d286de89201486d01a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac657e1386ac8c557ddafbcc732427fbf"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="interrupt_8h.html#ac5ca1b946321e42624b327f0dc872b60">intr_level</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf">intr_get_level</a> (void)</td></tr>
<tr class="memdesc:ac657e1386ac8c557ddafbcc732427fbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current interrupt status.  <a href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf">More...</a><br /></td></tr>
<tr class="separator:ac657e1386ac8c557ddafbcc732427fbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3ae93a45d368c3d64fd0b473bd303d0"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="interrupt_8h.html#ac5ca1b946321e42624b327f0dc872b60">intr_level</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0">intr_set_level</a> (enum <a class="el" href="interrupt_8h.html#ac5ca1b946321e42624b327f0dc872b60">intr_level</a> level)</td></tr>
<tr class="memdesc:ae3ae93a45d368c3d64fd0b473bd303d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status.  <a href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0">More...</a><br /></td></tr>
<tr class="separator:ae3ae93a45d368c3d64fd0b473bd303d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a896b58d69d8d5ffa7b738c31b924d1"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="interrupt_8h.html#ac5ca1b946321e42624b327f0dc872b60">intr_level</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1">intr_enable</a> (void)</td></tr>
<tr class="memdesc:a5a896b58d69d8d5ffa7b738c31b924d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables interrupts and returns the previous interrupt status.  <a href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1">More...</a><br /></td></tr>
<tr class="separator:a5a896b58d69d8d5ffa7b738c31b924d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb2fa56d0ab9adc628c697b6190430c3"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="interrupt_8h.html#ac5ca1b946321e42624b327f0dc872b60">intr_level</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3">intr_disable</a> (void)</td></tr>
<tr class="memdesc:abb2fa56d0ab9adc628c697b6190430c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables interrupts and returns the previous interrupt status.  <a href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3">More...</a><br /></td></tr>
<tr class="separator:abb2fa56d0ab9adc628c697b6190430c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3e596a633d94203771c1a2b10211d90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#ab3e596a633d94203771c1a2b10211d90">intr_init</a> (void)</td></tr>
<tr class="memdesc:ab3e596a633d94203771c1a2b10211d90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the interrupt system.  <a href="interrupt_8c.html#ab3e596a633d94203771c1a2b10211d90">More...</a><br /></td></tr>
<tr class="separator:ab3e596a633d94203771c1a2b10211d90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e7d2edfe1ec7f51b54704080de2f4ca"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a7e7d2edfe1ec7f51b54704080de2f4ca">register_handler</a> (<a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> vec_no, int dpl, enum <a class="el" href="interrupt_8h.html#ac5ca1b946321e42624b327f0dc872b60">intr_level</a> level, <a class="el" href="interrupt_8h.html#ac2d4246bbf5f813282d9458d87bf798d">intr_handler_func</a> *handler, const char *<a class="el" href="insult_8c.html#a458312c43d951ea41bca2379541164e6">name</a>)</td></tr>
<tr class="memdesc:a7e7d2edfe1ec7f51b54704080de2f4ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers interrupt VEC_NO to invoke HANDLER with descriptor privilege level DPL.  <a href="interrupt_8c.html#a7e7d2edfe1ec7f51b54704080de2f4ca">More...</a><br /></td></tr>
<tr class="separator:a7e7d2edfe1ec7f51b54704080de2f4ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38cd217e72ddb3f58db591a061c99691"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a38cd217e72ddb3f58db591a061c99691">intr_register_ext</a> (<a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> vec_no, <a class="el" href="interrupt_8h.html#ac2d4246bbf5f813282d9458d87bf798d">intr_handler_func</a> *handler, const char *<a class="el" href="insult_8c.html#a458312c43d951ea41bca2379541164e6">name</a>)</td></tr>
<tr class="memdesc:a38cd217e72ddb3f58db591a061c99691"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers external interrupt VEC_NO to invoke HANDLER, which is named NAME for debugging purposes.  <a href="interrupt_8c.html#a38cd217e72ddb3f58db591a061c99691">More...</a><br /></td></tr>
<tr class="separator:a38cd217e72ddb3f58db591a061c99691"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30707611d4360096acf72b3215bdea62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a30707611d4360096acf72b3215bdea62">intr_register_int</a> (<a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> vec_no, int dpl, enum <a class="el" href="interrupt_8h.html#ac5ca1b946321e42624b327f0dc872b60">intr_level</a> level, <a class="el" href="interrupt_8h.html#ac2d4246bbf5f813282d9458d87bf798d">intr_handler_func</a> *handler, const char *<a class="el" href="insult_8c.html#a458312c43d951ea41bca2379541164e6">name</a>)</td></tr>
<tr class="memdesc:a30707611d4360096acf72b3215bdea62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers internal interrupt VEC_NO to invoke HANDLER, which is named NAME for debugging purposes.  <a href="interrupt_8c.html#a30707611d4360096acf72b3215bdea62">More...</a><br /></td></tr>
<tr class="separator:a30707611d4360096acf72b3215bdea62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab253c940fea3774ac64e8c53b05a57a2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2">intr_context</a> (void)</td></tr>
<tr class="memdesc:ab253c940fea3774ac64e8c53b05a57a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true during processing of an external interrupt and false at all other times.  <a href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2">More...</a><br /></td></tr>
<tr class="separator:ab253c940fea3774ac64e8c53b05a57a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55213985fa8103301b86b15509d78243"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a55213985fa8103301b86b15509d78243">intr_yield_on_return</a> (void)</td></tr>
<tr class="memdesc:a55213985fa8103301b86b15509d78243"><td class="mdescLeft">&#160;</td><td class="mdescRight">During processing of an external interrupt, directs the interrupt handler to yield to a new process just before returning from the interrupt.  <a href="interrupt_8c.html#a55213985fa8103301b86b15509d78243">More...</a><br /></td></tr>
<tr class="separator:a55213985fa8103301b86b15509d78243"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05aa182a64c4dc89f63a20b96d4628dc"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a05aa182a64c4dc89f63a20b96d4628dc">make_gate</a> (void(*function)(void), int dpl, int type)</td></tr>
<tr class="memdesc:a05aa182a64c4dc89f63a20b96d4628dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an gate that invokes FUNCTION.  <a href="interrupt_8c.html#a05aa182a64c4dc89f63a20b96d4628dc">More...</a><br /></td></tr>
<tr class="separator:a05aa182a64c4dc89f63a20b96d4628dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad193c7a44c7bea286a77a590b7fa194"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#aad193c7a44c7bea286a77a590b7fa194">intr_dump_frame</a> (const struct <a class="el" href="structintr__frame.html">intr_frame</a> *f)</td></tr>
<tr class="memdesc:aad193c7a44c7bea286a77a590b7fa194"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dumps interrupt frame F to the console, for debugging.  <a href="interrupt_8c.html#aad193c7a44c7bea286a77a590b7fa194">More...</a><br /></td></tr>
<tr class="separator:aad193c7a44c7bea286a77a590b7fa194"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a681a252ccfdad4ce2e623e2635fe4748"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a681a252ccfdad4ce2e623e2635fe4748">intr_name</a> (<a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> vec)</td></tr>
<tr class="memdesc:a681a252ccfdad4ce2e623e2635fe4748"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the name of interrupt VEC.  <a href="interrupt_8c.html#a681a252ccfdad4ce2e623e2635fe4748">More...</a><br /></td></tr>
<tr class="separator:a681a252ccfdad4ce2e623e2635fe4748"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a07426293e17a012c812c018623db194b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a07426293e17a012c812c018623db194b">idt</a> [<a class="el" href="interrupt_8c.html#af7f76dfefd450f2e627e79ed5293a4a7">INTR_CNT</a>]</td></tr>
<tr class="memdesc:a07426293e17a012c812c018623db194b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Interrupt Descriptor Table (IDT).  <a href="interrupt_8c.html#a07426293e17a012c812c018623db194b">More...</a><br /></td></tr>
<tr class="separator:a07426293e17a012c812c018623db194b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a842bb512b8304a34727a61157b76d77a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="interrupt_8h.html#ac2d4246bbf5f813282d9458d87bf798d">intr_handler_func</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a842bb512b8304a34727a61157b76d77a">intr_handlers</a> [<a class="el" href="interrupt_8c.html#af7f76dfefd450f2e627e79ed5293a4a7">INTR_CNT</a>]</td></tr>
<tr class="memdesc:a842bb512b8304a34727a61157b76d77a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt handler functions for each interrupt.  <a href="interrupt_8c.html#a842bb512b8304a34727a61157b76d77a">More...</a><br /></td></tr>
<tr class="separator:a842bb512b8304a34727a61157b76d77a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa22cb5ab342a7801cc353a6138e8ecf6"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#aa22cb5ab342a7801cc353a6138e8ecf6">intr_names</a> [<a class="el" href="interrupt_8c.html#af7f76dfefd450f2e627e79ed5293a4a7">INTR_CNT</a>]</td></tr>
<tr class="memdesc:aa22cb5ab342a7801cc353a6138e8ecf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Names for each interrupt, for debugging purposes.  <a href="interrupt_8c.html#aa22cb5ab342a7801cc353a6138e8ecf6">More...</a><br /></td></tr>
<tr class="separator:aa22cb5ab342a7801cc353a6138e8ecf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49a36e04fc94fdb89ca5b0df20e20c42"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#a49a36e04fc94fdb89ca5b0df20e20c42">unexpected_cnt</a> [<a class="el" href="interrupt_8c.html#af7f76dfefd450f2e627e79ed5293a4a7">INTR_CNT</a>]</td></tr>
<tr class="memdesc:a49a36e04fc94fdb89ca5b0df20e20c42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of unexpected interrupts for each vector.  <a href="interrupt_8c.html#a49a36e04fc94fdb89ca5b0df20e20c42">More...</a><br /></td></tr>
<tr class="separator:a49a36e04fc94fdb89ca5b0df20e20c42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc7060995afd44754ae1604bc94b50ec"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#acc7060995afd44754ae1604bc94b50ec">in_external_intr</a></td></tr>
<tr class="memdesc:acc7060995afd44754ae1604bc94b50ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">External interrupts are those generated by devices outside the CPU, such as the timer.  <a href="interrupt_8c.html#acc7060995afd44754ae1604bc94b50ec">More...</a><br /></td></tr>
<tr class="separator:acc7060995afd44754ae1604bc94b50ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1d16be73ef9865bacd2c41ebd6f6d0c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interrupt_8c.html#af1d16be73ef9865bacd2c41ebd6f6d0c">yield_on_return</a></td></tr>
<tr class="memdesc:af1d16be73ef9865bacd2c41ebd6f6d0c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should we yield on interrupt return?  <a href="interrupt_8c.html#af1d16be73ef9865bacd2c41ebd6f6d0c">More...</a><br /></td></tr>
<tr class="separator:af1d16be73ef9865bacd2c41ebd6f6d0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="af7f76dfefd450f2e627e79ed5293a4a7" name="af7f76dfefd450f2e627e79ed5293a4a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7f76dfefd450f2e627e79ed5293a4a7">&#9670;&nbsp;</a></span>INTR_CNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INTR_CNT&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of x86 interrupts. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00022">22</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

</div>
</div>
<a id="a54d37320b3c66c210f1e076fe2bd684a" name="a54d37320b3c66c210f1e076fe2bd684a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54d37320b3c66c210f1e076fe2bd684a">&#9670;&nbsp;</a></span>PIC0_CTRL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIC0_CTRL&#160;&#160;&#160;0x20</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Programmable Interrupt Controller (PIC) registers. </p>
<p >A PC has two PICs, called the master and slave PICs, with the slave attached ("cascaded") to the master IRQ line 2. Master PIC control register address. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00016">16</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

</div>
</div>
<a id="a5b68fd97e5116d691d63708a21223032" name="a5b68fd97e5116d691d63708a21223032"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b68fd97e5116d691d63708a21223032">&#9670;&nbsp;</a></span>PIC0_DATA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIC0_DATA&#160;&#160;&#160;0x21</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Master PIC data register address. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00017">17</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

</div>
</div>
<a id="a5aafdb9618f2d83403037eff72d44c93" name="a5aafdb9618f2d83403037eff72d44c93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5aafdb9618f2d83403037eff72d44c93">&#9670;&nbsp;</a></span>PIC1_CTRL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIC1_CTRL&#160;&#160;&#160;0xa0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Slave PIC control register address. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00018">18</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

</div>
</div>
<a id="af27e966ec947ca1172f30ae301c5f24b" name="af27e966ec947ca1172f30ae301c5f24b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af27e966ec947ca1172f30ae301c5f24b">&#9670;&nbsp;</a></span>PIC1_DATA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PIC1_DATA&#160;&#160;&#160;0xa1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Slave PIC data register address. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00019">19</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ab253c940fea3774ac64e8c53b05a57a2" name="ab253c940fea3774ac64e8c53b05a57a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab253c940fea3774ac64e8c53b05a57a2">&#9670;&nbsp;</a></span>intr_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> intr_context </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true during processing of an external interrupt and false at all other times. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00212">212</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="interrupt_8c_source.html#l00047">in_external_intr</a>.</p>

<p class="reference">Referenced by <a class="el" href="kernel_2console_8c_source.html#l00088">acquire_console()</a>, <a class="el" href="synch_8c_source.html#l00312">cond_signal()</a>, <a class="el" href="synch_8c_source.html#l00288">cond_wait()</a>, <a class="el" href="kernel_2console_8c_source.html#l00115">console_locked_by_current_thread()</a>, <a class="el" href="intq_8c_source.html#l00038">intq_getc()</a>, <a class="el" href="intq_8c_source.html#l00061">intq_putc()</a>, <a class="el" href="interrupt_8c_source.html#l00088">intr_enable()</a>, <a class="el" href="interrupt_8c_source.html#l00345">intr_handler()</a>, <a class="el" href="interrupt_8c_source.html#l00222">intr_yield_on_return()</a>, <a class="el" href="synch_8c_source.html#l00193">lock_acquire()</a>, <a class="el" href="kernel_2console_8c_source.html#l00101">release_console()</a>, <a class="el" href="synch_8c_source.html#l00061">sema_down()</a>, <a class="el" href="thread_8c_source.html#l00214">thread_block()</a>, <a class="el" href="thread_8c_source.html#l00281">thread_exit()</a>, <a class="el" href="thread_8c_source.html#l00302">thread_yield()</a>, and <a class="el" href="intq_8c_source.html#l00087">wait()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_ab253c940fea3774ac64e8c53b05a57a2_icgraph.png" border="0" usemap="#ainterrupt_8c_ab253c940fea3774ac64e8c53b05a57a2_icgraph" alt=""/></div>
<map name="ainterrupt_8c_ab253c940fea3774ac64e8c53b05a57a2_icgraph" id="ainterrupt_8c_ab253c940fea3774ac64e8c53b05a57a2_icgraph">
<area shape="rect" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1441,1093,1532,1120"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="127,1056,246,1083"/>
<area shape="rect" href="synch_8c.html#a4534660eba2b75a5e5e34590d743f685" title="If any threads are waiting on COND (protected by LOCK), then this function signals one of them to wak..." alt="" coords="1277,1473,1370,1500"/>
<area shape="rect" href="synch_8c.html#a408896d5b2af213dc2a8da984c696419" title="Atomically releases LOCK and waits for COND to be signaled by some other piece of code." alt="" coords="546,43,629,69"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="856,1423,1040,1465"/>
<area shape="rect" href="intq_8c.html#a45ba970f3357ff262d7fafecc50735c6" title="Removes a byte from Q and returns it." alt="" coords="549,1056,625,1083"/>
<area shape="rect" href="intq_8c.html#a6a440110d5417c12cedf1c2e86f445f8" title="Adds BYTE to the end of Q." alt="" coords="549,1157,625,1184"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1279,1043,1367,1069"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="901,840,995,867"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="711,600,808,627"/>
<area shape="rect" href="thread_8c.html#aaa9229e0f462f60bb9550919fa3d7699" title="Yields the CPU." alt="" coords="901,1169,995,1196"/>
<area shape="rect" href="interrupt_8c.html#ad2ddb6c69915597ee636e732afa5795a" title="Interrupt handlers." alt="" coords="713,1208,805,1235"/>
<area shape="rect" href="interrupt_8c.html#a55213985fa8103301b86b15509d78243" title="During processing of an external interrupt, directs the interrupt handler to yield to a new process j..." alt="" coords="1253,1524,1393,1551"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="127,1157,246,1184"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1274,891,1373,917"/>
<area shape="rect" href="intq_8c.html#ac7faf9c8b94faf0aa76ed2b23659a3e0" title="WAITER must be the address of Q&#39;s not_empty or not_full member." alt="" coords="1124,891,1169,917"/>
<area shape="rect" href="thread_8c.html#a87c2438941819bb3cc31658aa9eb66fe" title="Deschedules the current thread and destroys it." alt="" coords="1279,992,1367,1019"/>
<area shape="rect" href="kernel_2console_8c.html#a6912abfdc7e2b2345da944f82cb8305b" title="Writes the N characters in BUFFER to the console." alt="" coords="9,1107,68,1133"/>
<area shape="rect" href="kernel_2console_8c.html#af4de2514b7778805db3815e8dd6cf09a" title="Writes C to the vga display and serial port." alt="" coords="5,1157,72,1184"/>
<area shape="rect" href="kernel_2console_8c.html#ad41876f99f190c7488e64ef39c50a23f" title="Writes string S to the console, followed by a new&#45;line character." alt="" coords="15,1208,62,1235"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="9,1056,68,1083"/>
<area shape="rect" href="synch_8c.html#abd647748214f5f33ba24336941ffeb11" title="Wakes up all threads, if any, waiting on COND (protected by LOCK)." alt="" coords="1088,1473,1205,1500"/>
<area shape="rect" href="priority-condvar_8c.html#a0a388ce73d55720aac505642bc72ce37" title=" " alt="" coords="301,321,464,348"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="120,1208,253,1235"/>
<area shape="rect" href="input_8c.html#a07e161b7f0ec81e4d4d4990e0b5e6a27" title="Retrieves a key from the input buffer." alt="" coords="341,1107,425,1133"/>
<area shape="rect" href="serial_8c.html#a04858117b8541474fe79c45a044b59cc" title="Flushes anything in the serial buffer out the port in polling mode." alt="" coords="338,1005,427,1032"/>
<area shape="rect" href="serial_8c.html#a2d769aaa2d2ff184e5e70fcf4b9d2354" title="Serial interrupt handler." alt="" coords="131,1107,242,1133"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="339,1208,426,1235"/>
<area shape="rect" href="input_8c.html#ada444892e4e73de28dfbdb5a50e4ed29" title="Adds a key to the input buffer." alt="" coords="341,1157,425,1184"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1097,1093,1197,1120"/>
<area shape="rect" href="thread_8c.html#a07e468d365e1799676192b95b2067f59" title="Starts preemptive thread scheduling by enabling interrupts." alt="" coords="713,955,806,981"/>
<area shape="rect" href="thread_8c.html#ac40007d0837868671dffa80f581b4723" title="Function used as the basis for a kernel thread." alt="" coords="1095,941,1199,968"/>
<area shape="rect" href="exception_8c.html#a22263f7481f54fafb7a06f63ea1675c3" title="Page fault handler." alt="" coords="1105,1043,1189,1069"/>
<area shape="rect" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="551,853,624,880"/>
<area shape="rect" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49" title="Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="549,904,625,931"/>
<area shape="rect" href="priority-donate-sema_8c.html#aeb0f97fa3c6d25534de6a11bf3532aa3" title=" " alt="" coords="536,803,639,829"/>
<area shape="rect" href="priority-donate-multiple_8c.html#a56379b758fb21b5a67de1a87d2a74672" title=" " alt="" coords="534,549,641,576"/>
<area shape="rect" href="priority-donate-one_8c.html#adbcd765439b4d960f0db9ba4a47d421f" title=" " alt="" coords="512,651,663,677"/>
<area shape="rect" href="priority-donate-one_8c.html#aae18eed8351e7789ef848517a96284a5" title=" " alt="" coords="512,701,663,728"/>
<area shape="rect" href="priority-donate-lower_8c.html#ab955dabdbbfc7a7a188317e70b95ef04" title=" " alt="" coords="515,93,659,120"/>
<area shape="rect" href="thread_8c.html#a382e72d5d2fb4cfe2b5034eb62a887c8" title="Returns a tid to use for a new thread." alt="" coords="543,144,632,171"/>
<area shape="rect" href="priority-donate-multiple_8c.html#af257d61c4fea017f52981dbe2a40534b" title=" " alt="" coords="534,195,641,221"/>
<area shape="rect" href="mlfqs-block_8c.html#afae0754a3b814ae247351cc6ee14276c" title="Checks that recent_cpu and priorities are updated for blocked threads." alt="" coords="538,245,637,272"/>
<area shape="rect" href="priority-donate-chain_8c.html#af3ea65daade3a57b9afbfaf87d187dfd" title=" " alt="" coords="521,296,654,323"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="565,347,610,373"/>
<area shape="rect" href="priority-donate-sema_8c.html#a85675782bf8084df44707dfcfd2d7ae8" title=" " alt="" coords="534,397,641,424"/>
<area shape="rect" href="priority-donate-nest_8c.html#acc1e53225c07946f00921d331e5736c5" title=" " alt="" coords="525,448,650,475"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="557,499,617,525"/>
<area shape="rect" href="priority-donate-nest_8c.html#ada3ddea14ea0cb3220f0a00cfa7929dc" title=" " alt="" coords="514,955,661,981"/>
<area shape="rect" href="thread_8c.html#a99b55ae8059d7834cc113334a3fd0c3c" title="Called by the timer interrupt handler at each timer tick." alt="" coords="1103,1524,1190,1551"/>
</map>
</div>

</div>
</div>
<a id="abb2fa56d0ab9adc628c697b6190430c3" name="abb2fa56d0ab9adc628c697b6190430c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb2fa56d0ab9adc628c697b6190430c3">&#9670;&nbsp;</a></span>intr_disable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="interrupt_8h.html#ac5ca1b946321e42624b327f0dc872b60">intr_level</a> intr_disable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disables interrupts and returns the previous interrupt status. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00104">104</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="interrupt_8c_source.html#l00065">intr_get_level()</a>.</p>

<p class="reference">Referenced by <a class="el" href="kernel_2debug_8c_source.html#l00117">debug_backtrace_all()</a>, <a class="el" href="kernel_2debug_8c_source.html#l00019">debug_panic()</a>, <a class="el" href="thread_8c_source.html#l00389">idle()</a>, <a class="el" href="thread_8c_source.html#l00452">init_thread()</a>, <a class="el" href="input_8c_source.html#l00031">input_getc()</a>, <a class="el" href="interrupt_8c_source.html#l00081">intr_set_level()</a>, <a class="el" href="pit_8c_source.html#l00046">pit_configure_channel()</a>, <a class="el" href="synch_8c_source.html#l00061">sema_down()</a>, <a class="el" href="synch_8c_source.html#l00084">sema_try_down()</a>, <a class="el" href="synch_8c_source.html#l00109">sema_up()</a>, <a class="el" href="serial_8c_source.html#l00135">serial_flush()</a>, <a class="el" href="serial_8c_source.html#l00082">serial_init_queue()</a>, <a class="el" href="serial_8c_source.html#l00099">serial_putc()</a>, <a class="el" href="speaker_8c_source.html#l00039">speaker_off()</a>, <a class="el" href="speaker_8c_source.html#l00016">speaker_on()</a>, <a class="el" href="thread_8c_source.html#l00281">thread_exit()</a>, <a class="el" href="thread_8c_source.html#l00232">thread_unblock()</a>, <a class="el" href="thread_8c_source.html#l00302">thread_yield()</a>, <a class="el" href="timer_8c_source.html#l00071">timer_ticks()</a>, and <a class="el" href="vga_8c_source.html#l00052">vga_putc()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_abb2fa56d0ab9adc628c697b6190430c3_cgraph.png" border="0" usemap="#ainterrupt_8c_abb2fa56d0ab9adc628c697b6190430c3_cgraph" alt=""/></div>
<map name="ainterrupt_8c_abb2fa56d0ab9adc628c697b6190430c3_cgraph" id="ainterrupt_8c_abb2fa56d0ab9adc628c697b6190430c3_cgraph">
<area shape="rect" title="Disables interrupts and returns the previous interrupt status." alt="" coords="5,5,96,32"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="144,5,245,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_abb2fa56d0ab9adc628c697b6190430c3_icgraph.png" border="0" usemap="#ainterrupt_8c_abb2fa56d0ab9adc628c697b6190430c3_icgraph" alt=""/></div>
<map name="ainterrupt_8c_abb2fa56d0ab9adc628c697b6190430c3_icgraph" id="ainterrupt_8c_abb2fa56d0ab9adc628c697b6190430c3_icgraph">
<area shape="rect" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1084,943,1175,969"/>
<area shape="rect" href="kernel_2debug_8c.html#a3236587de5c28bedd8e07c003f58374e" title="Prints call stack of all threads." alt="" coords="739,461,885,488"/>
<area shape="rect" href="kernel_2debug_8c.html#a0dba4a46c338129ae12e314e07e9fbe3" title="Halts the OS, printing the source file name, line number, and function name, plus a user&#45;specific mes..." alt="" coords="566,1424,665,1451"/>
<area shape="rect" href="thread_8c.html#a6fbc1c29ff118d92ee1449a1072a00ce" title="Idle thread." alt="" coords="399,5,442,32"/>
<area shape="rect" href="thread_8c.html#a34a9d4a5ab1bf577041f4c3f1b8f6c89" title="Does basic initialization of T as a blocked thread named NAME." alt="" coords="770,765,854,792"/>
<area shape="rect" href="input_8c.html#a07e161b7f0ec81e4d4d4990e0b5e6a27" title="Retrieves a key from the input buffer." alt="" coords="770,715,854,741"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="936,917,1036,944"/>
<area shape="rect" href="pit_8c.html#a7dd39bb359cbd638f9134488ab47db4c" title="Configure the given CHANNEL in the PIT." alt="" coords="736,1171,888,1197"/>
<area shape="rect" href="speaker_8c.html#a7ae6bbf92a40862ee9523cd43e69f925" title="Sets the PC speaker to emit a tone at the given FREQUENCY, in Hz." alt="" coords="569,1233,661,1260"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="205,1183,281,1209"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="569,664,662,691"/>
<area shape="rect" href="synch_8c.html#a1e4e794129baf4a30244058661afa31a" title="Down or &quot;P&quot; operation on a semaphore, but only if the semaphore is not already 0." alt="" coords="754,1069,870,1096"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="577,309,654,336"/>
<area shape="rect" href="serial_8c.html#a04858117b8541474fe79c45a044b59cc" title="Flushes anything in the serial buffer out the port in polling mode." alt="" coords="767,1373,857,1400"/>
<area shape="rect" href="serial_8c.html#a54e99a9877b7ed2a6be751fc43905978" title="Initializes the serial port device for queued interrupt&#45;driven I/O." alt="" coords="751,1019,873,1045"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="769,867,855,893"/>
<area shape="rect" href="speaker_8c.html#a073f7570ba87d9cbf510616817c60b41" title="Turn off the PC speaker, by disconnecting the timer channel&#39;s output from the speaker." alt="" coords="766,1323,858,1349"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="755,563,869,589"/>
<area shape="rect" href="thread_8c.html#aaa9229e0f462f60bb9550919fa3d7699" title="Yields the CPU." alt="" coords="765,1120,859,1147"/>
<area shape="rect" href="timer_8c.html#a2b50be77101b38176d21b52cc425cf3e" title="Returns the number of timer ticks since the OS booted." alt="" coords="769,613,855,640"/>
<area shape="rect" href="thread_8c.html#a87c2438941819bb3cc31658aa9eb66fe" title="Deschedules the current thread and destroys it." alt="" coords="942,1500,1030,1527"/>
<area shape="rect" href="thread_8c.html#a8f7759a71c1c49fc8761ef92aa90a36d" title="Creates a new kernel thread named NAME with the given initial PRIORITY, which executes FUNCTION passi..." alt="" coords="563,867,667,893"/>
<area shape="rect" href="synch_8c.html#ac007e29a5442996a099aa8172f5e046a" title="Self&#45;test for semaphores that makes control &quot;ping&#45;pong&quot; between a pair of threads." alt="" coords="187,639,299,665"/>
<area shape="rect" href="thread_8c.html#a07e468d365e1799676192b95b2067f59" title="Starts preemptive thread scheduling by enabling interrupts." alt="" coords="374,867,467,893"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="201,1044,284,1071"/>
<area shape="rect" href="timer_8c.html#a7b8ab79df77b57475a5494f5f81c3bd9" title="Sets up the timer to interrupt TIMER_FREQ times per second, and registers the corresponding interrupt..." alt="" coords="577,1171,653,1197"/>
<area shape="rect" href="speaker_8c.html#a1326dce269503d1ba9fac4e40cdf453e" title="Briefly beep the PC speaker." alt="" coords="367,1233,474,1260"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="5,1081,139,1108"/>
<area shape="rect" href="synch_8c.html#a408896d5b2af213dc2a8da984c696419" title="Atomically releases LOCK and waits for COND to be signaled by some other piece of code." alt="" coords="201,360,284,387"/>
<area shape="rect" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="206,259,279,285"/>
<area shape="rect" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49" title="Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="205,411,281,437"/>
<area shape="rect" href="ide_8c.html#afcd1cfa04037980c000c94c826517759" title="Sends an IDENTIFY DEVICE command to disk D and reads the response." alt="" coords="353,664,489,691"/>
<area shape="rect" href="priority-donate-sema_8c.html#aeb0f97fa3c6d25534de6a11bf3532aa3" title=" " alt="" coords="191,309,294,336"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="372,360,469,387"/>
<area shape="rect" href="priority-donate-sema_8c.html#a4dc51b1476966c227801513da4bd6b84" title=" " alt="" coords="365,715,476,741"/>
<area shape="rect" href="priority-sema_8c.html#a256435362d935640e9ba8007e76794d0" title=" " alt="" coords="347,816,494,843"/>
<area shape="rect" href="synch_8c.html#a57b7a9021b4a9c32f00065da020e96cd" title="Thread function used by sema_self_test()." alt="" coords="357,512,485,539"/>
<area shape="rect" href="priority-donate-sema_8c.html#a85675782bf8084df44707dfcfd2d7ae8" title=" " alt="" coords="189,208,296,235"/>
<area shape="rect" href="synch_8c.html#a343f11e4ce80e077a18e565b6d9ac180" title="Tries to acquires LOCK and returns true if successful or false on failure." alt="" coords="556,1069,675,1096"/>
<area shape="rect" href="alarm-priority_8c.html#a3a8636bb8f03b8450f18ef9dbd774a0c" title=" " alt="" coords="347,309,495,336"/>
<area shape="rect" href="synch_8c.html#a4534660eba2b75a5e5e34590d743f685" title="If any threads are waiting on COND (protected by LOCK), then this function signals one of them to wak..." alt="" coords="374,107,467,133"/>
<area shape="rect" href="ide_8c.html#a968e89e258918c93a81618744b6c0e35" title="ATA interrupt handler." alt="" coords="359,157,482,184"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="372,259,469,285"/>
<area shape="rect" href="shutdown_8c.html#a4cc4519942eb3292f9ee3702330ebd07" title="Powers down the machine we&#39;re running on, as long as we&#39;re running on Bochs or QEMU." alt="" coords="543,1373,688,1400"/>
<area shape="rect" href="intq_8c.html#a9345e011df7272c05780a74adad48225" title="WAITER must be the address of Q&#39;s not_empty or not_full member, and the associated condition must be ..." alt="" coords="587,563,644,589"/>
<area shape="rect" href="interrupt_8c.html#ad2ddb6c69915597ee636e732afa5795a" title="Interrupt handlers." alt="" coords="569,1120,661,1147"/>
<area shape="rect" href="thread_8c.html#ac40007d0837868671dffa80f581b4723" title="Function used as the basis for a kernel thread." alt="" coords="760,1221,864,1248"/>
<area shape="rect" href="exception_8c.html#a6984b10e1d2a817938f8e70a89d13ff9" title="Handler for an exception (probably) caused by a user process." alt="" coords="793,1627,831,1653"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="761,1525,863,1552"/>
<area shape="rect" href="userprog_2syscall_8c.html#a433a22b69ff6c6b56fe2bd9214c2ecc9" title=" " alt="" coords="755,1576,869,1603"/>
</map>
</div>

</div>
</div>
<a id="aad193c7a44c7bea286a77a590b7fa194" name="aad193c7a44c7bea286a77a590b7fa194"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad193c7a44c7bea286a77a590b7fa194">&#9670;&nbsp;</a></span>intr_dump_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void intr_dump_frame </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structintr__frame.html">intr_frame</a> *&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dumps interrupt frame F to the console, for debugging. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00411">411</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="interrupt_8h_source.html#l00052">intr_frame::cs</a>, <a class="el" href="interrupt_8h_source.html#l00034">intr_frame::ds</a>, <a class="el" href="interrupt_8h_source.html#l00031">intr_frame::eax</a>, <a class="el" href="interrupt_8h_source.html#l00026">intr_frame::ebp</a>, <a class="el" href="interrupt_8h_source.html#l00028">intr_frame::ebx</a>, <a class="el" href="interrupt_8h_source.html#l00030">intr_frame::ecx</a>, <a class="el" href="interrupt_8h_source.html#l00024">intr_frame::edi</a>, <a class="el" href="interrupt_8h_source.html#l00029">intr_frame::edx</a>, <a class="el" href="interrupt_8h_source.html#l00051">intr_frame::eip</a>, <a class="el" href="interrupt_8h_source.html#l00043">intr_frame::error_code</a>, <a class="el" href="interrupt_8h_source.html#l00033">intr_frame::es</a>, <a class="el" href="interrupt_8h_source.html#l00025">intr_frame::esi</a>, <a class="el" href="interrupt_8h_source.html#l00054">intr_frame::esp</a>, <a class="el" href="interrupt_8c_source.html#l00034">intr_names</a>, <a class="el" href="lib_2stdio_8c_source.html#l00079">printf()</a>, <a class="el" href="inttypes_8h_source.html#l00017">PRIx16</a>, <a class="el" href="inttypes_8h_source.html#l00024">PRIx32</a>, <a class="el" href="interrupt_8h_source.html#l00055">intr_frame::ss</a>, and <a class="el" href="interrupt_8h_source.html#l00035">intr_frame::vec_no</a>.</p>

<p class="reference">Referenced by <a class="el" href="exception_8c_source.html#l00072">kill()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_aad193c7a44c7bea286a77a590b7fa194_cgraph.png" border="0" usemap="#ainterrupt_8c_aad193c7a44c7bea286a77a590b7fa194_cgraph" alt=""/></div>
<map name="ainterrupt_8c_aad193c7a44c7bea286a77a590b7fa194_cgraph" id="ainterrupt_8c_aad193c7a44c7bea286a77a590b7fa194_cgraph">
<area shape="rect" title="Dumps interrupt frame F to the console, for debugging." alt="" coords="5,284,128,311"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="176,284,228,311"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="276,284,335,311"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="397,157,471,184"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="1019,309,1137,336"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="852,259,971,285"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="383,783,485,809"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="567,208,633,235"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="546,5,654,32"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="550,56,650,83"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="537,107,663,133"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="569,157,631,184"/>
<area shape="rect" href="lib_2stdio_8c.html#a9248d4643c7dd4c03f632fb1ce2b9d5f" title="Writes CH to OUTPUT with auxiliary data AUX, CNT times." alt="" coords="715,31,804,57"/>
<area shape="rect" href="ctype_8h.html#ad7fd5ce3790b81c86de5502ff6853f3a" title=" " alt="" coords="731,107,787,133"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1941,395,2032,421"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1229,563,1326,589"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1417,395,1567,437"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1773,597,1883,624"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1445,699,1539,725"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1948,699,2025,725"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1931,623,2043,649"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1783,1053,1873,1080"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1620,1003,1720,1029"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1615,800,1725,827"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1621,699,1719,725"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1936,1180,2037,1207"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1784,1003,1872,1029"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1794,800,1862,827"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1789,851,1867,877"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="1790,699,1866,725"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="1029,512,1127,539"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1239,888,1316,915"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1451,775,1533,801"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1441,863,1543,889"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1435,913,1549,940"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="533,995,667,1021"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="1185,294,1369,335"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="716,1205,803,1232"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="1454,1496,1530,1523"/>
<area shape="rect" href="serial_8c.html#aa1fb82a5be4690023966ea841c88a624" title="Initializes the serial port device for polling mode." alt="" coords="878,1205,945,1232"/>
<area shape="rect" href="intq_8c.html#aff4db6a96c4a1fb6898f26451a1049c2" title="Returns true if Q is full, false otherwise." alt="" coords="1044,1357,1112,1384"/>
<area shape="rect" href="intq_8c.html#a45ba970f3357ff262d7fafecc50735c6" title="Removes a byte from Q and returns it." alt="" coords="873,512,949,539"/>
<area shape="rect" href="intq_8c.html#a6a440110d5417c12cedf1c2e86f445f8" title="Adds BYTE to the end of Q." alt="" coords="873,981,949,1008"/>
<area shape="rect" href="serial_8c.html#a15fd75cc421e6379650204e80853a68a" title="Polls the serial port until it&#39;s ready, and then transmits BYTE." alt="" coords="1040,1307,1116,1333"/>
<area shape="rect" href="serial_8c.html#ac89212325aed0ffe38beb0b4bde0bf30" title="Update interrupt enable register." alt="" coords="1241,1408,1313,1435"/>
<area shape="rect" href="vga_8c.html#a45d8235ab0187a7c0391d0c749317856" title="Clears the screen and moves the cursor to the upper left." alt="" coords="1651,1560,1689,1587"/>
<area shape="rect" href="vga_8c.html#ac16dc5267953b78624e2ed568776a04b" title="Moves the hardware cursor to (cx,cy)." alt="" coords="1779,1535,1877,1561"/>
<area shape="rect" href="vga_8c.html#a17fb021b480a1f220d2579807fa2e398" title="Initializes the VGA text display." alt="" coords="1651,1611,1689,1637"/>
<area shape="rect" href="vga_8c.html#abc92c781510c5f99670802f3c65ebb01" title="Advances the cursor to the first column in the next line on the screen." alt="" coords="1637,1661,1703,1688"/>
<area shape="rect" href="speaker_8c.html#a1326dce269503d1ba9fac4e40cdf453e" title="Briefly beep the PC speaker." alt="" coords="1617,1459,1723,1485"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_aad193c7a44c7bea286a77a590b7fa194_icgraph.png" border="0" usemap="#ainterrupt_8c_aad193c7a44c7bea286a77a590b7fa194_icgraph" alt=""/></div>
<map name="ainterrupt_8c_aad193c7a44c7bea286a77a590b7fa194_icgraph" id="ainterrupt_8c_aad193c7a44c7bea286a77a590b7fa194_icgraph">
<area shape="rect" title="Dumps interrupt frame F to the console, for debugging." alt="" coords="507,5,629,32"/>
<area shape="rect" href="exception_8c.html#a6984b10e1d2a817938f8e70a89d13ff9" title="Handler for an exception (probably) caused by a user process." alt="" coords="420,5,459,32"/>
<area shape="rect" href="exception_8c.html#a9dda131d124b9968825742beac31305d" title="Registers handlers for interrupts that can be caused by user programs." alt="" coords="136,5,240,32"/>
<area shape="rect" href="exception_8c.html#a22263f7481f54fafb7a06f63ea1675c3" title="Page fault handler." alt="" coords="288,31,372,57"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,88,32"/>
</map>
</div>

</div>
</div>
<a id="a5a896b58d69d8d5ffa7b738c31b924d1" name="a5a896b58d69d8d5ffa7b738c31b924d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a896b58d69d8d5ffa7b738c31b924d1">&#9670;&nbsp;</a></span>intr_enable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="interrupt_8h.html#ac5ca1b946321e42624b327f0dc872b60">intr_level</a> intr_enable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables interrupts and returns the previous interrupt status. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00088">88</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="interrupt_8c_source.html#l00212">intr_context()</a>, and <a class="el" href="interrupt_8c_source.html#l00065">intr_get_level()</a>.</p>

<p class="reference">Referenced by <a class="el" href="interrupt_8c_source.html#l00081">intr_set_level()</a>, <a class="el" href="thread_8c_source.html#l00419">kernel_thread()</a>, <a class="el" href="exception_8c_source.html#l00123">page_fault()</a>, and <a class="el" href="thread_8c_source.html#l00106">thread_start()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a5a896b58d69d8d5ffa7b738c31b924d1_cgraph.png" border="0" usemap="#ainterrupt_8c_a5a896b58d69d8d5ffa7b738c31b924d1_cgraph" alt=""/></div>
<map name="ainterrupt_8c_a5a896b58d69d8d5ffa7b738c31b924d1_cgraph" id="ainterrupt_8c_a5a896b58d69d8d5ffa7b738c31b924d1_cgraph">
<area shape="rect" title="Enables interrupts and returns the previous interrupt status." alt="" coords="5,31,93,57"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="147,5,237,32"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="141,56,243,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a5a896b58d69d8d5ffa7b738c31b924d1_icgraph.png" border="0" usemap="#ainterrupt_8c_a5a896b58d69d8d5ffa7b738c31b924d1_icgraph" alt=""/></div>
<map name="ainterrupt_8c_a5a896b58d69d8d5ffa7b738c31b924d1_icgraph" id="ainterrupt_8c_a5a896b58d69d8d5ffa7b738c31b924d1_icgraph">
<area shape="rect" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1123,1032,1211,1059"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="973,753,1073,780"/>
<area shape="rect" href="thread_8c.html#a07e468d365e1799676192b95b2067f59" title="Starts preemptive thread scheduling by enabling interrupts." alt="" coords="409,1057,502,1084"/>
<area shape="rect" href="thread_8c.html#ac40007d0837868671dffa80f581b4723" title="Function used as the basis for a kernel thread." alt="" coords="971,943,1075,969"/>
<area shape="rect" href="exception_8c.html#a22263f7481f54fafb7a06f63ea1675c3" title="Page fault handler." alt="" coords="981,1260,1065,1287"/>
<area shape="rect" href="kernel_2debug_8c.html#a3236587de5c28bedd8e07c003f58374e" title="Prints call stack of all threads." alt="" coords="774,703,919,729"/>
<area shape="rect" href="thread_8c.html#a34a9d4a5ab1bf577041f4c3f1b8f6c89" title="Does basic initialization of T as a blocked thread named NAME." alt="" coords="805,753,889,780"/>
<area shape="rect" href="input_8c.html#a07e161b7f0ec81e4d4d4990e0b5e6a27" title="Retrieves a key from the input buffer." alt="" coords="805,804,889,831"/>
<area shape="rect" href="pit_8c.html#a7dd39bb359cbd638f9134488ab47db4c" title="Configure the given CHANNEL in the PIT." alt="" coords="771,1057,923,1084"/>
<area shape="rect" href="speaker_8c.html#a7ae6bbf92a40862ee9523cd43e69f925" title="Sets the PC speaker to emit a tone at the given FREQUENCY, in Hz." alt="" coords="604,1007,696,1033"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="222,1007,298,1033"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="603,703,697,729"/>
<area shape="rect" href="synch_8c.html#a1e4e794129baf4a30244058661afa31a" title="Down or &quot;P&quot; operation on a semaphore, but only if the semaphore is not already 0." alt="" coords="789,1108,905,1135"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="611,297,689,324"/>
<area shape="rect" href="serial_8c.html#a04858117b8541474fe79c45a044b59cc" title="Flushes anything in the serial buffer out the port in polling mode." alt="" coords="802,145,891,172"/>
<area shape="rect" href="serial_8c.html#a54e99a9877b7ed2a6be751fc43905978" title="Initializes the serial port device for queued interrupt&#45;driven I/O." alt="" coords="589,1209,711,1236"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="607,196,693,223"/>
<area shape="rect" href="speaker_8c.html#a073f7570ba87d9cbf510616817c60b41" title="Turn off the PC speaker, by disconnecting the timer channel&#39;s output from the speaker." alt="" coords="801,956,893,983"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="790,551,903,577"/>
<area shape="rect" href="thread_8c.html#aaa9229e0f462f60bb9550919fa3d7699" title="Yields the CPU." alt="" coords="408,500,503,527"/>
<area shape="rect" href="timer_8c.html#a2b50be77101b38176d21b52cc425cf3e" title="Returns the number of timer ticks since the OS booted." alt="" coords="804,323,889,349"/>
<area shape="rect" href="thread_8c.html#a8f7759a71c1c49fc8761ef92aa90a36d" title="Creates a new kernel thread named NAME with the given initial PRIORITY, which executes FUNCTION passi..." alt="" coords="598,753,702,780"/>
<area shape="rect" href="synch_8c.html#ac007e29a5442996a099aa8172f5e046a" title="Self&#45;test for semaphores that makes control &quot;ping&#45;pong&quot; between a pair of threads." alt="" coords="204,323,316,349"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="219,1184,301,1211"/>
<area shape="rect" href="timer_8c.html#a7b8ab79df77b57475a5494f5f81c3bd9" title="Sets up the timer to interrupt TIMER_FREQ times per second, and registers the corresponding interrupt..." alt="" coords="612,1057,688,1084"/>
<area shape="rect" href="speaker_8c.html#a1326dce269503d1ba9fac4e40cdf453e" title="Briefly beep the PC speaker." alt="" coords="402,1108,509,1135"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="5,500,139,527"/>
<area shape="rect" href="synch_8c.html#a408896d5b2af213dc2a8da984c696419" title="Atomically releases LOCK and waits for COND to be signaled by some other piece of code." alt="" coords="219,652,301,679"/>
<area shape="rect" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="223,703,297,729"/>
<area shape="rect" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49" title="Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="222,753,298,780"/>
<area shape="rect" href="ide_8c.html#afcd1cfa04037980c000c94c826517759" title="Sends an IDENTIFY DEVICE command to disk D and reads the response." alt="" coords="387,905,523,932"/>
<area shape="rect" href="priority-donate-sema_8c.html#aeb0f97fa3c6d25534de6a11bf3532aa3" title=" " alt="" coords="209,804,311,831"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="407,753,504,780"/>
<area shape="rect" href="priority-donate-sema_8c.html#a4dc51b1476966c227801513da4bd6b84" title=" " alt="" coords="400,652,511,679"/>
<area shape="rect" href="priority-sema_8c.html#a256435362d935640e9ba8007e76794d0" title=" " alt="" coords="382,703,529,729"/>
<area shape="rect" href="synch_8c.html#a57b7a9021b4a9c32f00065da020e96cd" title="Thread function used by sema_self_test()." alt="" coords="391,297,519,324"/>
<area shape="rect" href="priority-donate-sema_8c.html#a85675782bf8084df44707dfcfd2d7ae8" title=" " alt="" coords="207,500,313,527"/>
<area shape="rect" href="priority-donate-nest_8c.html#ada3ddea14ea0cb3220f0a00cfa7929dc" title=" " alt="" coords="187,551,333,577"/>
<area shape="rect" href="priority-fifo_8c.html#a09afbb5707a2af609420fccb0795b96c" title=" " alt="" coords="191,601,329,628"/>
<area shape="rect" href="synch_8c.html#a343f11e4ce80e077a18e565b6d9ac180" title="Tries to acquires LOCK and returns true if successful or false on failure." alt="" coords="591,1108,709,1135"/>
<area shape="rect" href="alarm-priority_8c.html#a3a8636bb8f03b8450f18ef9dbd774a0c" title=" " alt="" coords="381,44,529,71"/>
<area shape="rect" href="synch_8c.html#a4534660eba2b75a5e5e34590d743f685" title="If any threads are waiting on COND (protected by LOCK), then this function signals one of them to wak..." alt="" coords="409,145,502,172"/>
<area shape="rect" href="thread_8c.html#a6fbc1c29ff118d92ee1449a1072a00ce" title="Idle thread." alt="" coords="434,196,477,223"/>
<area shape="rect" href="ide_8c.html#a968e89e258918c93a81618744b6c0e35" title="ATA interrupt handler." alt="" coords="394,247,517,273"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="407,551,504,577"/>
<area shape="rect" href="kernel_2debug_8c.html#a0dba4a46c338129ae12e314e07e9fbe3" title="Halts the OS, printing the source file name, line number, and function name, plus a user&#45;specific mes..." alt="" coords="601,145,699,172"/>
<area shape="rect" href="shutdown_8c.html#a4cc4519942eb3292f9ee3702330ebd07" title="Powers down the machine we&#39;re running on, as long as we&#39;re running on Bochs or QEMU." alt="" coords="577,95,723,121"/>
<area shape="rect" href="intq_8c.html#a9345e011df7272c05780a74adad48225" title="WAITER must be the address of Q&#39;s not_empty or not_full member, and the associated condition must be ..." alt="" coords="621,551,679,577"/>
<area shape="rect" href="interrupt_8c.html#ad2ddb6c69915597ee636e732afa5795a" title="Interrupt handlers." alt="" coords="214,449,306,476"/>
<area shape="rect" href="exception_8c.html#a9dda131d124b9968825742beac31305d" title="Registers handlers for interrupts that can be caused by user programs." alt="" coords="795,1260,899,1287"/>
</map>
</div>

</div>
</div>
<a id="ac657e1386ac8c557ddafbcc732427fbf" name="ac657e1386ac8c557ddafbcc732427fbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac657e1386ac8c557ddafbcc732427fbf">&#9670;&nbsp;</a></span>intr_get_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="interrupt_8h.html#ac5ca1b946321e42624b327f0dc872b60">intr_level</a> intr_get_level </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current interrupt status. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00065">65</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="flags_8h_source.html#l00006">FLAG_IF</a>, <a class="el" href="interrupt_8h_source.html#l00010">INTR_OFF</a>, and <a class="el" href="interrupt_8h_source.html#l00011">INTR_ON</a>.</p>

<p class="reference">Referenced by <a class="el" href="input_8c_source.html#l00048">input_full()</a>, <a class="el" href="input_8c_source.html#l00019">input_putc()</a>, <a class="el" href="intq_8c_source.html#l00020">intq_empty()</a>, <a class="el" href="intq_8c_source.html#l00028">intq_full()</a>, <a class="el" href="intq_8c_source.html#l00038">intq_getc()</a>, <a class="el" href="intq_8c_source.html#l00061">intq_putc()</a>, <a class="el" href="interrupt_8c_source.html#l00104">intr_disable()</a>, <a class="el" href="interrupt_8c_source.html#l00088">intr_enable()</a>, <a class="el" href="interrupt_8c_source.html#l00345">intr_handler()</a>, <a class="el" href="ide_8c_source.html#l00407">issue_pio_command()</a>, <a class="el" href="serial_8c_source.html#l00199">putc_poll()</a>, <a class="el" href="timer_8c_source.html#l00212">real_time_sleep()</a>, <a class="el" href="thread_8c_source.html#l00553">schedule()</a>, <a class="el" href="serial_8c_source.html#l00148">serial_notify()</a>, <a class="el" href="intq_8c_source.html#l00103">signal()</a>, <a class="el" href="speaker_8c_source.html#l00048">speaker_beep()</a>, <a class="el" href="thread_8c_source.html#l00214">thread_block()</a>, <a class="el" href="thread_8c_source.html#l00320">thread_foreach()</a>, <a class="el" href="thread_8c_source.html#l00516">thread_schedule_tail()</a>, <a class="el" href="timer_8c_source.html#l00044">timer_calibrate()</a>, <a class="el" href="timer_8c_source.html#l00090">timer_sleep()</a>, <a class="el" href="intq_8c_source.html#l00087">wait()</a>, and <a class="el" href="serial_8c_source.html#l00177">write_ier()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_ac657e1386ac8c557ddafbcc732427fbf_icgraph.png" border="0" usemap="#ainterrupt_8c_ac657e1386ac8c557ddafbcc732427fbf_icgraph" alt=""/></div>
<map name="ainterrupt_8c_ac657e1386ac8c557ddafbcc732427fbf_icgraph" id="ainterrupt_8c_ac657e1386ac8c557ddafbcc732427fbf_icgraph">
<area shape="rect" title="Returns the current interrupt status." alt="" coords="1137,1425,1239,1452"/>
<area shape="rect" href="input_8c.html#a60ec5bbf4a98fbdb4fae3124870ef055" title="Returns true if the input buffer is full, false otherwise." alt="" coords="813,83,889,109"/>
<area shape="rect" href="serial_8c.html#ac89212325aed0ffe38beb0b4bde0bf30" title="Update interrupt enable register." alt="" coords="671,640,743,667"/>
<area shape="rect" href="serial_8c.html#adb6147ac44d14c383cb2a4ded6781d3c" title="The fullness of the input buffer may have changed." alt="" coords="487,589,580,616"/>
<area shape="rect" href="input_8c.html#ada444892e4e73de28dfbdb5a50e4ed29" title="Adds a key to the input buffer." alt="" coords="318,209,402,236"/>
<area shape="rect" href="intq_8c.html#a34e623157a6c4f53ae29eda5d65b7395" title="Returns true if Q is empty, false otherwise." alt="" coords="807,691,894,717"/>
<area shape="rect" href="intq_8c.html#a45ba970f3357ff262d7fafecc50735c6" title="Removes a byte from Q and returns it." alt="" coords="669,843,745,869"/>
<area shape="rect" href="intq_8c.html#a9345e011df7272c05780a74adad48225" title="WAITER must be the address of Q&#39;s not_empty or not_full member, and the associated condition must be ..." alt="" coords="331,361,389,388"/>
<area shape="rect" href="intq_8c.html#ac7faf9c8b94faf0aa76ed2b23659a3e0" title="WAITER must be the address of Q&#39;s not_empty or not_full member." alt="" coords="511,437,556,464"/>
<area shape="rect" href="intq_8c.html#aff4db6a96c4a1fb6898f26451a1049c2" title="Returns true if Q is full, false otherwise." alt="" coords="983,285,1051,312"/>
<area shape="rect" href="intq_8c.html#a6a440110d5417c12cedf1c2e86f445f8" title="Adds BYTE to the end of Q." alt="" coords="813,336,889,363"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="805,1425,896,1452"/>
<area shape="rect" href="speaker_8c.html#a1326dce269503d1ba9fac4e40cdf453e" title="Briefly beep the PC speaker." alt="" coords="143,1805,249,1832"/>
<area shape="rect" href="interrupt_8c.html#ad2ddb6c69915597ee636e732afa5795a" title="Interrupt handlers." alt="" coords="314,2312,406,2339"/>
<area shape="rect" href="timer_8c.html#aa24fbc19fb550d9efd5cabd97489a399" title="Sleeps for approximately TICKS timer ticks." alt="" coords="315,2211,405,2237"/>
<area shape="rect" href="timer_8c.html#a9bd10eb80561359273e022f4c80b483f" title="Sleep for approximately NUM/DENOM seconds." alt="" coords="138,2363,254,2389"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="807,2261,895,2288"/>
<area shape="rect" href="ide_8c.html#acdfc60cf49c8edf42ed8d25b0d2b6314" title="Writes COMMAND to channel C and prepares for receiving a completion interrupt." alt="" coords="945,1868,1089,1895"/>
<area shape="rect" href="serial_8c.html#a15fd75cc421e6379650204e80853a68a" title="Polls the serial port until it&#39;s ready, and then transmits BYTE." alt="" coords="669,944,745,971"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="813,2109,889,2136"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="658,1552,757,1579"/>
<area shape="rect" href="thread_8c.html#af8e1023bfbf318808dcb220a6596eea5" title="Invoke function &#39;func&#39; on all threads, passing along &#39;aux&#39;." alt="" coords="961,1729,1073,1756"/>
<area shape="rect" href="thread_8c.html#acbbd25908c41e62d44a179cfbc3962e2" title="Completes a thread switch by activating the new thread&#39;s page tables, and, if the previous thread is ..." alt="" coords="944,2109,1089,2136"/>
<area shape="rect" href="timer_8c.html#a8a4e243d361cd252de04175b1b53c419" title="Calibrates loops_per_tick, used to implement brief delays." alt="" coords="962,2515,1071,2541"/>
<area shape="rect" href="kbd_8c.html#a342c6a1eb911b8e2a65a5dfba072492b" title=" " alt="" coords="129,57,263,84"/>
<area shape="rect" href="serial_8c.html#a2d769aaa2d2ff184e5e70fcf4b9d2354" title="Serial interrupt handler." alt="" coords="141,640,251,667"/>
<area shape="rect" href="serial_8c.html#a54e99a9877b7ed2a6be751fc43905978" title="Initializes the serial port device for queued interrupt&#45;driven I/O." alt="" coords="472,1096,595,1123"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="490,792,577,819"/>
<area shape="rect" href="input_8c.html#a07e161b7f0ec81e4d4d4990e0b5e6a27" title="Retrieves a key from the input buffer." alt="" coords="318,951,402,977"/>
<area shape="rect" href="serial_8c.html#a04858117b8541474fe79c45a044b59cc" title="Flushes anything in the serial buffer out the port in polling mode." alt="" coords="489,969,578,996"/>
<area shape="rect" href="kernel_2debug_8c.html#a0dba4a46c338129ae12e314e07e9fbe3" title="Halts the OS, printing the source file name, line number, and function name, plus a user&#45;specific mes..." alt="" coords="311,1045,409,1072"/>
<area shape="rect" href="kernel_2debug_8c.html#a3236587de5c28bedd8e07c003f58374e" title="Prints call stack of all threads." alt="" coords="461,2008,606,2035"/>
<area shape="rect" href="thread_8c.html#a6fbc1c29ff118d92ee1449a1072a00ce" title="Idle thread." alt="" coords="175,1299,217,1325"/>
<area shape="rect" href="thread_8c.html#a34a9d4a5ab1bf577041f4c3f1b8f6c89" title="Does basic initialization of T as a blocked thread named NAME." alt="" coords="491,1451,575,1477"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="657,1603,757,1629"/>
<area shape="rect" href="pit_8c.html#a7dd39bb359cbd638f9134488ab47db4c" title="Configure the given CHANNEL in the PIT." alt="" coords="457,1755,609,1781"/>
<area shape="rect" href="speaker_8c.html#a7ae6bbf92a40862ee9523cd43e69f925" title="Sets the PC speaker to emit a tone at the given FREQUENCY, in Hz." alt="" coords="314,1755,406,1781"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="5,1805,81,1832"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="487,1907,580,1933"/>
<area shape="rect" href="synch_8c.html#a1e4e794129baf4a30244058661afa31a" title="Down or &quot;P&quot; operation on a semaphore, but only if the semaphore is not already 0." alt="" coords="475,1552,591,1579"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="321,1299,399,1325"/>
<area shape="rect" href="speaker_8c.html#a073f7570ba87d9cbf510616817c60b41" title="Turn off the PC speaker, by disconnecting the timer channel&#39;s output from the speaker." alt="" coords="487,1805,579,1832"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="477,1248,590,1275"/>
<area shape="rect" href="thread_8c.html#aaa9229e0f462f60bb9550919fa3d7699" title="Yields the CPU." alt="" coords="486,2160,581,2187"/>
<area shape="rect" href="timer_8c.html#a2b50be77101b38176d21b52cc425cf3e" title="Returns the number of timer ticks since the OS booted." alt="" coords="491,1957,576,1984"/>
<area shape="rect" href="thread_8c.html#a87c2438941819bb3cc31658aa9eb66fe" title="Deschedules the current thread and destroys it." alt="" coords="663,2109,751,2136"/>
<area shape="rect" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="323,1932,397,1959"/>
<area shape="rect" href="thread_8c.html#a07e468d365e1799676192b95b2067f59" title="Starts preemptive thread scheduling by enabling interrupts." alt="" coords="313,2033,407,2060"/>
<area shape="rect" href="thread_8c.html#ac40007d0837868671dffa80f581b4723" title="Function used as the basis for a kernel thread." alt="" coords="481,2211,585,2237"/>
<area shape="rect" href="exception_8c.html#a22263f7481f54fafb7a06f63ea1675c3" title="Page fault handler." alt="" coords="665,2312,749,2339"/>
</map>
</div>

</div>
</div>
<a id="ad2ddb6c69915597ee636e732afa5795a" name="ad2ddb6c69915597ee636e732afa5795a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2ddb6c69915597ee636e732afa5795a">&#9670;&nbsp;</a></span>intr_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void intr_handler </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structintr__frame.html">intr_frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupt handlers. </p>
<p >Handler for all interrupts, faults, and exceptions. This function is called by the assembly language interrupt stubs in intr-stubs.S. FRAME describes the interrupt and the interrupted thread's registers. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00345">345</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="interrupt_8c_source.html#l00047">in_external_intr</a>, <a class="el" href="interrupt_8c_source.html#l00212">intr_context()</a>, <a class="el" href="interrupt_8c_source.html#l00065">intr_get_level()</a>, <a class="el" href="interrupt_8c_source.html#l00031">intr_handlers</a>, <a class="el" href="interrupt_8h_source.html#l00010">INTR_OFF</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, <a class="el" href="interrupt_8c_source.html#l00265">pic_end_of_interrupt()</a>, <a class="el" href="thread_8c_source.html#l00302">thread_yield()</a>, <a class="el" href="interrupt_8c_source.html#l00394">unexpected_interrupt()</a>, <a class="el" href="interrupt_8h_source.html#l00035">intr_frame::vec_no</a>, and <a class="el" href="interrupt_8c_source.html#l00048">yield_on_return</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_ad2ddb6c69915597ee636e732afa5795a_cgraph.png" border="0" usemap="#ainterrupt_8c_ad2ddb6c69915597ee636e732afa5795a_cgraph" alt=""/></div>
<map name="ainterrupt_8c_ad2ddb6c69915597ee636e732afa5795a_cgraph" id="ainterrupt_8c_ad2ddb6c69915597ee636e732afa5795a_cgraph">
<area shape="rect" title="Interrupt handlers." alt="" coords="5,738,97,765"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1035,810,1125,837"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="840,536,941,562"/>
<area shape="rect" href="interrupt_8c.html#a63cfe8a21a3d7aca438e577f8ed5c50f" title="Sends an end&#45;of&#45;interrupt signal to the PIC for the given IRQ." alt="" coords="147,738,291,765"/>
<area shape="rect" href="thread_8c.html#aaa9229e0f462f60bb9550919fa3d7699" title="Yields the CPU." alt="" coords="340,586,435,613"/>
<area shape="rect" href="interrupt_8c.html#a2511f618361b04d286de89201486d01a" title="Handles an unexpected interrupt with interrupt frame F." alt="" coords="145,840,292,866"/>
<area shape="rect" href="io_8h.html#a903c588b94e0e8386c8a6f8caa4a5a72" title="Writes byte DATA to PORT." alt="" coords="363,738,411,765"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="658,536,749,562"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="483,586,583,613"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="835,29,946,56"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="495,358,571,385"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1203,586,1312,613"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="659,586,747,613"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1382,29,1450,56"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1041,29,1119,56"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1217,80,1297,106"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1229,29,1285,56"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1377,510,1455,537"/>
<area shape="rect" href="intq_8c.html#ac473f50d2829cba1321d34a57c425042" title="Returns the position after POS within an intq." alt="" coords="680,434,727,461"/>
<area shape="rect" href="thread_8c.html#ace7a46dcf0f5c9c4cbb8f47a5b3c76f5" title="Chooses and returns the next thread to be scheduled." alt="" coords="635,181,772,208"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1360,282,1472,309"/>
<area shape="rect" href="switch_8h.html#a72fbed245d8de7e36d70eb4682682c98" title="Switches from CUR, which must be the running thread, to NEXT, which must also be running switch_threa..." alt="" coords="648,384,759,410"/>
<area shape="rect" href="thread_8c.html#acbbd25908c41e62d44a179cfbc3962e2" title="Completes a thread switch by activating the new thread&#39;s page tables, and, if the previous thread is ..." alt="" coords="631,282,776,309"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1216,130,1299,157"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="839,130,942,157"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1377,130,1455,157"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1044,130,1116,157"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1035,80,1125,106"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="1520,282,1637,309"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="829,333,953,360"/>
<area shape="rect" href="process_8c.html#a23823b283ef2815ecc5ae19e772dac24" title="Sets up the CPU for running user code in the current thread." alt="" coords="829,485,952,512"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="1010,333,1150,360"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1216,333,1299,360"/>
<area shape="rect" href="pagedir_8c.html#ac0a75950cc56724fef94d224df4b0cd0" title="Loads page directory PD into the CPU&#39;s page directory base register." alt="" coords="1020,485,1140,512"/>
<area shape="rect" href="tss_8c.html#a089f0d1278964a0cc36f92d47febd2d4" title="Sets the ring 0 stack pointer in the TSS to point to the end of the thread stack." alt="" coords="1037,536,1123,562"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="361,890,413,917"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="503,941,562,968"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="667,1042,740,1069"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="644,1270,763,1297"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="644,890,763,917"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="652,941,755,968"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="857,1042,924,1069"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="837,1093,945,1120"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="841,1144,941,1170"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="827,1194,954,1221"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="859,992,922,1018"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="842,1296,939,1322"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1005,970,1155,1011"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="842,890,939,917"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="824,941,957,968"/>
</map>
</div>

</div>
</div>
<a id="ab3e596a633d94203771c1a2b10211d90" name="ab3e596a633d94203771c1a2b10211d90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3e596a633d94203771c1a2b10211d90">&#9670;&nbsp;</a></span>intr_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void intr_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the interrupt system. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00118">118</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="interrupt_8c_source.html#l00028">idt</a>, <a class="el" href="interrupt_8c_source.html#l00022">INTR_CNT</a>, <a class="el" href="interrupt_8c_source.html#l00034">intr_names</a>, <a class="el" href="intr-stubs_8h.html#a29c0ec17ba73daf91ac6e4cd8b6d2c7b">intr_stubs</a>, <a class="el" href="interrupt_8c_source.html#l00333">make_idtr_operand()</a>, <a class="el" href="interrupt_8c_source.html#l00317">make_intr_gate()</a>, and <a class="el" href="interrupt_8c_source.html#l00238">pic_init()</a>.</p>

<p class="reference">Referenced by <a class="el" href="init_8c_source.html#l00073">pintos_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_ab3e596a633d94203771c1a2b10211d90_cgraph.png" border="0" usemap="#ainterrupt_8c_ab3e596a633d94203771c1a2b10211d90_cgraph" alt=""/></div>
<map name="ainterrupt_8c_ab3e596a633d94203771c1a2b10211d90_cgraph" id="ainterrupt_8c_ab3e596a633d94203771c1a2b10211d90_cgraph">
<area shape="rect" title="Initializes the interrupt system." alt="" coords="5,56,71,83"/>
<area shape="rect" href="interrupt_8c.html#afb694fad923f4942cd9de0bd38172b4e" title="Returns a descriptor that yields the given LIMIT and BASE when used as an operand for the LIDT instru..." alt="" coords="119,5,256,32"/>
<area shape="rect" href="interrupt_8c.html#a75ac431d18ce7aff146bef22379c1dcd" title="Interrupt Descriptor Table helpers." alt="" coords="131,56,244,83"/>
<area shape="rect" href="interrupt_8c.html#a69ce22b1b1b67b59d13ee72c00570274" title="Programmable Interrupt Controller helpers." alt="" coords="155,107,219,133"/>
<area shape="rect" href="interrupt_8c.html#a05aa182a64c4dc89f63a20b96d4628dc" title="Creates an gate that invokes FUNCTION." alt="" coords="304,56,392,83"/>
<area shape="rect" href="io_8h.html#a903c588b94e0e8386c8a6f8caa4a5a72" title="Writes byte DATA to PORT." alt="" coords="324,107,372,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_ab3e596a633d94203771c1a2b10211d90_icgraph.png" border="0" usemap="#ainterrupt_8c_ab3e596a633d94203771c1a2b10211d90_icgraph" alt=""/></div>
<map name="ainterrupt_8c_ab3e596a633d94203771c1a2b10211d90_icgraph" id="ainterrupt_8c_ab3e596a633d94203771c1a2b10211d90_icgraph">
<area shape="rect" title="Initializes the interrupt system." alt="" coords="136,5,201,32"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,88,32"/>
</map>
</div>

</div>
</div>
<a id="a681a252ccfdad4ce2e623e2635fe4748" name="a681a252ccfdad4ce2e623e2635fe4748"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a681a252ccfdad4ce2e623e2635fe4748">&#9670;&nbsp;</a></span>intr_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * intr_name </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>vec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the name of interrupt VEC. </p>
<p ><a class="el" href="interrupt_8h.html">threads/interrupt.h</a> </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00435">435</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="interrupt_8c_source.html#l00034">intr_names</a>.</p>

<p class="reference">Referenced by <a class="el" href="exception_8c_source.html#l00072">kill()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a681a252ccfdad4ce2e623e2635fe4748_icgraph.png" border="0" usemap="#ainterrupt_8c_a681a252ccfdad4ce2e623e2635fe4748_icgraph" alt=""/></div>
<map name="ainterrupt_8c_a681a252ccfdad4ce2e623e2635fe4748_icgraph" id="ainterrupt_8c_a681a252ccfdad4ce2e623e2635fe4748_icgraph">
<area shape="rect" title="Returns the name of interrupt VEC." alt="" coords="507,5,588,32"/>
<area shape="rect" href="exception_8c.html#a6984b10e1d2a817938f8e70a89d13ff9" title="Handler for an exception (probably) caused by a user process." alt="" coords="420,5,459,32"/>
<area shape="rect" href="exception_8c.html#a9dda131d124b9968825742beac31305d" title="Registers handlers for interrupts that can be caused by user programs." alt="" coords="136,5,240,32"/>
<area shape="rect" href="exception_8c.html#a22263f7481f54fafb7a06f63ea1675c3" title="Page fault handler." alt="" coords="288,31,372,57"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,88,32"/>
</map>
</div>

</div>
</div>
<a id="a38cd217e72ddb3f58db591a061c99691" name="a38cd217e72ddb3f58db591a061c99691"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38cd217e72ddb3f58db591a061c99691">&#9670;&nbsp;</a></span>intr_register_ext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void intr_register_ext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>vec_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interrupt_8h.html#ac2d4246bbf5f813282d9458d87bf798d">intr_handler_func</a> *&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers external interrupt VEC_NO to invoke HANDLER, which is named NAME for debugging purposes. </p>
<p >The handler will execute with interrupts disabled. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00181">181</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="interrupt_8h_source.html#l00010">INTR_OFF</a>, <a class="el" href="insult_8c_source.html#l00047">name</a>, and <a class="el" href="interrupt_8c_source.html#l00165">register_handler()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ide_8c_source.html#l00102">ide_init()</a>, <a class="el" href="kbd_8c_source.html#l00031">kbd_init()</a>, <a class="el" href="serial_8c_source.html#l00082">serial_init_queue()</a>, and <a class="el" href="timer_8c_source.html#l00036">timer_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a38cd217e72ddb3f58db591a061c99691_cgraph.png" border="0" usemap="#ainterrupt_8c_a38cd217e72ddb3f58db591a061c99691_cgraph" alt=""/></div>
<map name="ainterrupt_8c_a38cd217e72ddb3f58db591a061c99691_cgraph" id="ainterrupt_8c_a38cd217e72ddb3f58db591a061c99691_cgraph">
<area shape="rect" title="Registers external interrupt VEC_NO to invoke HANDLER, which is named NAME for debugging purposes." alt="" coords="5,31,123,57"/>
<area shape="rect" href="interrupt_8c.html#a7e7d2edfe1ec7f51b54704080de2f4ca" title="Registers interrupt VEC_NO to invoke HANDLER with descriptor privilege level DPL." alt="" coords="171,31,289,57"/>
<area shape="rect" href="interrupt_8c.html#a75ac431d18ce7aff146bef22379c1dcd" title="Interrupt Descriptor Table helpers." alt="" coords="340,5,453,32"/>
<area shape="rect" href="interrupt_8c.html#a79e99b0236c49a7a12d52a2ec74fefa5" title="Creates a trap gate that invokes FUNCTION with the given DPL." alt="" coords="337,56,456,83"/>
<area shape="rect" href="interrupt_8c.html#a05aa182a64c4dc89f63a20b96d4628dc" title="Creates an gate that invokes FUNCTION." alt="" coords="504,31,592,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a38cd217e72ddb3f58db591a061c99691_icgraph.png" border="0" usemap="#ainterrupt_8c_a38cd217e72ddb3f58db591a061c99691_icgraph" alt=""/></div>
<map name="ainterrupt_8c_a38cd217e72ddb3f58db591a061c99691_icgraph" id="ainterrupt_8c_a38cd217e72ddb3f58db591a061c99691_icgraph">
<area shape="rect" title="Registers external interrupt VEC_NO to invoke HANDLER, which is named NAME for debugging purposes." alt="" coords="307,81,424,108"/>
<area shape="rect" href="ide_8c.html#a5e8e1409e0675bdd93040403c52dd660" title="Initialize the disk subsystem and detect disks." alt="" coords="165,5,229,32"/>
<area shape="rect" href="kbd_8c.html#a2d4a794658f2ee47f466766d89c6e8e8" title="Initializes the keyboard." alt="" coords="163,56,231,83"/>
<area shape="rect" href="serial_8c.html#a54e99a9877b7ed2a6be751fc43905978" title="Initializes the serial port device for queued interrupt&#45;driven I/O." alt="" coords="136,107,259,133"/>
<area shape="rect" href="timer_8c.html#a7b8ab79df77b57475a5494f5f81c3bd9" title="Sets up the timer to interrupt TIMER_FREQ times per second, and registers the corresponding interrupt..." alt="" coords="159,157,235,184"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,81,88,108"/>
</map>
</div>

</div>
</div>
<a id="a30707611d4360096acf72b3215bdea62" name="a30707611d4360096acf72b3215bdea62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30707611d4360096acf72b3215bdea62">&#9670;&nbsp;</a></span>intr_register_int()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void intr_register_int </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>vec_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dpl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="interrupt_8h.html#ac5ca1b946321e42624b327f0dc872b60">intr_level</a>&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interrupt_8h.html#ac2d4246bbf5f813282d9458d87bf798d">intr_handler_func</a> *&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Registers internal interrupt VEC_NO to invoke HANDLER, which is named NAME for debugging purposes. </p>
<p >The interrupt handler will be invoked with interrupt status LEVEL.</p>
<p >The handler will have descriptor privilege level DPL, meaning that it can be invoked intentionally when the processor is in the DPL or lower-numbered ring. In practice, DPL==3 allows user mode to invoke the interrupts and DPL==0 prevents such invocation. Faults and exceptions that occur in user mode still cause interrupts with DPL==0 to be invoked. See [IA32-v3a] sections 4.5 "Privilege Levels" and 4.8.1.1 "Accessing Nonconforming Code Segments" for further discussion. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00202">202</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="insult_8c_source.html#l00047">name</a>, and <a class="el" href="interrupt_8c_source.html#l00165">register_handler()</a>.</p>

<p class="reference">Referenced by <a class="el" href="exception_8c_source.html#l00030">exception_init()</a>, and <a class="el" href="userprog_2syscall_8c_source.html#l00010">syscall_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a30707611d4360096acf72b3215bdea62_cgraph.png" border="0" usemap="#ainterrupt_8c_a30707611d4360096acf72b3215bdea62_cgraph" alt=""/></div>
<map name="ainterrupt_8c_a30707611d4360096acf72b3215bdea62_cgraph" id="ainterrupt_8c_a30707611d4360096acf72b3215bdea62_cgraph">
<area shape="rect" title="Registers internal interrupt VEC_NO to invoke HANDLER, which is named NAME for debugging purposes." alt="" coords="5,31,119,57"/>
<area shape="rect" href="interrupt_8c.html#a7e7d2edfe1ec7f51b54704080de2f4ca" title="Registers interrupt VEC_NO to invoke HANDLER with descriptor privilege level DPL." alt="" coords="167,31,285,57"/>
<area shape="rect" href="interrupt_8c.html#a75ac431d18ce7aff146bef22379c1dcd" title="Interrupt Descriptor Table helpers." alt="" coords="336,5,449,32"/>
<area shape="rect" href="interrupt_8c.html#a79e99b0236c49a7a12d52a2ec74fefa5" title="Creates a trap gate that invokes FUNCTION with the given DPL." alt="" coords="333,56,452,83"/>
<area shape="rect" href="interrupt_8c.html#a05aa182a64c4dc89f63a20b96d4628dc" title="Creates an gate that invokes FUNCTION." alt="" coords="500,31,588,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a30707611d4360096acf72b3215bdea62_icgraph.png" border="0" usemap="#ainterrupt_8c_a30707611d4360096acf72b3215bdea62_icgraph" alt=""/></div>
<map name="ainterrupt_8c_a30707611d4360096acf72b3215bdea62_icgraph" id="ainterrupt_8c_a30707611d4360096acf72b3215bdea62_icgraph">
<area shape="rect" title="Registers internal interrupt VEC_NO to invoke HANDLER, which is named NAME for debugging purposes." alt="" coords="288,31,401,57"/>
<area shape="rect" href="exception_8c.html#a9dda131d124b9968825742beac31305d" title="Registers handlers for interrupts that can be caused by user programs." alt="" coords="136,5,240,32"/>
<area shape="rect" href="userprog_2syscall_8c.html#a797876702ac4b3a53fa69839f02642f4" title="userprog/syscall.h" alt="" coords="145,56,231,83"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,31,88,57"/>
</map>
</div>

</div>
</div>
<a id="ae3ae93a45d368c3d64fd0b473bd303d0" name="ae3ae93a45d368c3d64fd0b473bd303d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3ae93a45d368c3d64fd0b473bd303d0">&#9670;&nbsp;</a></span>intr_set_level()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="interrupt_8h.html#ac5ca1b946321e42624b327f0dc872b60">intr_level</a> intr_set_level </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="interrupt_8h.html#ac5ca1b946321e42624b327f0dc872b60">intr_level</a>&#160;</td>
          <td class="paramname"><em>level</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00081">81</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="interrupt_8c_source.html#l00104">intr_disable()</a>, <a class="el" href="interrupt_8c_source.html#l00088">intr_enable()</a>, and <a class="el" href="interrupt_8h_source.html#l00011">INTR_ON</a>.</p>

<p class="reference">Referenced by <a class="el" href="kernel_2debug_8c_source.html#l00117">debug_backtrace_all()</a>, <a class="el" href="thread_8c_source.html#l00452">init_thread()</a>, <a class="el" href="input_8c_source.html#l00031">input_getc()</a>, <a class="el" href="pit_8c_source.html#l00046">pit_configure_channel()</a>, <a class="el" href="synch_8c_source.html#l00061">sema_down()</a>, <a class="el" href="synch_8c_source.html#l00084">sema_try_down()</a>, <a class="el" href="synch_8c_source.html#l00109">sema_up()</a>, <a class="el" href="serial_8c_source.html#l00135">serial_flush()</a>, <a class="el" href="serial_8c_source.html#l00082">serial_init_queue()</a>, <a class="el" href="serial_8c_source.html#l00099">serial_putc()</a>, <a class="el" href="speaker_8c_source.html#l00039">speaker_off()</a>, <a class="el" href="speaker_8c_source.html#l00016">speaker_on()</a>, <a class="el" href="thread_8c_source.html#l00232">thread_unblock()</a>, <a class="el" href="thread_8c_source.html#l00302">thread_yield()</a>, <a class="el" href="timer_8c_source.html#l00071">timer_ticks()</a>, and <a class="el" href="vga_8c_source.html#l00052">vga_putc()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_ae3ae93a45d368c3d64fd0b473bd303d0_cgraph.png" border="0" usemap="#ainterrupt_8c_ae3ae93a45d368c3d64fd0b473bd303d0_cgraph" alt=""/></div>
<map name="ainterrupt_8c_ae3ae93a45d368c3d64fd0b473bd303d0_cgraph" id="ainterrupt_8c_ae3ae93a45d368c3d64fd0b473bd303d0_cgraph">
<area shape="rect" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="5,31,105,57"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="153,5,244,32"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="155,56,243,83"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="292,5,393,32"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="297,56,388,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_ae3ae93a45d368c3d64fd0b473bd303d0_icgraph.png" border="0" usemap="#ainterrupt_8c_ae3ae93a45d368c3d64fd0b473bd303d0_icgraph" alt=""/></div>
<map name="ainterrupt_8c_ae3ae93a45d368c3d64fd0b473bd303d0_icgraph" id="ainterrupt_8c_ae3ae93a45d368c3d64fd0b473bd303d0_icgraph">
<area shape="rect" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="971,385,1071,412"/>
<area shape="rect" href="kernel_2debug_8c.html#a3236587de5c28bedd8e07c003f58374e" title="Prints call stack of all threads." alt="" coords="774,5,919,32"/>
<area shape="rect" href="thread_8c.html#a34a9d4a5ab1bf577041f4c3f1b8f6c89" title="Does basic initialization of T as a blocked thread named NAME." alt="" coords="805,461,889,488"/>
<area shape="rect" href="input_8c.html#a07e161b7f0ec81e4d4d4990e0b5e6a27" title="Retrieves a key from the input buffer." alt="" coords="805,107,889,133"/>
<area shape="rect" href="pit_8c.html#a7dd39bb359cbd638f9134488ab47db4c" title="Configure the given CHANNEL in the PIT." alt="" coords="771,259,923,285"/>
<area shape="rect" href="speaker_8c.html#a7ae6bbf92a40862ee9523cd43e69f925" title="Sets the PC speaker to emit a tone at the given FREQUENCY, in Hz." alt="" coords="604,157,696,184"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="222,107,298,133"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="603,512,697,539"/>
<area shape="rect" href="synch_8c.html#a1e4e794129baf4a30244058661afa31a" title="Down or &quot;P&quot; operation on a semaphore, but only if the semaphore is not already 0." alt="" coords="789,360,905,387"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="611,917,689,944"/>
<area shape="rect" href="serial_8c.html#a04858117b8541474fe79c45a044b59cc" title="Flushes anything in the serial buffer out the port in polling mode." alt="" coords="802,411,891,437"/>
<area shape="rect" href="serial_8c.html#a54e99a9877b7ed2a6be751fc43905978" title="Initializes the serial port device for queued interrupt&#45;driven I/O." alt="" coords="785,309,908,336"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="607,1576,693,1603"/>
<area shape="rect" href="speaker_8c.html#a073f7570ba87d9cbf510616817c60b41" title="Turn off the PC speaker, by disconnecting the timer channel&#39;s output from the speaker." alt="" coords="801,157,893,184"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="790,563,903,589"/>
<area shape="rect" href="thread_8c.html#aaa9229e0f462f60bb9550919fa3d7699" title="Yields the CPU." alt="" coords="799,1196,894,1223"/>
<area shape="rect" href="timer_8c.html#a2b50be77101b38176d21b52cc425cf3e" title="Returns the number of timer ticks since the OS booted." alt="" coords="804,1399,889,1425"/>
<area shape="rect" href="thread_8c.html#a8f7759a71c1c49fc8761ef92aa90a36d" title="Creates a new kernel thread named NAME with the given initial PRIORITY, which executes FUNCTION passi..." alt="" coords="598,461,702,488"/>
<area shape="rect" href="synch_8c.html#ac007e29a5442996a099aa8172f5e046a" title="Self&#45;test for semaphores that makes control &quot;ping&#45;pong&quot; between a pair of threads." alt="" coords="204,512,316,539"/>
<area shape="rect" href="thread_8c.html#a07e468d365e1799676192b95b2067f59" title="Starts preemptive thread scheduling by enabling interrupts." alt="" coords="409,309,502,336"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="219,208,301,235"/>
<area shape="rect" href="timer_8c.html#a7b8ab79df77b57475a5494f5f81c3bd9" title="Sets up the timer to interrupt TIMER_FREQ times per second, and registers the corresponding interrupt..." alt="" coords="612,208,688,235"/>
<area shape="rect" href="speaker_8c.html#a1326dce269503d1ba9fac4e40cdf453e" title="Briefly beep the PC speaker." alt="" coords="402,107,509,133"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="5,841,139,868"/>
<area shape="rect" href="synch_8c.html#a408896d5b2af213dc2a8da984c696419" title="Atomically releases LOCK and waits for COND to be signaled by some other piece of code." alt="" coords="219,715,301,741"/>
<area shape="rect" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="223,867,297,893"/>
<area shape="rect" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49" title="Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="222,765,298,792"/>
<area shape="rect" href="ide_8c.html#afcd1cfa04037980c000c94c826517759" title="Sends an IDENTIFY DEVICE command to disk D and reads the response." alt="" coords="387,512,523,539"/>
<area shape="rect" href="priority-donate-sema_8c.html#aeb0f97fa3c6d25534de6a11bf3532aa3" title=" " alt="" coords="209,816,311,843"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="407,917,504,944"/>
<area shape="rect" href="priority-donate-sema_8c.html#a4dc51b1476966c227801513da4bd6b84" title=" " alt="" coords="400,411,511,437"/>
<area shape="rect" href="priority-sema_8c.html#a256435362d935640e9ba8007e76794d0" title=" " alt="" coords="382,461,529,488"/>
<area shape="rect" href="synch_8c.html#a57b7a9021b4a9c32f00065da020e96cd" title="Thread function used by sema_self_test()." alt="" coords="391,664,519,691"/>
<area shape="rect" href="mlfqs-block_8c.html#afae0754a3b814ae247351cc6ee14276c" title="Checks that recent_cpu and priorities are updated for blocked threads." alt="" coords="211,1297,309,1324"/>
<area shape="rect" href="priority-donate-sema_8c.html#a85675782bf8084df44707dfcfd2d7ae8" title=" " alt="" coords="207,917,313,944"/>
<area shape="rect" href="priority-donate-nest_8c.html#ada3ddea14ea0cb3220f0a00cfa7929dc" title=" " alt="" coords="187,1019,333,1045"/>
<area shape="rect" href="priority-fifo_8c.html#a09afbb5707a2af609420fccb0795b96c" title=" " alt="" coords="191,968,329,995"/>
<area shape="rect" href="synch_8c.html#a343f11e4ce80e077a18e565b6d9ac180" title="Tries to acquires LOCK and returns true if successful or false on failure." alt="" coords="591,309,709,336"/>
<area shape="rect" href="alarm-priority_8c.html#a3a8636bb8f03b8450f18ef9dbd774a0c" title=" " alt="" coords="381,1323,529,1349"/>
<area shape="rect" href="synch_8c.html#a4534660eba2b75a5e5e34590d743f685" title="If any threads are waiting on COND (protected by LOCK), then this function signals one of them to wak..." alt="" coords="409,968,502,995"/>
<area shape="rect" href="thread_8c.html#a6fbc1c29ff118d92ee1449a1072a00ce" title="Idle thread." alt="" coords="434,1019,477,1045"/>
<area shape="rect" href="ide_8c.html#a968e89e258918c93a81618744b6c0e35" title="ATA interrupt handler." alt="" coords="394,1069,517,1096"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="407,867,504,893"/>
<area shape="rect" href="kernel_2debug_8c.html#a0dba4a46c338129ae12e314e07e9fbe3" title="Halts the OS, printing the source file name, line number, and function name, plus a user&#45;specific mes..." alt="" coords="601,360,699,387"/>
<area shape="rect" href="shutdown_8c.html#a4cc4519942eb3292f9ee3702330ebd07" title="Powers down the machine we&#39;re running on, as long as we&#39;re running on Bochs or QEMU." alt="" coords="577,411,723,437"/>
<area shape="rect" href="intq_8c.html#a9345e011df7272c05780a74adad48225" title="WAITER must be the address of Q&#39;s not_empty or not_full member, and the associated condition must be ..." alt="" coords="621,563,679,589"/>
<area shape="rect" href="interrupt_8c.html#ad2ddb6c69915597ee636e732afa5795a" title="Interrupt handlers." alt="" coords="604,1120,696,1147"/>
<area shape="rect" href="alarm-simultaneous_8c.html#ab0a63a1d2a48bb4fe102b9254a82938d" title="Sleeper thread." alt="" coords="423,1373,488,1400"/>
<area shape="rect" href="timer_8c.html#aa24fbc19fb550d9efd5cabd97489a399" title="Sleeps for approximately TICKS timer ticks." alt="" coords="605,1373,695,1400"/>
<area shape="rect" href="mlfqs-fair_8c.html#ac167cc111091b60761c3bb6d1e63371e" title=" " alt="" coords="409,1449,501,1476"/>
</map>
</div>

</div>
</div>
<a id="a55213985fa8103301b86b15509d78243" name="a55213985fa8103301b86b15509d78243"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55213985fa8103301b86b15509d78243">&#9670;&nbsp;</a></span>intr_yield_on_return()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void intr_yield_on_return </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>During processing of an external interrupt, directs the interrupt handler to yield to a new process just before returning from the interrupt. </p>
<p >May not be called at any other time. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00222">222</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="interrupt_8c_source.html#l00212">intr_context()</a>, and <a class="el" href="interrupt_8c_source.html#l00048">yield_on_return</a>.</p>

<p class="reference">Referenced by <a class="el" href="thread_8c_source.html#l00123">thread_tick()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a55213985fa8103301b86b15509d78243_cgraph.png" border="0" usemap="#ainterrupt_8c_a55213985fa8103301b86b15509d78243_cgraph" alt=""/></div>
<map name="ainterrupt_8c_a55213985fa8103301b86b15509d78243_cgraph" id="ainterrupt_8c_a55213985fa8103301b86b15509d78243_cgraph">
<area shape="rect" title="During processing of an external interrupt, directs the interrupt handler to yield to a new process j..." alt="" coords="5,5,145,32"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="193,5,284,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a55213985fa8103301b86b15509d78243_icgraph.png" border="0" usemap="#ainterrupt_8c_a55213985fa8103301b86b15509d78243_icgraph" alt=""/></div>
<map name="ainterrupt_8c_a55213985fa8103301b86b15509d78243_icgraph" id="ainterrupt_8c_a55213985fa8103301b86b15509d78243_icgraph">
<area shape="rect" title="During processing of an external interrupt, directs the interrupt handler to yield to a new process j..." alt="" coords="296,5,436,32"/>
<area shape="rect" href="thread_8c.html#a99b55ae8059d7834cc113334a3fd0c3c" title="Called by the timer interrupt handler at each timer tick." alt="" coords="161,5,248,32"/>
<area shape="rect" href="timer_8c.html#abcfdd7470d8ed5b76f25a2eefdb90fa8" title="Timer interrupt handler." alt="" coords="5,5,113,32"/>
</map>
</div>

</div>
</div>
<a id="a05aa182a64c4dc89f63a20b96d4628dc" name="a05aa182a64c4dc89f63a20b96d4628dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05aa182a64c4dc89f63a20b96d4628dc">&#9670;&nbsp;</a></span>make_gate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a> make_gate </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dpl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates an gate that invokes FUNCTION. </p>
<p >The gate has descriptor privilege level DPL, meaning that it can be invoked intentionally when the processor is in the DPL or lower-numbered ring. In practice, DPL==3 allows user mode to call into the gate and DPL==0 prevents such calls. Faults and exceptions that occur in user mode still cause gates with DPL==0 to be invoked. See [IA32-v3a] sections 4.5 "Privilege
Levels" and 4.8.1.1 "Accessing Nonconforming Code Segments" for further discussion.</p>
<p >TYPE must be either 14 (for an interrupt gate) or 15 (for a trap gate). The difference is that entering an interrupt gate disables interrupts, but entering a trap gate does not. See [IA32-v3a] section 5.12.1.2 "Flag Usage By Exception- or
Interrupt-Handler Procedure" for discussion. </p>
<p >&lt; Offset 15:0.</p>
<p >&lt; Target code segment.</p>
<p >&lt; Offset 31:16.</p>
<p >&lt; Present.</p>
<p >&lt; Descriptor privilege level.</p>
<p >&lt; System.</p>
<p >&lt; Gate type.</p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00294">294</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, and <a class="el" href="loader_8h_source.html#l00030">SEL_KCSEG</a>.</p>

<p class="reference">Referenced by <a class="el" href="interrupt_8c_source.html#l00317">make_intr_gate()</a>, and <a class="el" href="interrupt_8c_source.html#l00325">make_trap_gate()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a05aa182a64c4dc89f63a20b96d4628dc_icgraph.png" border="0" usemap="#ainterrupt_8c_a05aa182a64c4dc89f63a20b96d4628dc_icgraph" alt=""/></div>
<map name="ainterrupt_8c_a05aa182a64c4dc89f63a20b96d4628dc_icgraph" id="ainterrupt_8c_a05aa182a64c4dc89f63a20b96d4628dc_icgraph">
<area shape="rect" title="Creates an gate that invokes FUNCTION." alt="" coords="805,104,893,131"/>
<area shape="rect" href="interrupt_8c.html#a75ac431d18ce7aff146bef22379c1dcd" title="Interrupt Descriptor Table helpers." alt="" coords="641,79,755,105"/>
<area shape="rect" href="interrupt_8c.html#a79e99b0236c49a7a12d52a2ec74fefa5" title="Creates a trap gate that invokes FUNCTION with the given DPL." alt="" coords="639,129,757,156"/>
<area shape="rect" href="interrupt_8c.html#ab3e596a633d94203771c1a2b10211d90" title="Initializes the interrupt system." alt="" coords="499,28,564,55"/>
<area shape="rect" href="interrupt_8c.html#a7e7d2edfe1ec7f51b54704080de2f4ca" title="Registers interrupt VEC_NO to invoke HANDLER with descriptor privilege level DPL." alt="" coords="472,129,591,156"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,155,88,181"/>
<area shape="rect" href="interrupt_8c.html#a38cd217e72ddb3f58db591a061c99691" title="Registers external interrupt VEC_NO to invoke HANDLER, which is named NAME for debugging purposes." alt="" coords="307,129,424,156"/>
<area shape="rect" href="interrupt_8c.html#a30707611d4360096acf72b3215bdea62" title="Registers internal interrupt VEC_NO to invoke HANDLER, which is named NAME for debugging purposes." alt="" coords="309,256,422,283"/>
<area shape="rect" href="ide_8c.html#a5e8e1409e0675bdd93040403c52dd660" title="Initialize the disk subsystem and detect disks." alt="" coords="165,53,229,80"/>
<area shape="rect" href="kbd_8c.html#a2d4a794658f2ee47f466766d89c6e8e8" title="Initializes the keyboard." alt="" coords="163,104,231,131"/>
<area shape="rect" href="serial_8c.html#a54e99a9877b7ed2a6be751fc43905978" title="Initializes the serial port device for queued interrupt&#45;driven I/O." alt="" coords="136,155,259,181"/>
<area shape="rect" href="timer_8c.html#a7b8ab79df77b57475a5494f5f81c3bd9" title="Sets up the timer to interrupt TIMER_FREQ times per second, and registers the corresponding interrupt..." alt="" coords="159,205,235,232"/>
<area shape="rect" href="exception_8c.html#a9dda131d124b9968825742beac31305d" title="Registers handlers for interrupts that can be caused by user programs." alt="" coords="145,256,249,283"/>
<area shape="rect" href="userprog_2syscall_8c.html#a797876702ac4b3a53fa69839f02642f4" title="userprog/syscall.h" alt="" coords="154,307,241,333"/>
</map>
</div>

</div>
</div>
<a id="afb694fad923f4942cd9de0bd38172b4e" name="afb694fad923f4942cd9de0bd38172b4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb694fad923f4942cd9de0bd38172b4e">&#9670;&nbsp;</a></span>make_idtr_operand()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a> make_idtr_operand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#adf4d876453337156dde61095e1f20223">uint16_t</a>&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>base</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns a descriptor that yields the given LIMIT and BASE when used as an operand for the LIDT instruction. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00333">333</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="interrupt_8c_source.html#l00118">intr_init()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_afb694fad923f4942cd9de0bd38172b4e_icgraph.png" border="0" usemap="#ainterrupt_8c_afb694fad923f4942cd9de0bd38172b4e_icgraph" alt=""/></div>
<map name="ainterrupt_8c_afb694fad923f4942cd9de0bd38172b4e_icgraph" id="ainterrupt_8c_afb694fad923f4942cd9de0bd38172b4e_icgraph">
<area shape="rect" title="Returns a descriptor that yields the given LIMIT and BASE when used as an operand for the LIDT instru..." alt="" coords="249,5,387,32"/>
<area shape="rect" href="interrupt_8c.html#ab3e596a633d94203771c1a2b10211d90" title="Initializes the interrupt system." alt="" coords="136,5,201,32"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,88,32"/>
</map>
</div>

</div>
</div>
<a id="a75ac431d18ce7aff146bef22379c1dcd" name="a75ac431d18ce7aff146bef22379c1dcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75ac431d18ce7aff146bef22379c1dcd">&#9670;&nbsp;</a></span>make_intr_gate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a> make_intr_gate </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dpl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Interrupt Descriptor Table helpers. </p>
<p >Creates an interrupt gate that invokes FUNCTION with the given DPL. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00317">317</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="interrupt_8c_source.html#l00294">make_gate()</a>.</p>

<p class="reference">Referenced by <a class="el" href="interrupt_8c_source.html#l00118">intr_init()</a>, and <a class="el" href="interrupt_8c_source.html#l00165">register_handler()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a75ac431d18ce7aff146bef22379c1dcd_cgraph.png" border="0" usemap="#ainterrupt_8c_a75ac431d18ce7aff146bef22379c1dcd_cgraph" alt=""/></div>
<map name="ainterrupt_8c_a75ac431d18ce7aff146bef22379c1dcd_cgraph" id="ainterrupt_8c_a75ac431d18ce7aff146bef22379c1dcd_cgraph">
<area shape="rect" title="Interrupt Descriptor Table helpers." alt="" coords="5,5,119,32"/>
<area shape="rect" href="interrupt_8c.html#a05aa182a64c4dc89f63a20b96d4628dc" title="Creates an gate that invokes FUNCTION." alt="" coords="167,5,255,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a75ac431d18ce7aff146bef22379c1dcd_icgraph.png" border="0" usemap="#ainterrupt_8c_a75ac431d18ce7aff146bef22379c1dcd_icgraph" alt=""/></div>
<map name="ainterrupt_8c_a75ac431d18ce7aff146bef22379c1dcd_icgraph" id="ainterrupt_8c_a75ac431d18ce7aff146bef22379c1dcd_icgraph">
<area shape="rect" title="Interrupt Descriptor Table helpers." alt="" coords="639,104,752,131"/>
<area shape="rect" href="interrupt_8c.html#ab3e596a633d94203771c1a2b10211d90" title="Initializes the interrupt system." alt="" coords="499,28,564,55"/>
<area shape="rect" href="interrupt_8c.html#a7e7d2edfe1ec7f51b54704080de2f4ca" title="Registers interrupt VEC_NO to invoke HANDLER with descriptor privilege level DPL." alt="" coords="472,129,591,156"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,155,88,181"/>
<area shape="rect" href="interrupt_8c.html#a38cd217e72ddb3f58db591a061c99691" title="Registers external interrupt VEC_NO to invoke HANDLER, which is named NAME for debugging purposes." alt="" coords="307,129,424,156"/>
<area shape="rect" href="interrupt_8c.html#a30707611d4360096acf72b3215bdea62" title="Registers internal interrupt VEC_NO to invoke HANDLER, which is named NAME for debugging purposes." alt="" coords="309,256,422,283"/>
<area shape="rect" href="ide_8c.html#a5e8e1409e0675bdd93040403c52dd660" title="Initialize the disk subsystem and detect disks." alt="" coords="165,53,229,80"/>
<area shape="rect" href="kbd_8c.html#a2d4a794658f2ee47f466766d89c6e8e8" title="Initializes the keyboard." alt="" coords="163,104,231,131"/>
<area shape="rect" href="serial_8c.html#a54e99a9877b7ed2a6be751fc43905978" title="Initializes the serial port device for queued interrupt&#45;driven I/O." alt="" coords="136,155,259,181"/>
<area shape="rect" href="timer_8c.html#a7b8ab79df77b57475a5494f5f81c3bd9" title="Sets up the timer to interrupt TIMER_FREQ times per second, and registers the corresponding interrupt..." alt="" coords="159,205,235,232"/>
<area shape="rect" href="exception_8c.html#a9dda131d124b9968825742beac31305d" title="Registers handlers for interrupts that can be caused by user programs." alt="" coords="145,256,249,283"/>
<area shape="rect" href="userprog_2syscall_8c.html#a797876702ac4b3a53fa69839f02642f4" title="userprog/syscall.h" alt="" coords="154,307,241,333"/>
</map>
</div>

</div>
</div>
<a id="a79e99b0236c49a7a12d52a2ec74fefa5" name="a79e99b0236c49a7a12d52a2ec74fefa5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79e99b0236c49a7a12d52a2ec74fefa5">&#9670;&nbsp;</a></span>make_trap_gate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a> make_trap_gate </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dpl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a trap gate that invokes FUNCTION with the given DPL. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00325">325</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="interrupt_8c_source.html#l00294">make_gate()</a>.</p>

<p class="reference">Referenced by <a class="el" href="interrupt_8c_source.html#l00165">register_handler()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a79e99b0236c49a7a12d52a2ec74fefa5_cgraph.png" border="0" usemap="#ainterrupt_8c_a79e99b0236c49a7a12d52a2ec74fefa5_cgraph" alt=""/></div>
<map name="ainterrupt_8c_a79e99b0236c49a7a12d52a2ec74fefa5_cgraph" id="ainterrupt_8c_a79e99b0236c49a7a12d52a2ec74fefa5_cgraph">
<area shape="rect" title="Creates a trap gate that invokes FUNCTION with the given DPL." alt="" coords="5,5,124,32"/>
<area shape="rect" href="interrupt_8c.html#a05aa182a64c4dc89f63a20b96d4628dc" title="Creates an gate that invokes FUNCTION." alt="" coords="172,5,260,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a79e99b0236c49a7a12d52a2ec74fefa5_icgraph.png" border="0" usemap="#ainterrupt_8c_a79e99b0236c49a7a12d52a2ec74fefa5_icgraph" alt=""/></div>
<map name="ainterrupt_8c_a79e99b0236c49a7a12d52a2ec74fefa5_icgraph" id="ainterrupt_8c_a79e99b0236c49a7a12d52a2ec74fefa5_icgraph">
<area shape="rect" title="Creates a trap gate that invokes FUNCTION with the given DPL." alt="" coords="639,157,757,184"/>
<area shape="rect" href="interrupt_8c.html#a7e7d2edfe1ec7f51b54704080de2f4ca" title="Registers interrupt VEC_NO to invoke HANDLER with descriptor privilege level DPL." alt="" coords="472,157,591,184"/>
<area shape="rect" href="interrupt_8c.html#a38cd217e72ddb3f58db591a061c99691" title="Registers external interrupt VEC_NO to invoke HANDLER, which is named NAME for debugging purposes." alt="" coords="307,107,424,133"/>
<area shape="rect" href="interrupt_8c.html#a30707611d4360096acf72b3215bdea62" title="Registers internal interrupt VEC_NO to invoke HANDLER, which is named NAME for debugging purposes." alt="" coords="309,208,422,235"/>
<area shape="rect" href="ide_8c.html#a5e8e1409e0675bdd93040403c52dd660" title="Initialize the disk subsystem and detect disks." alt="" coords="165,5,229,32"/>
<area shape="rect" href="kbd_8c.html#a2d4a794658f2ee47f466766d89c6e8e8" title="Initializes the keyboard." alt="" coords="163,56,231,83"/>
<area shape="rect" href="serial_8c.html#a54e99a9877b7ed2a6be751fc43905978" title="Initializes the serial port device for queued interrupt&#45;driven I/O." alt="" coords="136,107,259,133"/>
<area shape="rect" href="timer_8c.html#a7b8ab79df77b57475a5494f5f81c3bd9" title="Sets up the timer to interrupt TIMER_FREQ times per second, and registers the corresponding interrupt..." alt="" coords="159,157,235,184"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,132,88,159"/>
<area shape="rect" href="exception_8c.html#a9dda131d124b9968825742beac31305d" title="Registers handlers for interrupts that can be caused by user programs." alt="" coords="145,208,249,235"/>
<area shape="rect" href="userprog_2syscall_8c.html#a797876702ac4b3a53fa69839f02642f4" title="userprog/syscall.h" alt="" coords="154,259,241,285"/>
</map>
</div>

</div>
</div>
<a id="a63cfe8a21a3d7aca438e577f8ed5c50f" name="a63cfe8a21a3d7aca438e577f8ed5c50f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63cfe8a21a3d7aca438e577f8ed5c50f">&#9670;&nbsp;</a></span>pic_end_of_interrupt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pic_end_of_interrupt </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>irq</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an end-of-interrupt signal to the PIC for the given IRQ. </p>
<p >If we don't acknowledge the IRQ, it will never be delivered to us again, so this is important. <br  />
 </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00265">265</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, and <a class="el" href="io_8h_source.html#l00066">outb()</a>.</p>

<p class="reference">Referenced by <a class="el" href="interrupt_8c_source.html#l00345">intr_handler()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a63cfe8a21a3d7aca438e577f8ed5c50f_cgraph.png" border="0" usemap="#ainterrupt_8c_a63cfe8a21a3d7aca438e577f8ed5c50f_cgraph" alt=""/></div>
<map name="ainterrupt_8c_a63cfe8a21a3d7aca438e577f8ed5c50f_cgraph" id="ainterrupt_8c_a63cfe8a21a3d7aca438e577f8ed5c50f_cgraph">
<area shape="rect" title="Sends an end&#45;of&#45;interrupt signal to the PIC for the given IRQ." alt="" coords="5,5,149,32"/>
<area shape="rect" href="io_8h.html#a903c588b94e0e8386c8a6f8caa4a5a72" title="Writes byte DATA to PORT." alt="" coords="197,5,245,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a63cfe8a21a3d7aca438e577f8ed5c50f_icgraph.png" border="0" usemap="#ainterrupt_8c_a63cfe8a21a3d7aca438e577f8ed5c50f_icgraph" alt=""/></div>
<map name="ainterrupt_8c_a63cfe8a21a3d7aca438e577f8ed5c50f_icgraph" id="ainterrupt_8c_a63cfe8a21a3d7aca438e577f8ed5c50f_icgraph">
<area shape="rect" title="Sends an end&#45;of&#45;interrupt signal to the PIC for the given IRQ." alt="" coords="145,5,289,32"/>
<area shape="rect" href="interrupt_8c.html#ad2ddb6c69915597ee636e732afa5795a" title="Interrupt handlers." alt="" coords="5,5,97,32"/>
</map>
</div>

</div>
</div>
<a id="a69ce22b1b1b67b59d13ee72c00570274" name="a69ce22b1b1b67b59d13ee72c00570274"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69ce22b1b1b67b59d13ee72c00570274">&#9670;&nbsp;</a></span>pic_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pic_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Programmable Interrupt Controller helpers. </p>
<p >8259A Programmable Interrupt Controller.</p>
<p >Initializes the PICs. Refer to [8259A] for details.</p>
<p >By default, interrupts 0...15 delivered by the PICs will go to interrupt vectors 0...15. Those vectors are also used for CPU traps and exceptions, so we reprogram the PICs so that interrupts 0...15 are delivered to interrupt vectors 32...47 (0x20...0x2f) instead. </p>
<p >&lt; ICW1: single mode, edge triggered, expect ICW4.</p>
<p >&lt; ICW2: line IR0...7 -&gt; irq 0x20...0x27.</p>
<p >&lt; ICW3: slave PIC on line IR2.</p>
<p >&lt; ICW4: 8086 mode, normal EOI, non-buffered.</p>
<p >&lt; ICW1: single mode, edge triggered, expect ICW4.</p>
<p >&lt; ICW2: line IR0...7 -&gt; irq 0x28...0x2f.</p>
<p >&lt; ICW3: slave ID is 2.</p>
<p >&lt; ICW4: 8086 mode, normal EOI, non-buffered.</p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00238">238</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="io_8h_source.html#l00066">outb()</a>, <a class="el" href="interrupt_8c_source.html#l00016">PIC0_CTRL</a>, <a class="el" href="interrupt_8c_source.html#l00017">PIC0_DATA</a>, <a class="el" href="interrupt_8c_source.html#l00018">PIC1_CTRL</a>, and <a class="el" href="interrupt_8c_source.html#l00019">PIC1_DATA</a>.</p>

<p class="reference">Referenced by <a class="el" href="interrupt_8c_source.html#l00118">intr_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a69ce22b1b1b67b59d13ee72c00570274_cgraph.png" border="0" usemap="#ainterrupt_8c_a69ce22b1b1b67b59d13ee72c00570274_cgraph" alt=""/></div>
<map name="ainterrupt_8c_a69ce22b1b1b67b59d13ee72c00570274_cgraph" id="ainterrupt_8c_a69ce22b1b1b67b59d13ee72c00570274_cgraph">
<area shape="rect" title="Programmable Interrupt Controller helpers." alt="" coords="5,5,69,32"/>
<area shape="rect" href="io_8h.html#a903c588b94e0e8386c8a6f8caa4a5a72" title="Writes byte DATA to PORT." alt="" coords="117,5,165,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a69ce22b1b1b67b59d13ee72c00570274_icgraph.png" border="0" usemap="#ainterrupt_8c_a69ce22b1b1b67b59d13ee72c00570274_icgraph" alt=""/></div>
<map name="ainterrupt_8c_a69ce22b1b1b67b59d13ee72c00570274_icgraph" id="ainterrupt_8c_a69ce22b1b1b67b59d13ee72c00570274_icgraph">
<area shape="rect" title="Programmable Interrupt Controller helpers." alt="" coords="249,5,313,32"/>
<area shape="rect" href="interrupt_8c.html#ab3e596a633d94203771c1a2b10211d90" title="Initializes the interrupt system." alt="" coords="136,5,201,32"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,88,32"/>
</map>
</div>

</div>
</div>
<a id="a7e7d2edfe1ec7f51b54704080de2f4ca" name="a7e7d2edfe1ec7f51b54704080de2f4ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e7d2edfe1ec7f51b54704080de2f4ca">&#9670;&nbsp;</a></span>register_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void register_handler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="stdint_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>vec_no</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dpl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="interrupt_8h.html#ac5ca1b946321e42624b327f0dc872b60">intr_level</a>&#160;</td>
          <td class="paramname"><em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interrupt_8h.html#ac2d4246bbf5f813282d9458d87bf798d">intr_handler_func</a> *&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Registers interrupt VEC_NO to invoke HANDLER with descriptor privilege level DPL. </p>
<p >Names the interrupt NAME for debugging purposes. The interrupt handler will be invoked with interrupt status set to LEVEL. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00165">165</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="interrupt_8c_source.html#l00028">idt</a>, <a class="el" href="interrupt_8c_source.html#l00031">intr_handlers</a>, <a class="el" href="interrupt_8c_source.html#l00034">intr_names</a>, <a class="el" href="interrupt_8h_source.html#l00011">INTR_ON</a>, <a class="el" href="intr-stubs_8h.html#a29c0ec17ba73daf91ac6e4cd8b6d2c7b">intr_stubs</a>, <a class="el" href="interrupt_8c_source.html#l00317">make_intr_gate()</a>, <a class="el" href="interrupt_8c_source.html#l00325">make_trap_gate()</a>, <a class="el" href="insult_8c_source.html#l00047">name</a>, and <a class="el" href="stddef_8h_source.html#l00004">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="interrupt_8c_source.html#l00181">intr_register_ext()</a>, and <a class="el" href="interrupt_8c_source.html#l00202">intr_register_int()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a7e7d2edfe1ec7f51b54704080de2f4ca_cgraph.png" border="0" usemap="#ainterrupt_8c_a7e7d2edfe1ec7f51b54704080de2f4ca_cgraph" alt=""/></div>
<map name="ainterrupt_8c_a7e7d2edfe1ec7f51b54704080de2f4ca_cgraph" id="ainterrupt_8c_a7e7d2edfe1ec7f51b54704080de2f4ca_cgraph">
<area shape="rect" title="Registers interrupt VEC_NO to invoke HANDLER with descriptor privilege level DPL." alt="" coords="5,31,124,57"/>
<area shape="rect" href="interrupt_8c.html#a75ac431d18ce7aff146bef22379c1dcd" title="Interrupt Descriptor Table helpers." alt="" coords="175,5,288,32"/>
<area shape="rect" href="interrupt_8c.html#a79e99b0236c49a7a12d52a2ec74fefa5" title="Creates a trap gate that invokes FUNCTION with the given DPL." alt="" coords="172,56,291,83"/>
<area shape="rect" href="interrupt_8c.html#a05aa182a64c4dc89f63a20b96d4628dc" title="Creates an gate that invokes FUNCTION." alt="" coords="339,31,427,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a7e7d2edfe1ec7f51b54704080de2f4ca_icgraph.png" border="0" usemap="#ainterrupt_8c_a7e7d2edfe1ec7f51b54704080de2f4ca_icgraph" alt=""/></div>
<map name="ainterrupt_8c_a7e7d2edfe1ec7f51b54704080de2f4ca_icgraph" id="ainterrupt_8c_a7e7d2edfe1ec7f51b54704080de2f4ca_icgraph">
<area shape="rect" title="Registers interrupt VEC_NO to invoke HANDLER with descriptor privilege level DPL." alt="" coords="472,157,591,184"/>
<area shape="rect" href="interrupt_8c.html#a38cd217e72ddb3f58db591a061c99691" title="Registers external interrupt VEC_NO to invoke HANDLER, which is named NAME for debugging purposes." alt="" coords="307,107,424,133"/>
<area shape="rect" href="interrupt_8c.html#a30707611d4360096acf72b3215bdea62" title="Registers internal interrupt VEC_NO to invoke HANDLER, which is named NAME for debugging purposes." alt="" coords="309,208,422,235"/>
<area shape="rect" href="ide_8c.html#a5e8e1409e0675bdd93040403c52dd660" title="Initialize the disk subsystem and detect disks." alt="" coords="165,5,229,32"/>
<area shape="rect" href="kbd_8c.html#a2d4a794658f2ee47f466766d89c6e8e8" title="Initializes the keyboard." alt="" coords="163,56,231,83"/>
<area shape="rect" href="serial_8c.html#a54e99a9877b7ed2a6be751fc43905978" title="Initializes the serial port device for queued interrupt&#45;driven I/O." alt="" coords="136,107,259,133"/>
<area shape="rect" href="timer_8c.html#a7b8ab79df77b57475a5494f5f81c3bd9" title="Sets up the timer to interrupt TIMER_FREQ times per second, and registers the corresponding interrupt..." alt="" coords="159,157,235,184"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,132,88,159"/>
<area shape="rect" href="exception_8c.html#a9dda131d124b9968825742beac31305d" title="Registers handlers for interrupts that can be caused by user programs." alt="" coords="145,208,249,235"/>
<area shape="rect" href="userprog_2syscall_8c.html#a797876702ac4b3a53fa69839f02642f4" title="userprog/syscall.h" alt="" coords="154,259,241,285"/>
</map>
</div>

</div>
</div>
<a id="a2511f618361b04d286de89201486d01a" name="a2511f618361b04d286de89201486d01a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2511f618361b04d286de89201486d01a">&#9670;&nbsp;</a></span>unexpected_interrupt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void unexpected_interrupt </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structintr__frame.html">intr_frame</a> *&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles an unexpected interrupt with interrupt frame F. </p>
<p >An unexpected interrupt is one that has no registered handler. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00394">394</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">References <a class="el" href="interrupt_8c_source.html#l00034">intr_names</a>, <a class="el" href="lib_2stdio_8c_source.html#l00079">printf()</a>, <a class="el" href="interrupt_8c_source.html#l00038">unexpected_cnt</a>, and <a class="el" href="interrupt_8h_source.html#l00035">intr_frame::vec_no</a>.</p>

<p class="reference">Referenced by <a class="el" href="interrupt_8c_source.html#l00345">intr_handler()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a2511f618361b04d286de89201486d01a_cgraph.png" border="0" usemap="#ainterrupt_8c_a2511f618361b04d286de89201486d01a_cgraph" alt=""/></div>
<map name="ainterrupt_8c_a2511f618361b04d286de89201486d01a_cgraph" id="ainterrupt_8c_a2511f618361b04d286de89201486d01a_cgraph">
<area shape="rect" title="Handles an unexpected interrupt with interrupt frame F." alt="" coords="5,284,152,311"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="200,284,252,311"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="300,284,359,311"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="421,157,495,184"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="1043,309,1161,336"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="876,259,995,285"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="407,783,509,809"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="591,208,657,235"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="570,5,678,32"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="574,56,674,83"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="561,107,687,133"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="593,157,655,184"/>
<area shape="rect" href="lib_2stdio_8c.html#a9248d4643c7dd4c03f632fb1ce2b9d5f" title="Writes CH to OUTPUT with auxiliary data AUX, CNT times." alt="" coords="739,31,828,57"/>
<area shape="rect" href="ctype_8h.html#ad7fd5ce3790b81c86de5502ff6853f3a" title=" " alt="" coords="755,107,811,133"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1965,395,2056,421"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1253,563,1350,589"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1441,395,1591,437"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1797,597,1907,624"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1469,699,1563,725"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1972,699,2049,725"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1955,623,2067,649"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1807,1053,1897,1080"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1644,1003,1744,1029"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1639,800,1749,827"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1645,699,1743,725"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1960,1180,2061,1207"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1808,1003,1896,1029"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1818,800,1886,827"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1813,851,1891,877"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="1814,699,1890,725"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="1053,512,1151,539"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1263,888,1340,915"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1475,775,1557,801"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1465,863,1567,889"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1459,913,1573,940"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="557,995,691,1021"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="1209,294,1393,335"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="740,1205,827,1232"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="1478,1496,1554,1523"/>
<area shape="rect" href="serial_8c.html#aa1fb82a5be4690023966ea841c88a624" title="Initializes the serial port device for polling mode." alt="" coords="902,1205,969,1232"/>
<area shape="rect" href="intq_8c.html#aff4db6a96c4a1fb6898f26451a1049c2" title="Returns true if Q is full, false otherwise." alt="" coords="1068,1357,1136,1384"/>
<area shape="rect" href="intq_8c.html#a45ba970f3357ff262d7fafecc50735c6" title="Removes a byte from Q and returns it." alt="" coords="897,512,973,539"/>
<area shape="rect" href="intq_8c.html#a6a440110d5417c12cedf1c2e86f445f8" title="Adds BYTE to the end of Q." alt="" coords="897,981,973,1008"/>
<area shape="rect" href="serial_8c.html#a15fd75cc421e6379650204e80853a68a" title="Polls the serial port until it&#39;s ready, and then transmits BYTE." alt="" coords="1064,1307,1140,1333"/>
<area shape="rect" href="serial_8c.html#ac89212325aed0ffe38beb0b4bde0bf30" title="Update interrupt enable register." alt="" coords="1265,1408,1337,1435"/>
<area shape="rect" href="vga_8c.html#a45d8235ab0187a7c0391d0c749317856" title="Clears the screen and moves the cursor to the upper left." alt="" coords="1675,1560,1713,1587"/>
<area shape="rect" href="vga_8c.html#ac16dc5267953b78624e2ed568776a04b" title="Moves the hardware cursor to (cx,cy)." alt="" coords="1803,1535,1901,1561"/>
<area shape="rect" href="vga_8c.html#a17fb021b480a1f220d2579807fa2e398" title="Initializes the VGA text display." alt="" coords="1675,1611,1713,1637"/>
<area shape="rect" href="vga_8c.html#abc92c781510c5f99670802f3c65ebb01" title="Advances the cursor to the first column in the next line on the screen." alt="" coords="1661,1661,1727,1688"/>
<area shape="rect" href="speaker_8c.html#a1326dce269503d1ba9fac4e40cdf453e" title="Briefly beep the PC speaker." alt="" coords="1641,1459,1747,1485"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="interrupt_8c_a2511f618361b04d286de89201486d01a_icgraph.png" border="0" usemap="#ainterrupt_8c_a2511f618361b04d286de89201486d01a_icgraph" alt=""/></div>
<map name="ainterrupt_8c_a2511f618361b04d286de89201486d01a_icgraph" id="ainterrupt_8c_a2511f618361b04d286de89201486d01a_icgraph">
<area shape="rect" title="Handles an unexpected interrupt with interrupt frame F." alt="" coords="145,5,292,32"/>
<area shape="rect" href="interrupt_8c.html#ad2ddb6c69915597ee636e732afa5795a" title="Interrupt handlers." alt="" coords="5,5,97,32"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a07426293e17a012c812c018623db194b" name="a07426293e17a012c812c018623db194b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07426293e17a012c812c018623db194b">&#9670;&nbsp;</a></span>idt</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdint_8h.html#ad27ed092432b64ff558d2254c278720f">uint64_t</a> idt[<a class="el" href="interrupt_8c.html#af7f76dfefd450f2e627e79ed5293a4a7">INTR_CNT</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The Interrupt Descriptor Table (IDT). </p>
<p >The format is fixed by the CPU. See [IA32-v3a] sections 5.10 "Interrupt Descriptor
Table (IDT)", 5.11 "IDT Descriptors", 5.12.1.2 "Flag Usage By
Exception- or Interrupt-Handler Procedure". </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00028">28</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="interrupt_8c_source.html#l00118">intr_init()</a>, and <a class="el" href="interrupt_8c_source.html#l00165">register_handler()</a>.</p>

</div>
</div>
<a id="acc7060995afd44754ae1604bc94b50ec" name="acc7060995afd44754ae1604bc94b50ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc7060995afd44754ae1604bc94b50ec">&#9670;&nbsp;</a></span>in_external_intr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> in_external_intr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>External interrupts are those generated by devices outside the CPU, such as the timer. </p>
<p >External interrupts run with interrupts turned off, so they never nest, nor are they ever pre-empted. Handlers for external interrupts also may not sleep, although they may invoke <a class="el" href="interrupt_8c.html#a55213985fa8103301b86b15509d78243" title="During processing of an external interrupt, directs the interrupt handler to yield to a new process j...">intr_yield_on_return()</a> to request that a new process be scheduled just before the interrupt returns. Are we processing an external interrupt? </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00047">47</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="interrupt_8c_source.html#l00212">intr_context()</a>, and <a class="el" href="interrupt_8c_source.html#l00345">intr_handler()</a>.</p>

</div>
</div>
<a id="a842bb512b8304a34727a61157b76d77a" name="a842bb512b8304a34727a61157b76d77a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a842bb512b8304a34727a61157b76d77a">&#9670;&nbsp;</a></span>intr_handlers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interrupt_8h.html#ac2d4246bbf5f813282d9458d87bf798d">intr_handler_func</a>* intr_handlers[<a class="el" href="interrupt_8c.html#af7f76dfefd450f2e627e79ed5293a4a7">INTR_CNT</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Interrupt handler functions for each interrupt. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00031">31</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="interrupt_8c_source.html#l00345">intr_handler()</a>, and <a class="el" href="interrupt_8c_source.html#l00165">register_handler()</a>.</p>

</div>
</div>
<a id="aa22cb5ab342a7801cc353a6138e8ecf6" name="aa22cb5ab342a7801cc353a6138e8ecf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa22cb5ab342a7801cc353a6138e8ecf6">&#9670;&nbsp;</a></span>intr_names</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* intr_names[<a class="el" href="interrupt_8c.html#af7f76dfefd450f2e627e79ed5293a4a7">INTR_CNT</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Names for each interrupt, for debugging purposes. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00034">34</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="interrupt_8c_source.html#l00411">intr_dump_frame()</a>, <a class="el" href="interrupt_8c_source.html#l00118">intr_init()</a>, <a class="el" href="interrupt_8c_source.html#l00435">intr_name()</a>, <a class="el" href="interrupt_8c_source.html#l00165">register_handler()</a>, and <a class="el" href="interrupt_8c_source.html#l00394">unexpected_interrupt()</a>.</p>

</div>
</div>
<a id="a49a36e04fc94fdb89ca5b0df20e20c42" name="a49a36e04fc94fdb89ca5b0df20e20c42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49a36e04fc94fdb89ca5b0df20e20c42">&#9670;&nbsp;</a></span>unexpected_cnt</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int unexpected_cnt[<a class="el" href="interrupt_8c.html#af7f76dfefd450f2e627e79ed5293a4a7">INTR_CNT</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of unexpected interrupts for each vector. </p>
<p >An unexpected interrupt is one that has no registered handler. </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00038">38</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="interrupt_8c_source.html#l00394">unexpected_interrupt()</a>.</p>

</div>
</div>
<a id="af1d16be73ef9865bacd2c41ebd6f6d0c" name="af1d16be73ef9865bacd2c41ebd6f6d0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1d16be73ef9865bacd2c41ebd6f6d0c">&#9670;&nbsp;</a></span>yield_on_return</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> yield_on_return</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Should we yield on interrupt return? </p>

<p class="definition">Definition at line <a class="el" href="interrupt_8c_source.html#l00048">48</a> of file <a class="el" href="interrupt_8c_source.html">interrupt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="interrupt_8c_source.html#l00345">intr_handler()</a>, and <a class="el" href="interrupt_8c_source.html#l00222">intr_yield_on_return()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 4 2021 19:31:06 for PKUOS - Pintos by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
