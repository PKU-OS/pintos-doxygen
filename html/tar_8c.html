<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PKUOS - Pintos: src/tests/filesys/extended/tar.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PKUOS - Pintos
   </div>
   <div id="projectbrief">Pintos source browser for PKU Operating System course</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_d93a1d4020dea85bb71b237545b5e722.html">tests</a></li><li class="navelem"><a class="el" href="dir_3f705688ff1c1f6cb6eb4137373c86f7.html">filesys</a></li><li class="navelem"><a class="el" href="dir_28a68e1faec239dd6dfc97018b53ee54.html">extended</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">tar.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="ustar_8h_source.html">ustar.h</a>&gt;</code><br />
<code>#include &lt;syscall.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;<a class="el" href="string_8h_source.html">string.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for tar.c:</div>
<div class="dyncontent">
<div class="center"><img src="tar_8c__incl.png" border="0" usemap="#asrc_2tests_2filesys_2extended_2tar_8c" alt=""/></div>
<map name="asrc_2tests_2filesys_2extended_2tar_8c" id="asrc_2tests_2filesys_2extended_2tar_8c">
<area shape="rect" title=" " alt="" coords="95,5,266,47"/>
<area shape="rect" href="ustar_8h.html" title=" " alt="" coords="12,95,75,121"/>
<area shape="rect" title=" " alt="" coords="99,95,172,121"/>
<area shape="rect" title=" " alt="" coords="197,95,258,121"/>
<area shape="rect" href="string_8h.html" title=" " alt="" coords="283,95,348,121"/>
<area shape="rect" href="stdbool_8h.html" title=" " alt="" coords="5,169,81,196"/>
<area shape="rect" href="stddef_8h.html" title=" " alt="" coords="281,169,350,196"/>
</map>
</div>
</div>
<p><a href="tar_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad96d407a911fbb914fa8e4cfbf2faf0f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tar_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f">usage</a> (void)</td></tr>
<tr class="memdesc:ad96d407a911fbb914fa8e4cfbf2faf0f"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="tar_8c.html">tar.c</a>  <a href="tar_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f">More...</a><br /></td></tr>
<tr class="separator:ad96d407a911fbb914fa8e4cfbf2faf0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5758c0d6627e2210b6e18ec360169e91"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tar_8c.html#a5758c0d6627e2210b6e18ec360169e91">make_tar_archive</a> (const char *archive_name, char *files[], <a class="el" href="stddef_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> file_cnt)</td></tr>
<tr class="separator:a5758c0d6627e2210b6e18ec360169e91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tar_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a736a422fc49cb04f6601997fb136c19c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tar_8c.html#a736a422fc49cb04f6601997fb136c19c">archive_file</a> (char <a class="el" href="syn-rw_8h.html#a88c223d2a4e2c9bc84fe0551d812d1c5">file_name</a>[], <a class="el" href="stddef_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> file_name_size, int archive_fd, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> *write_error)</td></tr>
<tr class="separator:a736a422fc49cb04f6601997fb136c19c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95557238bd1ce1ece7c3859eff9888dc"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tar_8c.html#a95557238bd1ce1ece7c3859eff9888dc">archive_ordinary_file</a> (const char *<a class="el" href="syn-rw_8h.html#a88c223d2a4e2c9bc84fe0551d812d1c5">file_name</a>, int file_fd, int archive_fd, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> *write_error)</td></tr>
<tr class="separator:a95557238bd1ce1ece7c3859eff9888dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11d3fc4ba0c33158e98b91bd973212f9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tar_8c.html#a11d3fc4ba0c33158e98b91bd973212f9">archive_directory</a> (char <a class="el" href="syn-rw_8h.html#a88c223d2a4e2c9bc84fe0551d812d1c5">file_name</a>[], <a class="el" href="stddef_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a> file_name_size, int file_fd, int archive_fd, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> *write_error)</td></tr>
<tr class="separator:a11d3fc4ba0c33158e98b91bd973212f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeae922065d4290e3c877a5f3a5d7a824"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tar_8c.html#aeae922065d4290e3c877a5f3a5d7a824">write_header</a> (const char *<a class="el" href="syn-rw_8h.html#a88c223d2a4e2c9bc84fe0551d812d1c5">file_name</a>, enum <a class="el" href="ustar_8h.html#a568552540e7f88c695b72c238c009837">ustar_type</a>, int size, int archive_fd, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> *write_error)</td></tr>
<tr class="separator:aeae922065d4290e3c877a5f3a5d7a824"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed54c3c43e1f39c75bd51bf2b7107c6b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tar_8c.html#aed54c3c43e1f39c75bd51bf2b7107c6b">do_write</a> (int fd, const char *<a class="el" href="input_8c.html#a02352b0fa3692f7c9029b2e12edcdbb6">buffer</a>, int size, <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> *write_error)</td></tr>
<tr class="separator:aed54c3c43e1f39c75bd51bf2b7107c6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a11d3fc4ba0c33158e98b91bd973212f9" name="a11d3fc4ba0c33158e98b91bd973212f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11d3fc4ba0c33158e98b91bd973212f9">&#9670;&nbsp;</a></span>archive_directory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> archive_directory </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>file_name</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stddef_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>file_name_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>file_fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>archive_fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> *&#160;</td>
          <td class="paramname"><em>write_error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tar_8c_source.html#l00160">160</a> of file <a class="el" href="tar_8c_source.html">tar.c</a>.</p>

<p class="reference">References <a class="el" href="tar_8c_source.html#l00089">archive_file()</a>, <a class="el" href="syn-read_8h_source.html#l00005">file_name</a>, <a class="el" href="lib_2stdio_8c_source.html#l00079">printf()</a>, <a class="el" href="lib_2user_2syscall_8c_source.html#l00169">readdir()</a>, <a class="el" href="lib_2user_2syscall_8h_source.html#l00016">READDIR_MAX_LEN</a>, <a class="el" href="string_8c_source.html#l00293">strlen()</a>, <a class="el" href="ustar_8h_source.html#l00016">USTAR_DIRECTORY</a>, and <a class="el" href="tar_8c_source.html#l00186">write_header()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tar_8c_source.html#l00089">archive_file()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tar_8c_a11d3fc4ba0c33158e98b91bd973212f9_cgraph.png" border="0" usemap="#atar_8c_a11d3fc4ba0c33158e98b91bd973212f9_cgraph" alt=""/></div>
<map name="atar_8c_a11d3fc4ba0c33158e98b91bd973212f9_cgraph" id="atar_8c_a11d3fc4ba0c33158e98b91bd973212f9_cgraph">
<area shape="rect" title=" " alt="" coords="5,220,129,247"/>
<area shape="rect" href="tar_8c.html#a736a422fc49cb04f6601997fb136c19c" title=" " alt="" coords="177,220,267,247"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="899,296,951,323"/>
<area shape="rect" href="tar_8c.html#aeae922065d4290e3c877a5f3a5d7a824" title=" " alt="" coords="508,499,607,525"/>
<area shape="rect" href="string_8c.html#a2869404e70f06f4477271f26ce8c4920" title="Returns the length of STRING." alt="" coords="1066,448,1121,475"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a0aa847a91eaead434f068da636ec821f" title=" " alt="" coords="190,448,254,475"/>
<area shape="rect" href="tar_8c.html#a95557238bd1ce1ece7c3859eff9888dc" title=" " alt="" coords="315,347,460,373"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a5bbe56a416af8f77723b652362f742f7" title=" " alt="" coords="361,144,414,171"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a7e7eb2098a672ca4e4bf2a95b11d1aee" title="lib/user/syscall.h" alt="" coords="352,245,423,272"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#aad8fb521859618a34294cb6b71e92209" title=" " alt="" coords="364,296,411,323"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a703a13bc53a317ea70b87280ad3d974e" title=" " alt="" coords="361,93,413,120"/>
<area shape="rect" href="tar_8c.html#aed54c3c43e1f39c75bd51bf2b7107c6b" title=" " alt="" coords="689,347,761,373"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a2aff9d03d32ff7fbc2885fdb1a1b8deb" title=" " alt="" coords="526,245,589,272"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="890,397,959,424"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#ab0f9f22d375a9229b3c77859cf2035a0" title=" " alt="" coords="533,397,582,424"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a7d9f2533bbf31e3d1d4c5e1454efd41d" title=" " alt="" coords="899,347,950,373"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="1064,341,1123,368"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="1202,612,1275,639"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="1353,472,1471,499"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="1353,240,1471,267"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="1187,341,1290,368"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="1379,587,1445,613"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="1358,688,1466,715"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="1362,739,1462,765"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="1349,637,1475,664"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="1381,536,1443,563"/>
<area shape="rect" href="lib_2stdio_8c.html#a9248d4643c7dd4c03f632fb1ce2b9d5f" title="Writes CH to OUTPUT with auxiliary data AUX, CNT times." alt="" coords="1574,713,1663,740"/>
<area shape="rect" href="ctype_8h.html#ad7fd5ce3790b81c86de5502ff6853f3a" title=" " alt="" coords="1591,637,1647,664"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1965,451,2056,477"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1570,568,1667,595"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1759,502,1908,543"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1956,619,2065,645"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1787,619,1880,645"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="1570,240,1667,267"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1795,240,1872,267"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="1345,341,1479,368"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="1527,393,1711,434"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="1575,291,1662,317"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="1581,341,1657,368"/>
<area shape="rect" href="ustar_8c.html#a7df8da167076821f714ddcf58700a26b" title="Composes HEADER as a USTAR_HEADER_SIZE (512)&#45;byte archive header in ustar format for a SIZE&#45;byte file..." alt="" coords="655,499,795,525"/>
<area shape="rect" href="ustar_8c.html#a4abd06a3432f80c53d46dfa9fdf6204a" title="Returns the checksum for the given ustar format HEADER." alt="" coords="861,499,989,525"/>
<area shape="rect" href="lib_2stdio_8c.html#a913035b9a30cd1b34c5e587dfbf26f92" title="Like printf(), except that output is stored into BUFFER, which must have space for BUF_SIZE character..." alt="" coords="892,676,957,703"/>
<area shape="rect" href="ustar_8c.html#af69b8645dfc7ba2cbfcc8bbf8ffae4e5" title="Drop possibly dangerous prefixes from FILE_NAME and return the stripped name." alt="" coords="843,600,1007,627"/>
<area shape="rect" href="string_8c.html#a4637af6f79bac4043e1064f0837d0ddc" title="Copies string SRC to DST." alt="" coords="895,549,955,576"/>
<area shape="rect" href="lib_2stdio_8c.html#a1286c6b071007938f54e9b859109f89d" title="Like vprintf(), except that output is stored into BUFFER, which must have space for BUF_SIZE characte..." alt="" coords="1057,701,1129,728"/>
<area shape="rect" href="lib_2stdio_8c.html#acdff2b19969329b7777564346ac98c5d" title="Helper function for vsnprintf()." alt="" coords="1180,701,1297,728"/>
<area shape="rect" href="string_8c.html#a19c6163b9e87b586f4ddb7773faf9172" title="Find the first differing byte in the two blocks of SIZE bytes at A and B." alt="" coords="1055,549,1132,576"/>
<area shape="rect" href="string_8c.html#a0b5ce5a348a2190d38480f0478405a6c" title="Finds and returns the first occurrence of C in STRING, or a null pointer if C does not appear in STRI..." alt="" coords="1065,600,1121,627"/>
<area shape="rect" href="string_8c.html#ae99b71772ffcf066739c8568013425e3" title="Finds the first differing characters in strings A and B." alt="" coords="1062,651,1125,677"/>
<area shape="rect" href="string_8c.html#a75301dc67774ade574b3b3205ee4f39e" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="1057,499,1129,525"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tar_8c_a11d3fc4ba0c33158e98b91bd973212f9_icgraph.png" border="0" usemap="#atar_8c_a11d3fc4ba0c33158e98b91bd973212f9_icgraph" alt=""/></div>
<map name="atar_8c_a11d3fc4ba0c33158e98b91bd973212f9_icgraph" id="atar_8c_a11d3fc4ba0c33158e98b91bd973212f9_icgraph">
<area shape="rect" title=" " alt="" coords="417,5,541,32"/>
<area shape="rect" href="tar_8c.html#a736a422fc49cb04f6601997fb136c19c" title=" " alt="" coords="280,5,369,32"/>
<area shape="rect" href="tar_8c.html#a5758c0d6627e2210b6e18ec360169e91" title=" " alt="" coords="104,5,232,32"/>
<area shape="rect" href="tar_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="a736a422fc49cb04f6601997fb136c19c" name="a736a422fc49cb04f6601997fb136c19c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a736a422fc49cb04f6601997fb136c19c">&#9670;&nbsp;</a></span>archive_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> archive_file </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>file_name</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stddef_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>file_name_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>archive_fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> *&#160;</td>
          <td class="paramname"><em>write_error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tar_8c_source.html#l00089">89</a> of file <a class="el" href="tar_8c_source.html">tar.c</a>.</p>

<p class="reference">References <a class="el" href="tar_8c_source.html#l00160">archive_directory()</a>, <a class="el" href="tar_8c_source.html#l00124">archive_ordinary_file()</a>, <a class="el" href="lib_2user_2syscall_8c_source.html#l00139">close()</a>, <a class="el" href="syn-read_8h_source.html#l00005">file_name</a>, <a class="el" href="lib_2user_2syscall_8c_source.html#l00181">inumber()</a>, <a class="el" href="lib_2user_2syscall_8c_source.html#l00175">isdir()</a>, <a class="el" href="lib_2user_2syscall_8c_source.html#l00103">open()</a>, and <a class="el" href="lib_2stdio_8c_source.html#l00079">printf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tar_8c_source.html#l00160">archive_directory()</a>, and <a class="el" href="tar_8c_source.html#l00049">make_tar_archive()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tar_8c_a736a422fc49cb04f6601997fb136c19c_cgraph.png" border="0" usemap="#atar_8c_a736a422fc49cb04f6601997fb136c19c_cgraph" alt=""/></div>
<map name="atar_8c_a736a422fc49cb04f6601997fb136c19c_cgraph" id="atar_8c_a736a422fc49cb04f6601997fb136c19c_cgraph">
<area shape="rect" title=" " alt="" coords="5,447,95,474"/>
<area shape="rect" href="tar_8c.html#a11d3fc4ba0c33158e98b91bd973212f9" title=" " alt="" coords="153,270,277,296"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="727,307,779,334"/>
<area shape="rect" href="tar_8c.html#a95557238bd1ce1ece7c3859eff9888dc" title=" " alt="" coords="143,422,288,448"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a5bbe56a416af8f77723b652362f742f7" title=" " alt="" coords="189,472,242,499"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a7e7eb2098a672ca4e4bf2a95b11d1aee" title="lib/user/syscall.h" alt="" coords="180,523,251,550"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#aad8fb521859618a34294cb6b71e92209" title=" " alt="" coords="192,574,239,600"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a703a13bc53a317ea70b87280ad3d974e" title=" " alt="" coords="189,624,241,651"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a0aa847a91eaead434f068da636ec821f" title=" " alt="" coords="353,219,417,246"/>
<area shape="rect" href="string_8c.html#a2869404e70f06f4477271f26ce8c4920" title="Returns the length of STRING." alt="" coords="894,434,949,460"/>
<area shape="rect" href="tar_8c.html#aeae922065d4290e3c877a5f3a5d7a824" title=" " alt="" coords="336,422,435,448"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="892,307,951,334"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="1030,463,1103,490"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="1181,164,1299,191"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="1181,295,1299,322"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="1015,356,1118,383"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="1207,412,1273,439"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="1186,463,1294,490"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="1190,514,1290,540"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="1177,564,1303,591"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="1209,615,1271,642"/>
<area shape="rect" href="lib_2stdio_8c.html#a9248d4643c7dd4c03f632fb1ce2b9d5f" title="Writes CH to OUTPUT with auxiliary data AUX, CNT times." alt="" coords="1402,514,1491,540"/>
<area shape="rect" href="ctype_8h.html#ad7fd5ce3790b81c86de5502ff6853f3a" title=" " alt="" coords="1419,564,1475,591"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1793,194,1884,220"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1398,76,1495,103"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1587,128,1736,169"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1784,26,1893,52"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1615,26,1708,52"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="1398,244,1495,271"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1623,244,1700,271"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="1173,358,1307,384"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="1355,448,1539,489"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="1403,396,1490,423"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="1409,346,1485,372"/>
<area shape="rect" href="tar_8c.html#aed54c3c43e1f39c75bd51bf2b7107c6b" title=" " alt="" coords="517,422,589,448"/>
<area shape="rect" href="ustar_8c.html#a7df8da167076821f714ddcf58700a26b" title="Composes HEADER as a USTAR_HEADER_SIZE (512)&#45;byte archive header in ustar format for a SIZE&#45;byte file..." alt="" coords="483,491,623,518"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a7d9f2533bbf31e3d1d4c5e1454efd41d" title=" " alt="" coords="727,358,778,384"/>
<area shape="rect" href="ustar_8c.html#a4abd06a3432f80c53d46dfa9fdf6204a" title="Returns the checksum for the given ustar format HEADER." alt="" coords="689,459,817,486"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="718,662,787,688"/>
<area shape="rect" href="lib_2stdio_8c.html#a913035b9a30cd1b34c5e587dfbf26f92" title="Like printf(), except that output is stored into BUFFER, which must have space for BUF_SIZE character..." alt="" coords="720,560,785,587"/>
<area shape="rect" href="ustar_8c.html#af69b8645dfc7ba2cbfcc8bbf8ffae4e5" title="Drop possibly dangerous prefixes from FILE_NAME and return the stripped name." alt="" coords="671,611,835,638"/>
<area shape="rect" href="string_8c.html#a4637af6f79bac4043e1064f0837d0ddc" title="Copies string SRC to DST." alt="" coords="723,408,783,435"/>
<area shape="rect" href="lib_2stdio_8c.html#a1286c6b071007938f54e9b859109f89d" title="Like vprintf(), except that output is stored into BUFFER, which must have space for BUF_SIZE characte..." alt="" coords="885,511,957,538"/>
<area shape="rect" href="lib_2stdio_8c.html#acdff2b19969329b7777564346ac98c5d" title="Helper function for vsnprintf()." alt="" coords="1008,514,1125,540"/>
<area shape="rect" href="string_8c.html#a19c6163b9e87b586f4ddb7773faf9172" title="Find the first differing byte in the two blocks of SIZE bytes at A and B." alt="" coords="883,612,960,639"/>
<area shape="rect" href="string_8c.html#a0b5ce5a348a2190d38480f0478405a6c" title="Finds and returns the first occurrence of C in STRING, or a null pointer if C does not appear in STRI..." alt="" coords="893,663,949,690"/>
<area shape="rect" href="string_8c.html#ae99b71772ffcf066739c8568013425e3" title="Finds the first differing characters in strings A and B." alt="" coords="890,562,953,588"/>
<area shape="rect" href="string_8c.html#a75301dc67774ade574b3b3205ee4f39e" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="885,383,957,410"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a2aff9d03d32ff7fbc2885fdb1a1b8deb" title=" " alt="" coords="354,472,417,499"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#ab0f9f22d375a9229b3c77859cf2035a0" title=" " alt="" coords="361,523,410,550"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tar_8c_a736a422fc49cb04f6601997fb136c19c_icgraph.png" border="0" usemap="#atar_8c_a736a422fc49cb04f6601997fb136c19c_icgraph" alt=""/></div>
<map name="atar_8c_a736a422fc49cb04f6601997fb136c19c_icgraph" id="atar_8c_a736a422fc49cb04f6601997fb136c19c_icgraph">
<area shape="rect" title=" " alt="" coords="280,5,369,32"/>
<area shape="rect" href="tar_8c.html#a11d3fc4ba0c33158e98b91bd973212f9" title=" " alt="" coords="106,5,230,32"/>
<area shape="rect" href="tar_8c.html#a5758c0d6627e2210b6e18ec360169e91" title=" " alt="" coords="104,56,232,83"/>
<area shape="rect" href="tar_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,56,56,83"/>
</map>
</div>

</div>
</div>
<a id="a95557238bd1ce1ece7c3859eff9888dc" name="a95557238bd1ce1ece7c3859eff9888dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95557238bd1ce1ece7c3859eff9888dc">&#9670;&nbsp;</a></span>archive_ordinary_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> archive_ordinary_file </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>file_fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>archive_fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> *&#160;</td>
          <td class="paramname"><em>write_error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tar_8c_source.html#l00124">124</a> of file <a class="el" href="tar_8c_source.html">tar.c</a>.</p>

<p class="reference">References <a class="el" href="child-syn-read_8c_source.html#l00016">buf</a>, <a class="el" href="tar_8c_source.html#l00195">do_write()</a>, <a class="el" href="syn-read_8h_source.html#l00005">file_name</a>, <a class="el" href="lib_2user_2syscall_8c_source.html#l00109">filesize()</a>, <a class="el" href="string_8c_source.html#l00279">memset()</a>, <a class="el" href="lib_2stdio_8c_source.html#l00079">printf()</a>, <a class="el" href="lib_2user_2syscall_8c_source.html#l00115">read()</a>, <a class="el" href="ustar_8h_source.html#l00015">USTAR_REGULAR</a>, and <a class="el" href="tar_8c_source.html#l00186">write_header()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tar_8c_source.html#l00089">archive_file()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tar_8c_a95557238bd1ce1ece7c3859eff9888dc_cgraph.png" border="0" usemap="#atar_8c_a95557238bd1ce1ece7c3859eff9888dc_cgraph" alt=""/></div>
<map name="atar_8c_a95557238bd1ce1ece7c3859eff9888dc_cgraph" id="atar_8c_a95557238bd1ce1ece7c3859eff9888dc_cgraph">
<area shape="rect" title=" " alt="" coords="5,668,151,695"/>
<area shape="rect" href="tar_8c.html#aed54c3c43e1f39c75bd51bf2b7107c6b" title=" " alt="" coords="379,567,451,593"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="589,491,641,517"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a2aff9d03d32ff7fbc2885fdb1a1b8deb" title=" " alt="" coords="217,744,279,771"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="581,845,650,872"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#ab0f9f22d375a9229b3c77859cf2035a0" title=" " alt="" coords="223,795,273,821"/>
<area shape="rect" href="tar_8c.html#aeae922065d4290e3c877a5f3a5d7a824" title=" " alt="" coords="199,643,297,669"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a7d9f2533bbf31e3d1d4c5e1454efd41d" title=" " alt="" coords="590,541,641,568"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="755,465,813,492"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="893,871,967,897"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="871,465,989,492"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="871,415,989,441"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="879,208,981,235"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="1071,883,1137,909"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="1050,984,1158,1011"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="1054,933,1154,960"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="1041,781,1167,808"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="1073,832,1135,859"/>
<area shape="rect" href="lib_2stdio_8c.html#a9248d4643c7dd4c03f632fb1ce2b9d5f" title="Writes CH to OUTPUT with auxiliary data AUX, CNT times." alt="" coords="1266,959,1355,985"/>
<area shape="rect" href="ctype_8h.html#ad7fd5ce3790b81c86de5502ff6853f3a" title=" " alt="" coords="1283,781,1339,808"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1657,579,1748,605"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1055,452,1153,479"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1451,259,1600,301"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1648,401,1757,428"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1264,452,1357,479"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1823,376,1900,403"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1805,427,1917,453"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1657,56,1748,83"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1475,56,1575,83"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1470,579,1581,605"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1476,477,1575,504"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="1055,224,1153,251"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1272,107,1349,133"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1484,107,1567,133"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="1037,111,1171,137"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="1219,158,1403,199"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="1267,5,1354,32"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="1273,56,1349,83"/>
<area shape="rect" href="ustar_8c.html#a7df8da167076821f714ddcf58700a26b" title="Composes HEADER as a USTAR_HEADER_SIZE (512)&#45;byte archive header in ustar format for a SIZE&#45;byte file..." alt="" coords="345,643,485,669"/>
<area shape="rect" href="ustar_8c.html#a4abd06a3432f80c53d46dfa9fdf6204a" title="Returns the checksum for the given ustar format HEADER." alt="" coords="551,592,679,619"/>
<area shape="rect" href="lib_2stdio_8c.html#a913035b9a30cd1b34c5e587dfbf26f92" title="Like printf(), except that output is stored into BUFFER, which must have space for BUF_SIZE character..." alt="" coords="583,795,648,821"/>
<area shape="rect" href="ustar_8c.html#af69b8645dfc7ba2cbfcc8bbf8ffae4e5" title="Drop possibly dangerous prefixes from FILE_NAME and return the stripped name." alt="" coords="533,643,697,669"/>
<area shape="rect" href="string_8c.html#a4637af6f79bac4043e1064f0837d0ddc" title="Copies string SRC to DST." alt="" coords="585,693,645,720"/>
<area shape="rect" href="string_8c.html#a2869404e70f06f4477271f26ce8c4920" title="Returns the length of STRING." alt="" coords="757,744,811,771"/>
<area shape="rect" href="lib_2stdio_8c.html#a1286c6b071007938f54e9b859109f89d" title="Like vprintf(), except that output is stored into BUFFER, which must have space for BUF_SIZE characte..." alt="" coords="748,871,820,897"/>
<area shape="rect" href="lib_2stdio_8c.html#acdff2b19969329b7777564346ac98c5d" title="Helper function for vsnprintf()." alt="" coords="871,921,989,948"/>
<area shape="rect" href="string_8c.html#a19c6163b9e87b586f4ddb7773faf9172" title="Find the first differing byte in the two blocks of SIZE bytes at A and B." alt="" coords="745,592,823,619"/>
<area shape="rect" href="string_8c.html#a0b5ce5a348a2190d38480f0478405a6c" title="Finds and returns the first occurrence of C in STRING, or a null pointer if C does not appear in STRI..." alt="" coords="756,643,812,669"/>
<area shape="rect" href="string_8c.html#ae99b71772ffcf066739c8568013425e3" title="Finds the first differing characters in strings A and B." alt="" coords="753,541,815,568"/>
<area shape="rect" href="string_8c.html#a75301dc67774ade574b3b3205ee4f39e" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="748,693,820,720"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tar_8c_a95557238bd1ce1ece7c3859eff9888dc_icgraph.png" border="0" usemap="#atar_8c_a95557238bd1ce1ece7c3859eff9888dc_icgraph" alt=""/></div>
<map name="atar_8c_a95557238bd1ce1ece7c3859eff9888dc_icgraph" id="atar_8c_a95557238bd1ce1ece7c3859eff9888dc_icgraph">
<area shape="rect" title=" " alt="" coords="417,5,563,32"/>
<area shape="rect" href="tar_8c.html#a736a422fc49cb04f6601997fb136c19c" title=" " alt="" coords="280,5,369,32"/>
<area shape="rect" href="tar_8c.html#a11d3fc4ba0c33158e98b91bd973212f9" title=" " alt="" coords="106,5,230,32"/>
<area shape="rect" href="tar_8c.html#a5758c0d6627e2210b6e18ec360169e91" title=" " alt="" coords="104,56,232,83"/>
<area shape="rect" href="tar_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,56,56,83"/>
</map>
</div>

</div>
</div>
<a id="aed54c3c43e1f39c75bd51bf2b7107c6b" name="aed54c3c43e1f39c75bd51bf2b7107c6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed54c3c43e1f39c75bd51bf2b7107c6b">&#9670;&nbsp;</a></span>do_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> do_write </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> *&#160;</td>
          <td class="paramname"><em>write_error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tar_8c_source.html#l00195">195</a> of file <a class="el" href="tar_8c_source.html">tar.c</a>.</p>

<p class="reference">References <a class="el" href="input_8c_source.html#l00007">buffer</a>, <a class="el" href="lib_2stdio_8c_source.html#l00079">printf()</a>, and <a class="el" href="lib_2user_2syscall_8c_source.html#l00121">write()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tar_8c_source.html#l00124">archive_ordinary_file()</a>, <a class="el" href="tar_8c_source.html#l00049">make_tar_archive()</a>, and <a class="el" href="tar_8c_source.html#l00186">write_header()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tar_8c_aed54c3c43e1f39c75bd51bf2b7107c6b_cgraph.png" border="0" usemap="#atar_8c_aed54c3c43e1f39c75bd51bf2b7107c6b_cgraph" alt=""/></div>
<map name="atar_8c_aed54c3c43e1f39c75bd51bf2b7107c6b_cgraph" id="atar_8c_aed54c3c43e1f39c75bd51bf2b7107c6b_cgraph">
<area shape="rect" title=" " alt="" coords="5,884,77,911"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="125,859,177,885"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a7d9f2533bbf31e3d1d4c5e1454efd41d" title=" " alt="" coords="126,909,177,936"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="225,859,284,885"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="347,132,420,159"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="968,1213,1087,1240"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="801,1315,920,1341"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="332,733,435,760"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="516,132,583,159"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="495,183,603,209"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="499,233,599,260"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="486,31,613,57"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="518,81,581,108"/>
<area shape="rect" href="lib_2stdio_8c.html#a9248d4643c7dd4c03f632fb1ce2b9d5f" title="Writes CH to OUTPUT with auxiliary data AUX, CNT times." alt="" coords="664,183,753,209"/>
<area shape="rect" href="ctype_8h.html#ad7fd5ce3790b81c86de5502ff6853f3a" title=" " alt="" coords="681,31,737,57"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1891,1272,1981,1299"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1178,1087,1275,1113"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1367,1245,1516,1286"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1723,1069,1832,1096"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1395,968,1488,995"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1897,917,1975,944"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1880,1069,1992,1096"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1732,613,1823,640"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1569,664,1669,691"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1564,917,1675,944"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1570,968,1669,995"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1885,461,1987,488"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1733,664,1821,691"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1743,867,1811,893"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1738,917,1817,944"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="979,1163,1076,1189"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1188,791,1265,817"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1400,867,1483,893"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1390,816,1493,843"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1385,765,1498,792"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="483,569,616,596"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="1135,1290,1319,1331"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="665,487,752,513"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="1403,183,1479,209"/>
<area shape="rect" href="serial_8c.html#aa1fb82a5be4690023966ea841c88a624" title="Initializes the serial port device for polling mode." alt="" coords="827,385,894,412"/>
<area shape="rect" href="intq_8c.html#aff4db6a96c4a1fb6898f26451a1049c2" title="Returns true if Q is full, false otherwise." alt="" coords="993,360,1061,387"/>
<area shape="rect" href="intq_8c.html#a45ba970f3357ff262d7fafecc50735c6" title="Removes a byte from Q and returns it." alt="" coords="823,1112,899,1139"/>
<area shape="rect" href="intq_8c.html#a6a440110d5417c12cedf1c2e86f445f8" title="Adds BYTE to the end of Q." alt="" coords="823,753,899,780"/>
<area shape="rect" href="serial_8c.html#a15fd75cc421e6379650204e80853a68a" title="Polls the serial port until it&#39;s ready, and then transmits BYTE." alt="" coords="989,411,1065,437"/>
<area shape="rect" href="serial_8c.html#ac89212325aed0ffe38beb0b4bde0bf30" title="Update interrupt enable register." alt="" coords="1191,284,1263,311"/>
<area shape="rect" href="vga_8c.html#a45d8235ab0187a7c0391d0c749317856" title="Clears the screen and moves the cursor to the upper left." alt="" coords="1600,56,1639,83"/>
<area shape="rect" href="vga_8c.html#ac16dc5267953b78624e2ed568776a04b" title="Moves the hardware cursor to (cx,cy)." alt="" coords="1728,81,1827,108"/>
<area shape="rect" href="vga_8c.html#a17fb021b480a1f220d2579807fa2e398" title="Initializes the VGA text display." alt="" coords="1600,157,1639,184"/>
<area shape="rect" href="vga_8c.html#abc92c781510c5f99670802f3c65ebb01" title="Advances the cursor to the first column in the next line on the screen." alt="" coords="1586,5,1653,32"/>
<area shape="rect" href="speaker_8c.html#a1326dce269503d1ba9fac4e40cdf453e" title="Briefly beep the PC speaker." alt="" coords="1724,208,1831,235"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tar_8c_aed54c3c43e1f39c75bd51bf2b7107c6b_icgraph.png" border="0" usemap="#atar_8c_aed54c3c43e1f39c75bd51bf2b7107c6b_icgraph" alt=""/></div>
<map name="atar_8c_aed54c3c43e1f39c75bd51bf2b7107c6b_icgraph" id="atar_8c_aed54c3c43e1f39c75bd51bf2b7107c6b_icgraph">
<area shape="rect" title=" " alt="" coords="757,56,829,83"/>
<area shape="rect" href="tar_8c.html#a95557238bd1ce1ece7c3859eff9888dc" title=" " alt="" coords="417,56,563,83"/>
<area shape="rect" href="tar_8c.html#a5758c0d6627e2210b6e18ec360169e91" title=" " alt="" coords="104,5,232,32"/>
<area shape="rect" href="tar_8c.html#aeae922065d4290e3c877a5f3a5d7a824" title=" " alt="" coords="611,107,709,133"/>
<area shape="rect" href="tar_8c.html#a736a422fc49cb04f6601997fb136c19c" title=" " alt="" coords="280,56,369,83"/>
<area shape="rect" href="tar_8c.html#a11d3fc4ba0c33158e98b91bd973212f9" title=" " alt="" coords="106,56,230,83"/>
<area shape="rect" href="tar_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97" name="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int argc   &#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tar_8c_source.html#l00015">15</a> of file <a class="el" href="tar_8c_source.html">tar.c</a>.</p>

<p class="reference">References <a class="el" href="lib_2user_2syscall_8h_source.html#l00020">EXIT_FAILURE</a>, <a class="el" href="lib_2user_2syscall_8h_source.html#l00019">EXIT_SUCCESS</a>, <a class="el" href="tar_8c_source.html#l00049">make_tar_archive()</a>, and <a class="el" href="tar_8c_source.html#l00025">usage()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tar_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph.png" border="0" usemap="#atar_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph" alt=""/></div>
<map name="atar_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph" id="atar_8c_a0ddf1224851353fc92bfbff6f499fa97_cgraph">
<area shape="rect" title=" " alt="" coords="5,473,56,500"/>
<area shape="rect" href="tar_8c.html#a5758c0d6627e2210b6e18ec360169e91" title=" " alt="" coords="104,271,232,297"/>
<area shape="rect" href="tar_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f" title="tar.c" alt="" coords="139,651,197,677"/>
<area shape="rect" href="tar_8c.html#a736a422fc49cb04f6601997fb136c19c" title=" " alt="" coords="280,347,369,373"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="1001,499,1053,525"/>
<area shape="rect" href="tar_8c.html#aed54c3c43e1f39c75bd51bf2b7107c6b" title=" " alt="" coords="791,296,863,323"/>
<area shape="rect" href="string_8c.html#a4637af6f79bac4043e1064f0837d0ddc" title="Copies string SRC to DST." alt="" coords="997,17,1057,44"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a5bbe56a416af8f77723b652362f742f7" title=" " alt="" coords="463,144,517,171"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a703a13bc53a317ea70b87280ad3d974e" title=" " alt="" coords="464,195,516,221"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a352dd80fdc4fdb4689aac9555fe28202" title=" " alt="" coords="295,245,354,272"/>
<area shape="rect" href="tar_8c.html#a11d3fc4ba0c33158e98b91bd973212f9" title=" " alt="" coords="428,448,552,475"/>
<area shape="rect" href="tar_8c.html#a95557238bd1ce1ece7c3859eff9888dc" title=" " alt="" coords="417,245,563,272"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a7e7eb2098a672ca4e4bf2a95b11d1aee" title="lib/user/syscall.h" alt="" coords="455,397,525,424"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#aad8fb521859618a34294cb6b71e92209" title=" " alt="" coords="467,347,513,373"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a0aa847a91eaead434f068da636ec821f" title=" " alt="" coords="628,448,692,475"/>
<area shape="rect" href="string_8c.html#a2869404e70f06f4477271f26ce8c4920" title="Returns the length of STRING." alt="" coords="1166,169,1221,196"/>
<area shape="rect" href="tar_8c.html#aeae922065d4290e3c877a5f3a5d7a824" title=" " alt="" coords="611,245,709,272"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="1164,499,1223,525"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="1292,293,1365,320"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="1435,477,1554,504"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="1435,556,1554,583"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="1277,644,1380,671"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="1461,243,1528,269"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="1441,344,1549,371"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="1445,395,1545,421"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="1431,293,1558,320"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="1463,192,1526,219"/>
<area shape="rect" href="lib_2stdio_8c.html#a9248d4643c7dd4c03f632fb1ce2b9d5f" title="Writes CH to OUTPUT with auxiliary data AUX, CNT times." alt="" coords="1657,344,1746,371"/>
<area shape="rect" href="ctype_8h.html#ad7fd5ce3790b81c86de5502ff6853f3a" title=" " alt="" coords="1673,293,1729,320"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="2048,505,2139,532"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1653,395,1750,421"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1841,439,1991,481"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="2039,337,2148,364"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1869,337,1963,364"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="1653,556,1750,583"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1877,556,1955,583"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="1428,695,1561,721"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="1609,658,1793,699"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="1658,775,1745,801"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="1663,724,1739,751"/>
<area shape="rect" href="ustar_8c.html#a7df8da167076821f714ddcf58700a26b" title="Composes HEADER as a USTAR_HEADER_SIZE (512)&#45;byte archive header in ustar format for a SIZE&#45;byte file..." alt="" coords="757,195,897,221"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a7d9f2533bbf31e3d1d4c5e1454efd41d" title=" " alt="" coords="1002,321,1053,348"/>
<area shape="rect" href="ustar_8c.html#a4abd06a3432f80c53d46dfa9fdf6204a" title="Returns the checksum for the given ustar format HEADER." alt="" coords="963,220,1091,247"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="993,68,1062,95"/>
<area shape="rect" href="lib_2stdio_8c.html#a913035b9a30cd1b34c5e587dfbf26f92" title="Like printf(), except that output is stored into BUFFER, which must have space for BUF_SIZE character..." alt="" coords="995,271,1060,297"/>
<area shape="rect" href="ustar_8c.html#af69b8645dfc7ba2cbfcc8bbf8ffae4e5" title="Drop possibly dangerous prefixes from FILE_NAME and return the stripped name." alt="" coords="945,119,1109,145"/>
<area shape="rect" href="string_8c.html#a75301dc67774ade574b3b3205ee4f39e" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="1157,17,1229,44"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a2aff9d03d32ff7fbc2885fdb1a1b8deb" title=" " alt="" coords="629,144,691,171"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#ab0f9f22d375a9229b3c77859cf2035a0" title=" " alt="" coords="635,93,685,120"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a55e99c539cf7723ec15e856b7e0a8cee" title=" " alt="" coords="303,651,346,677"/>
</map>
</div>

</div>
</div>
<a id="a5758c0d6627e2210b6e18ec360169e91" name="a5758c0d6627e2210b6e18ec360169e91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5758c0d6627e2210b6e18ec360169e91">&#9670;&nbsp;</a></span>make_tar_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> make_tar_archive </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>archive_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>files</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stddef_8h.html#aa9d55e2f20e580b7445617d0d12fff6e">size_t</a>&#160;</td>
          <td class="paramname"><em>file_cnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tar_8c_source.html#l00049">49</a> of file <a class="el" href="tar_8c_source.html">tar.c</a>.</p>

<p class="reference">References <a class="el" href="tar_8c_source.html#l00089">archive_file()</a>, <a class="el" href="lib_2user_2syscall_8c_source.html#l00139">close()</a>, <a class="el" href="lib_2user_2syscall_8c_source.html#l00091">create()</a>, <a class="el" href="tar_8c_source.html#l00195">do_write()</a>, <a class="el" href="syn-read_8h_source.html#l00005">file_name</a>, <a class="el" href="lib_2user_2syscall_8c_source.html#l00103">open()</a>, <a class="el" href="lib_2stdio_8c_source.html#l00079">printf()</a>, and <a class="el" href="string_8c_source.html#l00326">strlcpy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tar_8c_source.html#l00015">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tar_8c_a5758c0d6627e2210b6e18ec360169e91_cgraph.png" border="0" usemap="#atar_8c_a5758c0d6627e2210b6e18ec360169e91_cgraph" alt=""/></div>
<map name="atar_8c_a5758c0d6627e2210b6e18ec360169e91_cgraph" id="atar_8c_a5758c0d6627e2210b6e18ec360169e91_cgraph">
<area shape="rect" title=" " alt="" coords="5,461,133,488"/>
<area shape="rect" href="tar_8c.html#a736a422fc49cb04f6601997fb136c19c" title=" " alt="" coords="181,309,271,336"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="903,389,955,416"/>
<area shape="rect" href="tar_8c.html#aed54c3c43e1f39c75bd51bf2b7107c6b" title=" " alt="" coords="693,512,765,539"/>
<area shape="rect" href="string_8c.html#a4637af6f79bac4043e1064f0837d0ddc" title="Copies string SRC to DST." alt="" coords="899,5,959,32"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a5bbe56a416af8f77723b652362f742f7" title=" " alt="" coords="365,411,418,437"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a703a13bc53a317ea70b87280ad3d974e" title=" " alt="" coords="365,461,417,488"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a352dd80fdc4fdb4689aac9555fe28202" title=" " alt="" coords="197,664,255,691"/>
<area shape="rect" href="tar_8c.html#a11d3fc4ba0c33158e98b91bd973212f9" title=" " alt="" coords="329,157,453,184"/>
<area shape="rect" href="tar_8c.html#a95557238bd1ce1ece7c3859eff9888dc" title=" " alt="" coords="319,360,464,387"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a7e7eb2098a672ca4e4bf2a95b11d1aee" title="lib/user/syscall.h" alt="" coords="356,259,427,285"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#aad8fb521859618a34294cb6b71e92209" title=" " alt="" coords="368,309,415,336"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a0aa847a91eaead434f068da636ec821f" title=" " alt="" coords="529,107,593,133"/>
<area shape="rect" href="string_8c.html#a2869404e70f06f4477271f26ce8c4920" title="Returns the length of STRING." alt="" coords="1070,56,1125,83"/>
<area shape="rect" href="tar_8c.html#aeae922065d4290e3c877a5f3a5d7a824" title=" " alt="" coords="512,259,611,285"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="1068,389,1127,416"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="1199,259,1272,285"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="1342,549,1461,576"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="1342,419,1461,445"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="1184,364,1287,391"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="1368,259,1435,285"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="1347,309,1455,336"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="1351,157,1451,184"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="1338,107,1465,133"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="1370,208,1433,235"/>
<area shape="rect" href="lib_2stdio_8c.html#a9248d4643c7dd4c03f632fb1ce2b9d5f" title="Writes CH to OUTPUT with auxiliary data AUX, CNT times." alt="" coords="1563,179,1653,205"/>
<area shape="rect" href="ctype_8h.html#ad7fd5ce3790b81c86de5502ff6853f3a" title=" " alt="" coords="1580,107,1636,133"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1955,520,2045,547"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1559,637,1657,664"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1748,571,1897,613"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1945,688,2055,715"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1776,688,1869,715"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="1559,469,1657,496"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1784,469,1861,496"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="1335,360,1468,387"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="1516,353,1700,394"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="1565,301,1651,328"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="1570,251,1646,277"/>
<area shape="rect" href="ustar_8c.html#a7df8da167076821f714ddcf58700a26b" title="Composes HEADER as a USTAR_HEADER_SIZE (512)&#45;byte archive header in ustar format for a SIZE&#45;byte file..." alt="" coords="659,157,799,184"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a7d9f2533bbf31e3d1d4c5e1454efd41d" title=" " alt="" coords="903,512,954,539"/>
<area shape="rect" href="ustar_8c.html#a4abd06a3432f80c53d46dfa9fdf6204a" title="Returns the checksum for the given ustar format HEADER." alt="" coords="865,208,993,235"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="894,309,963,336"/>
<area shape="rect" href="lib_2stdio_8c.html#a913035b9a30cd1b34c5e587dfbf26f92" title="Like printf(), except that output is stored into BUFFER, which must have space for BUF_SIZE character..." alt="" coords="896,259,961,285"/>
<area shape="rect" href="ustar_8c.html#af69b8645dfc7ba2cbfcc8bbf8ffae4e5" title="Drop possibly dangerous prefixes from FILE_NAME and return the stripped name." alt="" coords="847,157,1011,184"/>
<area shape="rect" href="lib_2stdio_8c.html#a1286c6b071007938f54e9b859109f89d" title="Like vprintf(), except that output is stored into BUFFER, which must have space for BUF_SIZE characte..." alt="" coords="1061,259,1133,285"/>
<area shape="rect" href="string_8c.html#a19c6163b9e87b586f4ddb7773faf9172" title="Find the first differing byte in the two blocks of SIZE bytes at A and B." alt="" coords="1059,132,1136,159"/>
<area shape="rect" href="string_8c.html#a0b5ce5a348a2190d38480f0478405a6c" title="Finds and returns the first occurrence of C in STRING, or a null pointer if C does not appear in STRI..." alt="" coords="1069,183,1125,209"/>
<area shape="rect" href="string_8c.html#a75301dc67774ade574b3b3205ee4f39e" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="1061,5,1133,32"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a2aff9d03d32ff7fbc2885fdb1a1b8deb" title=" " alt="" coords="530,360,593,387"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#ab0f9f22d375a9229b3c77859cf2035a0" title=" " alt="" coords="537,411,586,437"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tar_8c_a5758c0d6627e2210b6e18ec360169e91_icgraph.png" border="0" usemap="#atar_8c_a5758c0d6627e2210b6e18ec360169e91_icgraph" alt=""/></div>
<map name="atar_8c_a5758c0d6627e2210b6e18ec360169e91_icgraph" id="atar_8c_a5758c0d6627e2210b6e18ec360169e91_icgraph">
<area shape="rect" title=" " alt="" coords="104,5,232,32"/>
<area shape="rect" href="tar_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="ad96d407a911fbb914fa8e4cfbf2faf0f" name="ad96d407a911fbb914fa8e4cfbf2faf0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad96d407a911fbb914fa8e4cfbf2faf0f">&#9670;&nbsp;</a></span>usage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void usage </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="tar_8c.html">tar.c</a> </p>
<p >Creates a tar archive. </p>

<p class="definition">Definition at line <a class="el" href="tar_8c_source.html#l00025">25</a> of file <a class="el" href="tar_8c_source.html">tar.c</a>.</p>

<p class="reference">References <a class="el" href="lib_2user_2syscall_8c_source.html#l00072">exit()</a>, <a class="el" href="lib_2user_2syscall_8h_source.html#l00020">EXIT_FAILURE</a>, and <a class="el" href="lib_2stdio_8c_source.html#l00079">printf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tar_8c_source.html#l00015">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tar_8c_ad96d407a911fbb914fa8e4cfbf2faf0f_cgraph.png" border="0" usemap="#atar_8c_ad96d407a911fbb914fa8e4cfbf2faf0f_cgraph" alt=""/></div>
<map name="atar_8c_ad96d407a911fbb914fa8e4cfbf2faf0f_cgraph" id="atar_8c_ad96d407a911fbb914fa8e4cfbf2faf0f_cgraph">
<area shape="rect" title="tar.c" alt="" coords="5,833,64,860"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a55e99c539cf7723ec15e856b7e0a8cee" title=" " alt="" coords="117,808,159,835"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="112,859,164,885"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="212,859,271,885"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="333,132,407,159"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="955,1213,1073,1240"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="788,1315,907,1341"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="319,733,421,760"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="503,132,569,159"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="482,183,590,209"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="486,233,586,260"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="473,31,599,57"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="505,81,567,108"/>
<area shape="rect" href="lib_2stdio_8c.html#a9248d4643c7dd4c03f632fb1ce2b9d5f" title="Writes CH to OUTPUT with auxiliary data AUX, CNT times." alt="" coords="651,183,740,209"/>
<area shape="rect" href="ctype_8h.html#ad7fd5ce3790b81c86de5502ff6853f3a" title=" " alt="" coords="667,31,723,57"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1877,1272,1968,1299"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1165,1087,1262,1113"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1353,1245,1503,1286"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1709,1069,1819,1096"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1381,968,1475,995"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1884,917,1961,944"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1867,1069,1979,1096"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1719,613,1809,640"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1556,664,1656,691"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1551,917,1661,944"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1557,968,1655,995"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1872,461,1973,488"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1720,664,1808,691"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1730,867,1798,893"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1725,917,1803,944"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="965,1163,1063,1189"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1175,791,1252,817"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1387,867,1469,893"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1377,816,1479,843"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1371,765,1485,792"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="469,569,603,596"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="1121,1290,1305,1331"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="652,487,739,513"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="1390,183,1466,209"/>
<area shape="rect" href="serial_8c.html#aa1fb82a5be4690023966ea841c88a624" title="Initializes the serial port device for polling mode." alt="" coords="814,385,881,412"/>
<area shape="rect" href="intq_8c.html#aff4db6a96c4a1fb6898f26451a1049c2" title="Returns true if Q is full, false otherwise." alt="" coords="980,360,1048,387"/>
<area shape="rect" href="intq_8c.html#a45ba970f3357ff262d7fafecc50735c6" title="Removes a byte from Q and returns it." alt="" coords="809,1112,885,1139"/>
<area shape="rect" href="intq_8c.html#a6a440110d5417c12cedf1c2e86f445f8" title="Adds BYTE to the end of Q." alt="" coords="809,753,885,780"/>
<area shape="rect" href="serial_8c.html#a15fd75cc421e6379650204e80853a68a" title="Polls the serial port until it&#39;s ready, and then transmits BYTE." alt="" coords="976,411,1052,437"/>
<area shape="rect" href="serial_8c.html#ac89212325aed0ffe38beb0b4bde0bf30" title="Update interrupt enable register." alt="" coords="1177,284,1249,311"/>
<area shape="rect" href="vga_8c.html#a45d8235ab0187a7c0391d0c749317856" title="Clears the screen and moves the cursor to the upper left." alt="" coords="1587,56,1625,83"/>
<area shape="rect" href="vga_8c.html#ac16dc5267953b78624e2ed568776a04b" title="Moves the hardware cursor to (cx,cy)." alt="" coords="1715,81,1813,108"/>
<area shape="rect" href="vga_8c.html#a17fb021b480a1f220d2579807fa2e398" title="Initializes the VGA text display." alt="" coords="1587,157,1625,184"/>
<area shape="rect" href="vga_8c.html#abc92c781510c5f99670802f3c65ebb01" title="Advances the cursor to the first column in the next line on the screen." alt="" coords="1573,5,1639,32"/>
<area shape="rect" href="speaker_8c.html#a1326dce269503d1ba9fac4e40cdf453e" title="Briefly beep the PC speaker." alt="" coords="1711,208,1817,235"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tar_8c_ad96d407a911fbb914fa8e4cfbf2faf0f_icgraph.png" border="0" usemap="#atar_8c_ad96d407a911fbb914fa8e4cfbf2faf0f_icgraph" alt=""/></div>
<map name="atar_8c_ad96d407a911fbb914fa8e4cfbf2faf0f_icgraph" id="atar_8c_ad96d407a911fbb914fa8e4cfbf2faf0f_icgraph">
<area shape="rect" title="tar.c" alt="" coords="104,5,163,32"/>
<area shape="rect" href="tar_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="aeae922065d4290e3c877a5f3a5d7a824" name="aeae922065d4290e3c877a5f3a5d7a824"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeae922065d4290e3c877a5f3a5d7a824">&#9670;&nbsp;</a></span>write_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> write_header </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="ustar_8h.html#a568552540e7f88c695b72c238c009837">ustar_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>archive_fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> *&#160;</td>
          <td class="paramname"><em>write_error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="tar_8c_source.html#l00186">186</a> of file <a class="el" href="tar_8c_source.html">tar.c</a>.</p>

<p class="reference">References <a class="el" href="tar_8c_source.html#l00195">do_write()</a>, <a class="el" href="syn-read_8h_source.html#l00005">file_name</a>, and <a class="el" href="ustar_8c_source.html#l00083">ustar_make_header()</a>.</p>

<p class="reference">Referenced by <a class="el" href="tar_8c_source.html#l00160">archive_directory()</a>, and <a class="el" href="tar_8c_source.html#l00124">archive_ordinary_file()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tar_8c_aeae922065d4290e3c877a5f3a5d7a824_cgraph.png" border="0" usemap="#atar_8c_aeae922065d4290e3c877a5f3a5d7a824_cgraph" alt=""/></div>
<map name="atar_8c_aeae922065d4290e3c877a5f3a5d7a824_cgraph" id="atar_8c_aeae922065d4290e3c877a5f3a5d7a824_cgraph">
<area shape="rect" title=" " alt="" coords="5,813,104,840"/>
<area shape="rect" href="tar_8c.html#aed54c3c43e1f39c75bd51bf2b7107c6b" title=" " alt="" coords="186,737,258,764"/>
<area shape="rect" href="ustar_8c.html#a7df8da167076821f714ddcf58700a26b" title="Composes HEADER as a USTAR_HEADER_SIZE (512)&#45;byte archive header in ustar format for a SIZE&#45;byte file..." alt="" coords="152,864,292,891"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="396,737,448,764"/>
<area shape="rect" href="lib_2user_2syscall_8c.html#a7d9f2533bbf31e3d1d4c5e1454efd41d" title=" " alt="" coords="397,687,447,713"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="561,737,620,764"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="700,965,773,992"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="848,712,967,739"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="677,763,796,789"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="685,611,788,637"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="874,915,941,941"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="853,1016,961,1043"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="857,965,957,992"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="844,1067,971,1093"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="876,1117,939,1144"/>
<area shape="rect" href="lib_2stdio_8c.html#a9248d4643c7dd4c03f632fb1ce2b9d5f" title="Writes CH to OUTPUT with auxiliary data AUX, CNT times." alt="" coords="1041,991,1130,1017"/>
<area shape="rect" href="ctype_8h.html#ad7fd5ce3790b81c86de5502ff6853f3a" title=" " alt="" coords="1057,1067,1113,1093"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1639,693,1729,720"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="1037,661,1134,688"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1432,675,1581,717"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1629,472,1739,499"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1245,421,1339,448"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1804,345,1881,372"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1787,472,1899,499"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1639,143,1729,169"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1457,117,1557,144"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1451,320,1562,347"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1457,472,1556,499"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="859,611,956,637"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1047,244,1124,271"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1251,269,1333,296"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1241,320,1343,347"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1235,219,1349,245"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="1019,117,1152,144"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="1200,545,1384,586"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="1249,67,1335,93"/>
<area shape="rect" href="vga_8c.html#a39f191e69844ad1aca267e74223651bd" title="Writes C to the VGA text display, interpreting control characters in the conventional ways." alt="" coords="1254,16,1330,43"/>
<area shape="rect" href="serial_8c.html#aa1fb82a5be4690023966ea841c88a624" title="Initializes the serial port device for polling mode." alt="" coords="1473,67,1540,93"/>
<area shape="rect" href="ustar_8c.html#a4abd06a3432f80c53d46dfa9fdf6204a" title="Returns the checksum for the given ustar format HEADER." alt="" coords="358,889,486,916"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="387,940,457,967"/>
<area shape="rect" href="lib_2stdio_8c.html#a913035b9a30cd1b34c5e587dfbf26f92" title="Like printf(), except that output is stored into BUFFER, which must have space for BUF_SIZE character..." alt="" coords="389,991,455,1017"/>
<area shape="rect" href="ustar_8c.html#af69b8645dfc7ba2cbfcc8bbf8ffae4e5" title="Drop possibly dangerous prefixes from FILE_NAME and return the stripped name." alt="" coords="340,1041,504,1068"/>
<area shape="rect" href="string_8c.html#a4637af6f79bac4043e1064f0837d0ddc" title="Copies string SRC to DST." alt="" coords="392,788,452,815"/>
<area shape="rect" href="string_8c.html#a2869404e70f06f4477271f26ce8c4920" title="Returns the length of STRING." alt="" coords="563,839,618,865"/>
<area shape="rect" href="lib_2stdio_8c.html#a1286c6b071007938f54e9b859109f89d" title="Like vprintf(), except that output is stored into BUFFER, which must have space for BUF_SIZE characte..." alt="" coords="555,977,627,1004"/>
<area shape="rect" href="lib_2stdio_8c.html#acdff2b19969329b7777564346ac98c5d" title="Helper function for vsnprintf()." alt="" coords="678,1016,795,1043"/>
<area shape="rect" href="string_8c.html#a19c6163b9e87b586f4ddb7773faf9172" title="Find the first differing byte in the two blocks of SIZE bytes at A and B." alt="" coords="552,1129,629,1156"/>
<area shape="rect" href="string_8c.html#a0b5ce5a348a2190d38480f0478405a6c" title="Finds and returns the first occurrence of C in STRING, or a null pointer if C does not appear in STRI..." alt="" coords="563,1028,619,1055"/>
<area shape="rect" href="string_8c.html#ae99b71772ffcf066739c8568013425e3" title="Finds the first differing characters in strings A and B." alt="" coords="559,1079,622,1105"/>
<area shape="rect" href="string_8c.html#a75301dc67774ade574b3b3205ee4f39e" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="555,788,627,815"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="tar_8c_aeae922065d4290e3c877a5f3a5d7a824_icgraph.png" border="0" usemap="#atar_8c_aeae922065d4290e3c877a5f3a5d7a824_icgraph" alt=""/></div>
<map name="atar_8c_aeae922065d4290e3c877a5f3a5d7a824_icgraph" id="atar_8c_aeae922065d4290e3c877a5f3a5d7a824_icgraph">
<area shape="rect" title=" " alt="" coords="611,31,709,57"/>
<area shape="rect" href="tar_8c.html#a11d3fc4ba0c33158e98b91bd973212f9" title=" " alt="" coords="428,5,552,32"/>
<area shape="rect" href="tar_8c.html#a95557238bd1ce1ece7c3859eff9888dc" title=" " alt="" coords="417,56,563,83"/>
<area shape="rect" href="tar_8c.html#a736a422fc49cb04f6601997fb136c19c" title=" " alt="" coords="280,5,369,32"/>
<area shape="rect" href="tar_8c.html#a5758c0d6627e2210b6e18ec360169e91" title=" " alt="" coords="104,5,232,32"/>
<area shape="rect" href="tar_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 4 2021 19:31:05 for PKUOS - Pintos by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
