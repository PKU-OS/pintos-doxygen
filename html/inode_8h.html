<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PKUOS - Pintos: src/filesys/inode.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PKUOS - Pintos
   </div>
   <div id="projectbrief">Pintos source browser for PKU Operating System course</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_462cf8f5a5a6b6c35369e33c5cc1b3e4.html">filesys</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">inode.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="stdbool_8h_source.html">stdbool.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="off__t_8h_source.html">filesys/off_t.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="block_8h_source.html">devices/block.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for inode.h:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h__incl.png" border="0" usemap="#asrc_2filesys_2inode_8h" alt=""/></div>
<map name="asrc_2filesys_2inode_8h" id="asrc_2filesys_2inode_8h">
<area shape="rect" title=" " alt="" coords="55,5,183,32"/>
<area shape="rect" href="stdbool_8h.html" title=" " alt="" coords="5,80,81,107"/>
<area shape="rect" href="off__t_8h.html" title=" " alt="" coords="61,155,161,181"/>
<area shape="rect" href="block_8h.html" title=" " alt="" coords="164,80,277,107"/>
<area shape="rect" href="stdint_8h.html" title=" " alt="" coords="183,229,248,256"/>
<area shape="rect" href="stddef_8h.html" title=" " alt="" coords="186,155,255,181"/>
<area shape="rect" href="inttypes_8h.html" title=" " alt="" coords="280,155,359,181"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h__dep__incl.png" border="0" usemap="#asrc_2filesys_2inode_8hdep" alt=""/></div>
<map name="asrc_2filesys_2inode_8hdep" id="asrc_2filesys_2inode_8hdep">
<area shape="rect" title=" " alt="" coords="314,5,442,32"/>
<area shape="rect" href="directory_8c.html" title=" " alt="" coords="5,80,151,107"/>
<area shape="rect" href="file_8c.html" title=" " alt="" coords="175,80,287,107"/>
<area shape="rect" href="filesys_8c.html" title=" " alt="" coords="312,80,444,107"/>
<area shape="rect" href="free-map_8c.html" title=" " alt="" coords="468,80,616,107"/>
<area shape="rect" href="inode_8c.html" title=" " alt="" coords="640,80,767,107"/>
</map>
</div>
</div>
<p><a href="inode_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad89ce20702802203535257a453c0290b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8h.html#ad89ce20702802203535257a453c0290b">inode_init</a> (void)</td></tr>
<tr class="memdesc:ad89ce20702802203535257a453c0290b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the inode module.  <a href="inode_8h.html#ad89ce20702802203535257a453c0290b">More...</a><br /></td></tr>
<tr class="separator:ad89ce20702802203535257a453c0290b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4445b24665d139b5f387bbc6428c9f81"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8h.html#a4445b24665d139b5f387bbc6428c9f81">inode_create</a> (<a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a>, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>)</td></tr>
<tr class="memdesc:a4445b24665d139b5f387bbc6428c9f81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes an inode with LENGTH bytes of data and writes the new inode to sector SECTOR on the file system device.  <a href="inode_8h.html#a4445b24665d139b5f387bbc6428c9f81">More...</a><br /></td></tr>
<tr class="separator:a4445b24665d139b5f387bbc6428c9f81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a6f9f3eb4c63ff233e36c46aff45c27"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structinode.html">inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8h.html#a2a6f9f3eb4c63ff233e36c46aff45c27">inode_open</a> (<a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a>)</td></tr>
<tr class="memdesc:a2a6f9f3eb4c63ff233e36c46aff45c27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads an inode from SECTOR and returns a &lsquo;struct inode&rsquo; that contains it.  <a href="inode_8h.html#a2a6f9f3eb4c63ff233e36c46aff45c27">More...</a><br /></td></tr>
<tr class="separator:a2a6f9f3eb4c63ff233e36c46aff45c27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e0414adb2e511fe96b43def3f5a51ed"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structinode.html">inode</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8h.html#a9e0414adb2e511fe96b43def3f5a51ed">inode_reopen</a> (struct <a class="el" href="structinode.html">inode</a> *)</td></tr>
<tr class="memdesc:a9e0414adb2e511fe96b43def3f5a51ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reopens and returns INODE.  <a href="inode_8h.html#a9e0414adb2e511fe96b43def3f5a51ed">More...</a><br /></td></tr>
<tr class="separator:a9e0414adb2e511fe96b43def3f5a51ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74e94faf883f74be8717d948c71d027c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8h.html#a74e94faf883f74be8717d948c71d027c">inode_get_inumber</a> (const struct <a class="el" href="structinode.html">inode</a> *)</td></tr>
<tr class="memdesc:a74e94faf883f74be8717d948c71d027c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns INODE's inode number.  <a href="inode_8h.html#a74e94faf883f74be8717d948c71d027c">More...</a><br /></td></tr>
<tr class="separator:a74e94faf883f74be8717d948c71d027c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17768b42e21fcfe0e84cfc3532f297d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8h.html#a17768b42e21fcfe0e84cfc3532f297d9">inode_close</a> (struct <a class="el" href="structinode.html">inode</a> *)</td></tr>
<tr class="memdesc:a17768b42e21fcfe0e84cfc3532f297d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes INODE and writes it to disk.  <a href="inode_8h.html#a17768b42e21fcfe0e84cfc3532f297d9">More...</a><br /></td></tr>
<tr class="separator:a17768b42e21fcfe0e84cfc3532f297d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae718854bb4f015434eaa12086ab04e69"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8h.html#ae718854bb4f015434eaa12086ab04e69">inode_remove</a> (struct <a class="el" href="structinode.html">inode</a> *)</td></tr>
<tr class="memdesc:ae718854bb4f015434eaa12086ab04e69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Marks INODE to be deleted when it is closed by the last caller who has it open.  <a href="inode_8h.html#ae718854bb4f015434eaa12086ab04e69">More...</a><br /></td></tr>
<tr class="separator:ae718854bb4f015434eaa12086ab04e69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb6be4a6658d5e2746fb704da3d929aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8h.html#aeb6be4a6658d5e2746fb704da3d929aa">inode_read_at</a> (struct <a class="el" href="structinode.html">inode</a> *, void *, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> size, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> offset)</td></tr>
<tr class="memdesc:aeb6be4a6658d5e2746fb704da3d929aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET.  <a href="inode_8h.html#aeb6be4a6658d5e2746fb704da3d929aa">More...</a><br /></td></tr>
<tr class="separator:aeb6be4a6658d5e2746fb704da3d929aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6ee4ad6d1d9ecedb64ec631546f6a9e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8h.html#ad6ee4ad6d1d9ecedb64ec631546f6a9e">inode_write_at</a> (struct <a class="el" href="structinode.html">inode</a> *, const void *, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> size, <a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> offset)</td></tr>
<tr class="memdesc:ad6ee4ad6d1d9ecedb64ec631546f6a9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes SIZE bytes from BUFFER into INODE, starting at OFFSET.  <a href="inode_8h.html#ad6ee4ad6d1d9ecedb64ec631546f6a9e">More...</a><br /></td></tr>
<tr class="separator:ad6ee4ad6d1d9ecedb64ec631546f6a9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3602010a3f0850ba27621e3891fcfa39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8h.html#a3602010a3f0850ba27621e3891fcfa39">inode_deny_write</a> (struct <a class="el" href="structinode.html">inode</a> *)</td></tr>
<tr class="memdesc:a3602010a3f0850ba27621e3891fcfa39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables writes to INODE.  <a href="inode_8h.html#a3602010a3f0850ba27621e3891fcfa39">More...</a><br /></td></tr>
<tr class="separator:a3602010a3f0850ba27621e3891fcfa39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e70a95182b124bc5312b864b0bf2b70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8h.html#a4e70a95182b124bc5312b864b0bf2b70">inode_allow_write</a> (struct <a class="el" href="structinode.html">inode</a> *)</td></tr>
<tr class="memdesc:a4e70a95182b124bc5312b864b0bf2b70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Re-enables writes to INODE.  <a href="inode_8h.html#a4e70a95182b124bc5312b864b0bf2b70">More...</a><br /></td></tr>
<tr class="separator:a4e70a95182b124bc5312b864b0bf2b70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a460c80ff7c64bcf7f827952513c883f2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="inode_8h.html#a460c80ff7c64bcf7f827952513c883f2">inode_length</a> (const struct <a class="el" href="structinode.html">inode</a> *)</td></tr>
<tr class="memdesc:a460c80ff7c64bcf7f827952513c883f2"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="inode_8h.html">filesys/inode.h</a>  <a href="inode_8h.html#a460c80ff7c64bcf7f827952513c883f2">More...</a><br /></td></tr>
<tr class="separator:a460c80ff7c64bcf7f827952513c883f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4e70a95182b124bc5312b864b0bf2b70" name="a4e70a95182b124bc5312b864b0bf2b70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e70a95182b124bc5312b864b0bf2b70">&#9670;&nbsp;</a></span>inode_allow_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inode_allow_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Re-enables writes to INODE. </p>
<p >Must be called once by each inode opener who has called <a class="el" href="inode_8c.html#ab39a43eb15fff5d8f28df20a8762b290" title="Disables writes to INODE.">inode_deny_write()</a> on the inode, before closing the inode. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00333">333</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="inode_8c_source.html#l00038">inode::deny_write_cnt</a>, and <a class="el" href="inode_8c_source.html#l00036">inode::open_cnt</a>.</p>

<p class="reference">Referenced by <a class="el" href="file_8c_source.html#l00133">file_allow_write()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h_a4e70a95182b124bc5312b864b0bf2b70_icgraph.png" border="0" usemap="#ainode_8h_a4e70a95182b124bc5312b864b0bf2b70_icgraph" alt=""/></div>
<map name="ainode_8h_a4e70a95182b124bc5312b864b0bf2b70_icgraph" id="ainode_8h_a4e70a95182b124bc5312b864b0bf2b70_icgraph">
<area shape="rect" title="Re&#45;enables writes to INODE." alt="" coords="1211,195,1339,221"/>
<area shape="rect" href="file_8c.html#afe7d1da8b53f8b896fc5faf646468356" title="Re&#45;enables write operations on FILE&#39;s underlying inode." alt="" coords="1051,195,1163,221"/>
<area shape="rect" href="file_8c.html#a4d12e9de7ab756bef5396c7b37698c9a" title="Closes FILE." alt="" coords="925,195,1003,221"/>
<area shape="rect" href="free-map_8c.html#ac00d55315a3b01794bcdc6cc9d5ba5f5" title="Writes the free map to disk and closes the free map file." alt="" coords="760,68,877,95"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="610,144,711,171"/>
<area shape="rect" href="fsutil_8c.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="451,195,526,221"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="770,245,867,272"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="795,296,842,323"/>
<area shape="rect" href="filesys_8c.html#a2710836971ed586925cb1c55850bf955" title="Formats the file system." alt="" coords="619,11,702,37"/>
<area shape="rect" href="filesys_8c.html#aeb7068b9b8e7563972715862ca8106f5" title="Shuts down the file system module, writing any unwritten data to disk." alt="" coords="613,68,709,95"/>
<area shape="rect" href="filesys_8c.html#af905a48e295d86405ec08c307b6272f5" title="Initializes the file system module." alt="" coords="447,5,531,32"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,93,88,120"/>
<area shape="rect" href="shutdown_8c.html#a4cc4519942eb3292f9ee3702330ebd07" title="Powers down the machine we&#39;re running on, as long as we&#39;re running on Bochs or QEMU." alt="" coords="416,68,561,95"/>
<area shape="rect" href="shutdown_8c.html#a1c9d5e29ad8899afe0c34571ddee18f9" title="Shuts down the machine in the way configured by shutdown_configure()." alt="" coords="289,43,368,69"/>
<area shape="rect" href="init_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f" title="Prints a kernel command line help message and powers off the machine." alt="" coords="299,93,358,120"/>
<area shape="rect" href="kernel_2debug_8c.html#a0dba4a46c338129ae12e314e07e9fbe3" title="Halts the OS, printing the source file name, line number, and function name, plus a user&#45;specific mes..." alt="" coords="139,93,238,120"/>
<area shape="rect" href="init_8c.html#a598c2f3a0a33552aa203aa847dc265b6" title="Parses options in ARGV[] and returns the first non&#45;option argument." alt="" coords="136,144,241,171"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="143,195,234,221"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="609,296,712,323"/>
<area shape="rect" href="process_8c.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="427,296,550,323"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="292,296,365,323"/>
</map>
</div>

</div>
</div>
<a id="a17768b42e21fcfe0e84cfc3532f297d9" name="a17768b42e21fcfe0e84cfc3532f297d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17768b42e21fcfe0e84cfc3532f297d9">&#9670;&nbsp;</a></span>inode_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inode_close </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes INODE and writes it to disk. </p>
<p >If this was the last reference to INODE, frees its memory. If INODE was also a removed inode, frees its blocks. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00164">164</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="inode_8c_source.html#l00026">bytes_to_sectors()</a>, <a class="el" href="inode_8c_source.html#l00039">inode::data</a>, <a class="el" href="inode_8c_source.html#l00034">inode::elem</a>, <a class="el" href="malloc_8c_source.html#l00219">free()</a>, <a class="el" href="free-map_8c_source.html#l00045">free_map_release()</a>, <a class="el" href="inode_8c_source.html#l00018">inode_disk::length</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00249">list_remove()</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, <a class="el" href="inode_8c_source.html#l00036">inode::open_cnt</a>, <a class="el" href="inode_8c_source.html#l00037">inode::removed</a>, <a class="el" href="inode_8c_source.html#l00035">inode::sector</a>, and <a class="el" href="inode_8c_source.html#l00017">inode_disk::start</a>.</p>

<p class="reference">Referenced by <a class="el" href="directory_8c_source.html#l00070">dir_close()</a>, <a class="el" href="directory_8c_source.html#l00035">dir_open()</a>, <a class="el" href="directory_8c_source.html#l00185">dir_remove()</a>, <a class="el" href="file_8c_source.html#l00046">file_close()</a>, and <a class="el" href="file_8c_source.html#l00018">file_open()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h_a17768b42e21fcfe0e84cfc3532f297d9_cgraph.png" border="0" usemap="#ainode_8h_a17768b42e21fcfe0e84cfc3532f297d9_cgraph" alt=""/></div>
<map name="ainode_8h_a17768b42e21fcfe0e84cfc3532f297d9_cgraph" id="ainode_8h_a17768b42e21fcfe0e84cfc3532f297d9_cgraph">
<area shape="rect" title="Closes INODE and writes it to disk." alt="" coords="5,289,99,316"/>
<area shape="rect" href="inode_8c.html#af6294d594eab7d7afccf0d0cefd35a13" title="Returns the number of sectors to allocate for an inode SIZE bytes long." alt="" coords="147,213,269,240"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="185,315,231,341"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="889,423,979,449"/>
<area shape="rect" href="free-map_8c.html#a65586c8713124a199b6db7397c1aba6f" title="Makes CNT sectors starting at SECTOR available for use." alt="" coords="495,264,624,291"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="323,365,436,392"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="503,43,616,69"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="879,372,989,399"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="511,929,608,956"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="331,651,428,677"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="717,195,787,221"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="489,144,629,171"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="317,112,441,139"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="721,43,783,69"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="1359,436,1476,463"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1215,499,1294,525"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1057,372,1135,399"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1215,423,1295,449"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1227,372,1283,399"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1209,1056,1300,1083"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="677,863,827,905"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1041,828,1151,855"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="705,929,799,956"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1216,803,1293,829"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1199,853,1311,880"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1051,777,1141,804"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="884,777,984,804"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="879,575,989,601"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="885,1031,983,1057"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1204,917,1305,944"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1052,929,1140,956"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1221,563,1289,589"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="1058,879,1134,905"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="521,651,598,677"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1055,524,1137,551"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="701,517,803,544"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="695,651,809,677"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="898,473,970,500"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="711,296,793,323"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="682,245,822,272"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="693,93,811,120"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="905,144,963,171"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="875,296,993,323"/>
<area shape="rect" href="bitmap_8c.html#ab8d6660c5e30dab9cecef1240c7423d9" title="Returns the value of the bit numbered IDX in B." alt="" coords="1051,296,1141,323"/>
<area shape="rect" href="bitmap_8c.html#acc12f810fdb7b50a620c3852c3656d63" title="Returns an elem_type where only the bit corresponding to BIT_IDX is turned on." alt="" coords="1217,220,1293,247"/>
<area shape="rect" href="bitmap_8c.html#abb94f95006e0ec6ff6b5c88262f28d74" title="Returns the index of the element that contains the bit numbered BIT_IDX." alt="" coords="1217,271,1293,297"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="891,245,977,272"/>
<area shape="rect" href="bitmap_8c.html#adb8912537854d4a2dcb1f35940a7134b" title="Atomically sets the bit numbered BIT_IDX in B to true." alt="" coords="1047,195,1145,221"/>
<area shape="rect" href="bitmap_8c.html#a5bb6be898ca442c95e725be80c2369a6" title="Atomically sets the bit numbered BIT_IDX in B to false." alt="" coords="1047,245,1145,272"/>
<area shape="rect" href="bitmap_8c.html#a576f7d29f091eac024f70ae8d68997a9" title="Bitmap size." alt="" coords="887,93,981,120"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h_a17768b42e21fcfe0e84cfc3532f297d9_icgraph.png" border="0" usemap="#ainode_8h_a17768b42e21fcfe0e84cfc3532f297d9_icgraph" alt=""/></div>
<map name="ainode_8h_a17768b42e21fcfe0e84cfc3532f297d9_icgraph" id="ainode_8h_a17768b42e21fcfe0e84cfc3532f297d9_icgraph">
<area shape="rect" title="Closes INODE and writes it to disk." alt="" coords="1392,220,1485,247"/>
<area shape="rect" href="directory_8c.html#a92d246b6a292843fdfd7e3e1d2b29701" title="Destroys DIR and frees associated resources." alt="" coords="1117,68,1193,95"/>
<area shape="rect" href="directory_8c.html#a12c77ad2315eb1079f7914b1b1b27ce2" title="Opens and returns the directory for the given INODE, of which it takes ownership." alt="" coords="1263,169,1336,196"/>
<area shape="rect" href="directory_8c.html#ae277e450f2d6d436a61adccc0ad5ce23" title="Removes any entry for NAME in DIR." alt="" coords="1255,220,1344,247"/>
<area shape="rect" href="file_8c.html#a4d12e9de7ab756bef5396c7b37698c9a" title="Closes FILE." alt="" coords="961,233,1038,260"/>
<area shape="rect" href="file_8c.html#a57cca369d13720dba680d09f76f96c70" title="Opens a file for the given INODE, of which it takes ownership, and returns the new file." alt="" coords="1117,347,1193,373"/>
<area shape="rect" href="filesys_8c.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="947,68,1051,95"/>
<area shape="rect" href="filesys_8c.html#a79d6e6b4a6c2295fba2322000c7c19fd" title="Opens the file with the given NAME." alt="" coords="951,169,1047,196"/>
<area shape="rect" href="filesys_8c.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="Deletes the file named NAME." alt="" coords="944,119,1055,145"/>
<area shape="rect" href="fsutil_8c.html#a50cc451070af8d6fd949d2975b5f588d" title="List files in the root directory." alt="" coords="966,17,1033,44"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="786,93,883,120"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="143,144,234,171"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,271,88,297"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="784,195,885,221"/>
<area shape="rect" href="fsutil_8c.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="797,245,872,272"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="811,144,858,171"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="616,144,719,171"/>
<area shape="rect" href="process_8c.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="427,144,550,171"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="292,144,365,171"/>
<area shape="rect" href="fsutil_8c.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="631,43,703,69"/>
<area shape="rect" href="directory_8c.html#afdea7fe972a97776e832c4324b0c4b9d" title="Opens the root directory and returns a directory for it." alt="" coords="1103,119,1207,145"/>
<area shape="rect" href="directory_8c.html#a8c479e18ce6294ba5d6c3fe23dd2b5bf" title="Opens and returns a new directory for the same inode as DIR." alt="" coords="1112,169,1197,196"/>
<area shape="rect" href="free-map_8c.html#ac00d55315a3b01794bcdc6cc9d5ba5f5" title="Writes the free map to disk and closes the free map file." alt="" coords="776,296,893,323"/>
<area shape="rect" href="filesys_8c.html#a2710836971ed586925cb1c55850bf955" title="Formats the file system." alt="" coords="626,347,709,373"/>
<area shape="rect" href="filesys_8c.html#aeb7068b9b8e7563972715862ca8106f5" title="Shuts down the file system module, writing any unwritten data to disk." alt="" coords="619,296,715,323"/>
<area shape="rect" href="filesys_8c.html#af905a48e295d86405ec08c307b6272f5" title="Initializes the file system module." alt="" coords="447,397,531,424"/>
<area shape="rect" href="shutdown_8c.html#a4cc4519942eb3292f9ee3702330ebd07" title="Powers down the machine we&#39;re running on, as long as we&#39;re running on Bochs or QEMU." alt="" coords="416,296,561,323"/>
<area shape="rect" href="shutdown_8c.html#a1c9d5e29ad8899afe0c34571ddee18f9" title="Shuts down the machine in the way configured by shutdown_configure()." alt="" coords="289,347,368,373"/>
<area shape="rect" href="init_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f" title="Prints a kernel command line help message and powers off the machine." alt="" coords="299,296,358,323"/>
<area shape="rect" href="kernel_2debug_8c.html#a0dba4a46c338129ae12e314e07e9fbe3" title="Halts the OS, printing the source file name, line number, and function name, plus a user&#45;specific mes..." alt="" coords="139,347,238,373"/>
<area shape="rect" href="init_8c.html#a598c2f3a0a33552aa203aa847dc265b6" title="Parses options in ARGV[] and returns the first non&#45;option argument." alt="" coords="136,245,241,272"/>
<area shape="rect" href="file_8c.html#a71b69ddf56278e8e076d9ce48b9966b1" title="Opens and returns a new file for the same inode as FILE." alt="" coords="955,448,1043,475"/>
<area shape="rect" href="free-map_8c.html#a928c69cba9ea179d6fe581acd970c512" title="Creates a new free map file on disk and writes the free map to it." alt="" coords="773,347,896,373"/>
<area shape="rect" href="free-map_8c.html#a82ae69d4b7534829d5c1672231c62370" title="Opens the free map file and reads it from disk." alt="" coords="609,397,725,424"/>
</map>
</div>

</div>
</div>
<a id="a4445b24665d139b5f387bbc6428c9f81" name="a4445b24665d139b5f387bbc6428c9f81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4445b24665d139b5f387bbc6428c9f81">&#9670;&nbsp;</a></span>inode_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> inode_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a>&#160;</td>
          <td class="paramname"><em>sector</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes an inode with LENGTH bytes of data and writes the new inode to sector SECTOR on the file system device. </p>
<p >Returns true if successful. Returns false if memory or disk allocation fails. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00073">73</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="block_8h_source.html#l00011">BLOCK_SECTOR_SIZE</a>, <a class="el" href="block_8c_source.html#l00134">block_write()</a>, <a class="el" href="inode_8c_source.html#l00026">bytes_to_sectors()</a>, <a class="el" href="malloc_8c_source.html#l00159">calloc()</a>, <a class="el" href="malloc_8c_source.html#l00219">free()</a>, <a class="el" href="free-map_8c_source.html#l00028">free_map_allocate()</a>, <a class="el" href="filesys_8c_source.html#l00011">fs_device</a>, <a class="el" href="inode_8c_source.html#l00011">INODE_MAGIC</a>, <a class="el" href="inode_8c_source.html#l00018">inode_disk::length</a>, <a class="el" href="inode_8c_source.html#l00019">inode_disk::magic</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, and <a class="el" href="inode_8c_source.html#l00017">inode_disk::start</a>.</p>

<p class="reference">Referenced by <a class="el" href="directory_8c_source.html#l00027">dir_create()</a>, <a class="el" href="filesys_8c_source.html#l00046">filesys_create()</a>, and <a class="el" href="free-map_8c_source.html#l00073">free_map_create()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h_a4445b24665d139b5f387bbc6428c9f81_cgraph.png" border="0" usemap="#ainode_8h_a4445b24665d139b5f387bbc6428c9f81_cgraph" alt=""/></div>
<map name="ainode_8h_a4445b24665d139b5f387bbc6428c9f81_cgraph" id="ainode_8h_a4445b24665d139b5f387bbc6428c9f81_cgraph">
<area shape="rect" title="Initializes an inode with LENGTH bytes of data and writes the new inode to sector SECTOR on the file ..." alt="" coords="5,816,104,843"/>
<area shape="rect" href="block_8c.html#ab7e44f7861385a5c4630d899a469f9d4" title="Write sector SECTOR to BLOCK from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="169,613,258,640"/>
<area shape="rect" href="inode_8c.html#af6294d594eab7d7afccf0d0cefd35a13" title="Returns the number of sectors to allocate for an inode SIZE bytes long." alt="" coords="152,765,275,792"/>
<area shape="rect" href="malloc_8c.html#a9b551bee9453c331a3a4a5d95d255e2e" title="Allocates and return A times B bytes initialized to zeroes." alt="" coords="185,816,241,843"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="508,867,553,893"/>
<area shape="rect" href="free-map_8c.html#a9cce17fe18443be5a61dbdf40c10e03a" title="Allocates CNT consecutive sectors from the free map and stores the first into *SECTORP." alt="" coords="641,1221,773,1248"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="323,233,423,260"/>
<area shape="rect" href="block_8c.html#abfb4cd8ff36ddbdf93ebc1944ccfbd4d" title="Returns BLOCK&#39;s name (e.g." alt="" coords="484,5,577,32"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="343,537,403,564"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1063,867,1132,893"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="650,664,763,691"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="650,715,763,741"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1560,259,1643,285"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1228,360,1331,387"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1387,411,1497,437"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="850,664,947,691"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="850,461,947,488"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="639,613,775,640"/>
<area shape="rect" href="palloc_8c.html#a0c66d7fdb0a9c8da247421261b5ca188" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="471,613,591,640"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1066,1019,1129,1045"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="1705,567,1823,593"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1725,424,1803,451"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1730,323,1798,349"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1406,259,1478,285"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1397,724,1487,751"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1724,724,1804,751"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1562,775,1641,801"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1736,775,1792,801"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1397,791,1487,817"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1023,657,1172,698"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1387,661,1497,688"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1051,605,1144,632"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1563,519,1640,545"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1545,657,1657,684"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1556,309,1647,336"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1392,208,1492,235"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1230,715,1329,741"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1059,259,1136,285"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1223,309,1336,336"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="823,1221,975,1248"/>
<area shape="rect" href="bitmap_8c.html#a88a9127abe8322926d25de46140b778a" title="Finding set or unset bits." alt="" coords="1049,1221,1146,1248"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1027,1272,1167,1299"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1220,1196,1339,1223"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1236,1272,1323,1299"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1387,841,1497,868"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="829,1069,969,1096"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="645,1019,769,1045"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1056,1171,1139,1197"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1038,1069,1157,1096"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1250,1095,1309,1121"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h_a4445b24665d139b5f387bbc6428c9f81_icgraph.png" border="0" usemap="#ainode_8h_a4445b24665d139b5f387bbc6428c9f81_icgraph" alt=""/></div>
<map name="ainode_8h_a4445b24665d139b5f387bbc6428c9f81_icgraph" id="ainode_8h_a4445b24665d139b5f387bbc6428c9f81_icgraph">
<area shape="rect" title="Initializes an inode with LENGTH bytes of data and writes the new inode to sector SECTOR on the file ..." alt="" coords="591,56,689,83"/>
<area shape="rect" href="directory_8c.html#ab3951213f266ce0e0404203a35fefe8f" title="Creates a directory with space for ENTRY_CNT entries in the given SECTOR." alt="" coords="441,5,522,32"/>
<area shape="rect" href="filesys_8c.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="429,107,533,133"/>
<area shape="rect" href="free-map_8c.html#a928c69cba9ea179d6fe581acd970c512" title="Creates a new free map file on disk and writes the free map to it." alt="" coords="420,56,543,83"/>
<area shape="rect" href="filesys_8c.html#a2710836971ed586925cb1c55850bf955" title="Formats the file system." alt="" coords="282,56,365,83"/>
<area shape="rect" href="filesys_8c.html#af905a48e295d86405ec08c307b6272f5" title="Initializes the file system module." alt="" coords="139,56,223,83"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,81,88,108"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="275,107,372,133"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,107,227,133"/>
</map>
</div>

</div>
</div>
<a id="a3602010a3f0850ba27621e3891fcfa39" name="a3602010a3f0850ba27621e3891fcfa39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3602010a3f0850ba27621e3891fcfa39">&#9670;&nbsp;</a></span>inode_deny_write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inode_deny_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disables writes to INODE. </p>
<p >May be called at most once per inode opener. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00323">323</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="inode_8c_source.html#l00038">inode::deny_write_cnt</a>, and <a class="el" href="inode_8c_source.html#l00036">inode::open_cnt</a>.</p>

<p class="reference">Referenced by <a class="el" href="file_8c_source.html#l00119">file_deny_write()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h_a3602010a3f0850ba27621e3891fcfa39_icgraph.png" border="0" usemap="#ainode_8h_a3602010a3f0850ba27621e3891fcfa39_icgraph" alt=""/></div>
<map name="ainode_8h_a3602010a3f0850ba27621e3891fcfa39_icgraph" id="ainode_8h_a3602010a3f0850ba27621e3891fcfa39_icgraph">
<area shape="rect" title="Disables writes to INODE." alt="" coords="164,5,291,32"/>
<area shape="rect" href="file_8c.html#aa3d3b96cd45ef585d53ec95adcc06117" title="Prevents write operations on FILE&#39;s underlying inode until file_allow_write() is called or FILE is cl..." alt="" coords="5,5,116,32"/>
</map>
</div>

</div>
</div>
<a id="a74e94faf883f74be8717d948c71d027c" name="a74e94faf883f74be8717d948c71d027c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74e94faf883f74be8717d948c71d027c">&#9670;&nbsp;</a></span>inode_get_inumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a> inode_get_inumber </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns INODE's inode number. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00155">155</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="inode_8c_source.html#l00035">inode::sector</a>.</p>

</div>
</div>
<a id="ad89ce20702802203535257a453c0290b" name="ad89ce20702802203535257a453c0290b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad89ce20702802203535257a453c0290b">&#9670;&nbsp;</a></span>inode_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inode_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the inode module. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00062">62</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="lib_2kernel_2list_8c_source.html#l00061">list_init()</a>, and <a class="el" href="inode_8c_source.html#l00058">open_inodes</a>.</p>

<p class="reference">Referenced by <a class="el" href="filesys_8c_source.html#l00018">filesys_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h_ad89ce20702802203535257a453c0290b_cgraph.png" border="0" usemap="#ainode_8h_ad89ce20702802203535257a453c0290b_cgraph" alt=""/></div>
<map name="ainode_8h_ad89ce20702802203535257a453c0290b_cgraph" id="ainode_8h_ad89ce20702802203535257a453c0290b_cgraph">
<area shape="rect" title="Initializes the inode module." alt="" coords="5,5,84,32"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a8aa862d10f52f7b0348fce990c7c12db" title="Initializes LIST as an empty list." alt="" coords="132,5,195,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h_ad89ce20702802203535257a453c0290b_icgraph.png" border="0" usemap="#ainode_8h_ad89ce20702802203535257a453c0290b_icgraph" alt=""/></div>
<map name="ainode_8h_ad89ce20702802203535257a453c0290b_icgraph" id="ainode_8h_ad89ce20702802203535257a453c0290b_icgraph">
<area shape="rect" title="Initializes the inode module." alt="" coords="268,5,347,32"/>
<area shape="rect" href="filesys_8c.html#af905a48e295d86405ec08c307b6272f5" title="Initializes the file system module." alt="" coords="136,5,220,32"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,88,32"/>
</map>
</div>

</div>
</div>
<a id="a460c80ff7c64bcf7f827952513c883f2" name="a460c80ff7c64bcf7f827952513c883f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a460c80ff7c64bcf7f827952513c883f2">&#9670;&nbsp;</a></span>inode_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> inode_length </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p><a class="el" href="inode_8h.html">filesys/inode.h</a> </p>
<p ><a class="el" href="inode_8h.html">filesys/inode.h</a> </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00342">342</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="inode_8c_source.html#l00039">inode::data</a>, and <a class="el" href="inode_8c_source.html#l00018">inode_disk::length</a>.</p>

<p class="reference">Referenced by <a class="el" href="file_8c_source.html#l00145">file_length()</a>, <a class="el" href="inode_8c_source.html#l00201">inode_read_at()</a>, and <a class="el" href="inode_8c_source.html#l00258">inode_write_at()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h_a460c80ff7c64bcf7f827952513c883f2_icgraph.png" border="0" usemap="#ainode_8h_a460c80ff7c64bcf7f827952513c883f2_icgraph" alt=""/></div>
<map name="ainode_8h_a460c80ff7c64bcf7f827952513c883f2_icgraph" id="ainode_8h_a460c80ff7c64bcf7f827952513c883f2_icgraph">
<area shape="rect" title="filesys/inode.h" alt="" coords="1495,272,1593,299"/>
<area shape="rect" href="file_8c.html#a8866ac568cc804793c456ccb4af71957" title="Returns the size of FILE in bytes." alt="" coords="1047,95,1129,121"/>
<area shape="rect" href="inode_8c.html#a31fcd756c686b818d56067b4460bfdb9" title="Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET." alt="" coords="1340,272,1447,299"/>
<area shape="rect" href="inode_8c.html#a09402d2c8d33dc00b2557daa27d944ee" title="Writes SIZE bytes from BUFFER into INODE, starting at OFFSET." alt="" coords="1183,424,1292,451"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="717,171,819,197"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="745,227,791,253"/>
<area shape="rect" href="process_8c.html#a6791a2f8c763395aef1dff4c8409550b" title="Checks whether PHDR describes a valid, loadable segment in FILE and returns true if so,..." alt="" coords="867,120,993,147"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,265,227,292"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,265,88,292"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="567,227,669,253"/>
<area shape="rect" href="process_8c.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="396,233,519,260"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="275,259,348,285"/>
<area shape="rect" href="directory_8c.html#a86380e077145f4f4ca42e0bd413c79fd" title="Adds a file named NAME to DIR, which must not already contain a file by that name." alt="" coords="1055,373,1121,400"/>
<area shape="rect" href="directory_8c.html#ae9ec2107e448111aca8951c2f7bfa61b" title="Reads the next directory entry in DIR and stores the name in NAME." alt="" coords="1195,25,1280,52"/>
<area shape="rect" href="file_8c.html#aa970e0e3d037e457750745798328db97" title="Reads SIZE bytes from FILE into BUFFER, starting at the file&#39;s current position." alt="" coords="1051,272,1125,299"/>
<area shape="rect" href="file_8c.html#a9f62f31208f5a024b47fc3ac90ed0b9c" title="Reads SIZE bytes from FILE into BUFFER, starting at offset FILE_OFS in the file." alt="" coords="1191,221,1283,248"/>
<area shape="rect" href="directory_8c.html#ab2c71a2a1a0ffa3c618792babf4fc8b9" title="Searches DIR for a file with the given NAME." alt="" coords="1207,323,1268,349"/>
<area shape="rect" href="filesys_8c.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="878,424,982,451"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="719,399,817,425"/>
<area shape="rect" href="fsutil_8c.html#a50cc451070af8d6fd949d2975b5f588d" title="List files in the root directory." alt="" coords="585,5,651,32"/>
<area shape="rect" href="fsutil_8c.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="731,323,805,349"/>
<area shape="rect" href="process_8c.html#a2f03f0e1bdd5d41d15c2ea83f0135b7f" title="Loads a segment starting at offset OFS in FILE at address UPAGE." alt="" coords="877,221,983,248"/>
<area shape="rect" href="directory_8c.html#a782062143b05a6f32d11457cfd6259f6" title="Searches DIR for a file with the given NAME and returns true if one exists, false otherwise." alt="" coords="1046,323,1130,349"/>
<area shape="rect" href="directory_8c.html#ae277e450f2d6d436a61adccc0ad5ce23" title="Removes any entry for NAME in DIR." alt="" coords="1043,424,1133,451"/>
<area shape="rect" href="filesys_8c.html#a79d6e6b4a6c2295fba2322000c7c19fd" title="Opens the file with the given NAME." alt="" coords="882,323,978,349"/>
<area shape="rect" href="filesys_8c.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="Deletes the file named NAME." alt="" coords="875,525,985,552"/>
<area shape="rect" href="fsutil_8c.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="421,472,493,499"/>
<area shape="rect" href="file_8c.html#a5c3629e8008d2ad73290be83f84d27eb" title="Writes SIZE bytes from BUFFER into FILE, starting at the file&#39;s current position." alt="" coords="893,475,967,501"/>
<area shape="rect" href="file_8c.html#a066213728ed4ad6314a980f50c2c93d7" title="Writes SIZE bytes from BUFFER into FILE, starting at offset FILE_OFS in the file." alt="" coords="1041,525,1135,552"/>
</map>
</div>

</div>
</div>
<a id="a2a6f9f3eb4c63ff233e36c46aff45c27" name="a2a6f9f3eb4c63ff233e36c46aff45c27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a6f9f3eb4c63ff233e36c46aff45c27">&#9670;&nbsp;</a></span>inode_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinode.html">inode</a> * inode_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="block_8h.html#a5817ce5926a42095888c9518172ec905">block_sector_t</a>&#160;</td>
          <td class="paramname"><em>sector</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads an inode from SECTOR and returns a &lsquo;struct inode&rsquo; that contains it. </p>
<p >Returns a null pointer if memory allocation fails. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00112">112</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="block_8c_source.html#l00121">block_read()</a>, <a class="el" href="inode_8c_source.html#l00039">inode::data</a>, <a class="el" href="inode_8c_source.html#l00038">inode::deny_write_cnt</a>, <a class="el" href="inode_8c_source.html#l00034">inode::elem</a>, <a class="el" href="filesys_8c_source.html#l00011">fs_device</a>, <a class="el" href="inode_8c_source.html#l00146">inode_reopen()</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00072">list_begin()</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00094">list_end()</a>, <a class="el" href="list_8h_source.html#l00108">list_entry</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00082">list_next()</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00209">list_push_front()</a>, <a class="el" href="malloc_8c_source.html#l00090">malloc()</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, <a class="el" href="inode_8c_source.html#l00036">inode::open_cnt</a>, <a class="el" href="inode_8c_source.html#l00058">open_inodes</a>, <a class="el" href="inode_8c_source.html#l00037">inode::removed</a>, and <a class="el" href="inode_8c_source.html#l00035">inode::sector</a>.</p>

<p class="reference">Referenced by <a class="el" href="directory_8c_source.html#l00119">dir_lookup()</a>, <a class="el" href="directory_8c_source.html#l00055">dir_open_root()</a>, <a class="el" href="directory_8c_source.html#l00185">dir_remove()</a>, <a class="el" href="free-map_8c_source.html#l00073">free_map_create()</a>, and <a class="el" href="free-map_8c_source.html#l00054">free_map_open()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h_a2a6f9f3eb4c63ff233e36c46aff45c27_cgraph.png" border="0" usemap="#ainode_8h_a2a6f9f3eb4c63ff233e36c46aff45c27_cgraph" alt=""/></div>
<map name="ainode_8h_a2a6f9f3eb4c63ff233e36c46aff45c27_cgraph" id="ainode_8h_a2a6f9f3eb4c63ff233e36c46aff45c27_cgraph">
<area shape="rect" title="Reads an inode from SECTOR and returns a ‘struct inode’ that contains it." alt="" coords="5,183,97,209"/>
<area shape="rect" href="block_8c.html#a8c08b3ab03d5cdb52856bab0aafe7006" title="Reads sector SECTOR from BLOCK into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="154,5,241,32"/>
<area shape="rect" href="inode_8c.html#a6244b29557e8dfa4f7fb0fb804e35413" title="Reopens and returns INODE." alt="" coords="145,56,249,83"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1992,157,2071,184"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1997,613,2065,640"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#abd2f8e3cf912b8f9ba5e592d32f11ff3" title="Returns the element after ELEM in its list." alt="" coords="162,183,233,209"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1214,259,1323,285"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="167,740,227,767"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="307,5,407,32"/>
<area shape="rect" href="block_8c.html#abfb4cd8ff36ddbdf93ebc1944ccfbd4d" title="Returns BLOCK&#39;s name (e.g." alt="" coords="487,5,580,32"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#aee78fb1351519ad20686f6eaf9018b4c" title="Returns true if ELEM is a head, false otherwise." alt="" coords="323,208,392,235"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1863,259,1943,285"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1401,259,1480,285"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1588,309,1644,336"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="301,765,414,792"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="301,1095,414,1121"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1861,487,1944,513"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1565,461,1667,488"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1213,563,1324,589"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="677,947,774,973"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="677,867,774,893"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="465,816,601,843"/>
<area shape="rect" href="palloc_8c.html#a0c66d7fdb0a9c8da247421261b5ca188" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="297,816,417,843"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="502,1095,565,1121"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="1557,1171,1675,1197"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1732,461,1804,488"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1723,411,1813,437"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1571,1019,1661,1045"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="849,983,999,1025"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1214,1069,1323,1096"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="877,932,971,959"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1402,968,1479,995"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1385,1069,1497,1096"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1395,664,1486,691"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1219,715,1319,741"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1057,968,1155,995"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1565,740,1667,767"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1397,765,1485,792"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="1231,917,1307,944"/>
<area shape="rect" href="intq_8c.html#ac473f50d2829cba1321d34a57c425042" title="Returns the position after POS within an intq." alt="" coords="1417,917,1464,944"/>
<area shape="rect" href="thread_8c.html#ace7a46dcf0f5c9c4cbb8f47a5b3c76f5" title="Chooses and returns the next thread to be scheduled." alt="" coords="1372,563,1509,589"/>
<area shape="rect" href="switch_8h.html#a72fbed245d8de7e36d70eb4682682c98" title="Switches from CUR, which must be the running thread, to NEXT, which must also be running switch_threa..." alt="" coords="1385,867,1496,893"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="885,613,963,640"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1049,664,1163,691"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="649,765,801,792"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="691,816,760,843"/>
<area shape="rect" href="bitmap_8c.html#a88a9127abe8322926d25de46140b778a" title="Finding set or unset bits." alt="" coords="875,765,973,792"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="854,816,994,843"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1047,765,1165,792"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1063,816,1149,843"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h_a2a6f9f3eb4c63ff233e36c46aff45c27_icgraph.png" border="0" usemap="#ainode_8h_a2a6f9f3eb4c63ff233e36c46aff45c27_icgraph" alt=""/></div>
<map name="ainode_8h_a2a6f9f3eb4c63ff233e36c46aff45c27_icgraph" id="ainode_8h_a2a6f9f3eb4c63ff233e36c46aff45c27_icgraph">
<area shape="rect" title="Reads an inode from SECTOR and returns a ‘struct inode’ that contains it." alt="" coords="1192,259,1284,285"/>
<area shape="rect" href="directory_8c.html#a782062143b05a6f32d11457cfd6259f6" title="Searches DIR for a file with the given NAME and returns true if one exists, false otherwise." alt="" coords="1041,132,1125,159"/>
<area shape="rect" href="directory_8c.html#afdea7fe972a97776e832c4324b0c4b9d" title="Opens the root directory and returns a directory for it." alt="" coords="1031,208,1135,235"/>
<area shape="rect" href="directory_8c.html#ae277e450f2d6d436a61adccc0ad5ce23" title="Removes any entry for NAME in DIR." alt="" coords="1038,259,1127,285"/>
<area shape="rect" href="free-map_8c.html#a928c69cba9ea179d6fe581acd970c512" title="Creates a new free map file on disk and writes the free map to it." alt="" coords="1021,309,1144,336"/>
<area shape="rect" href="free-map_8c.html#a82ae69d4b7534829d5c1672231c62370" title="Opens the free map file and reads it from disk." alt="" coords="1025,360,1141,387"/>
<area shape="rect" href="filesys_8c.html#a79d6e6b4a6c2295fba2322000c7c19fd" title="Opens the file with the given NAME." alt="" coords="870,107,966,133"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="567,56,669,83"/>
<area shape="rect" href="fsutil_8c.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="420,107,495,133"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="717,157,815,184"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="743,5,789,32"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,157,227,184"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,233,88,260"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="567,5,669,32"/>
<area shape="rect" href="process_8c.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="396,5,519,32"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="275,5,348,32"/>
<area shape="rect" href="filesys_8c.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="866,157,970,184"/>
<area shape="rect" href="filesys_8c.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="Deletes the file named NAME." alt="" coords="863,259,973,285"/>
<area shape="rect" href="fsutil_8c.html#a50cc451070af8d6fd949d2975b5f588d" title="List files in the root directory." alt="" coords="585,208,651,235"/>
<area shape="rect" href="fsutil_8c.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="275,259,347,285"/>
<area shape="rect" href="filesys_8c.html#a2710836971ed586925cb1c55850bf955" title="Formats the file system." alt="" coords="877,309,959,336"/>
<area shape="rect" href="filesys_8c.html#af905a48e295d86405ec08c307b6272f5" title="Initializes the file system module." alt="" coords="724,309,808,336"/>
</map>
</div>

</div>
</div>
<a id="aeb6be4a6658d5e2746fb704da3d929aa" name="aeb6be4a6658d5e2746fb704da3d929aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb6be4a6658d5e2746fb704da3d929aa">&#9670;&nbsp;</a></span>inode_read_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> inode_read_at </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET. </p>
<p >Returns the number of bytes actually read, which may be less than SIZE if an error occurs or end of file is reached. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00201">201</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="block_8c_source.html#l00121">block_read()</a>, <a class="el" href="block_8h_source.html#l00011">BLOCK_SECTOR_SIZE</a>, <a class="el" href="input_8c_source.html#l00007">buffer</a>, <a class="el" href="inode_8c_source.html#l00047">byte_to_sector()</a>, <a class="el" href="malloc_8c_source.html#l00219">free()</a>, <a class="el" href="filesys_8c_source.html#l00011">fs_device</a>, <a class="el" href="inode_8c_source.html#l00342">inode_length()</a>, <a class="el" href="malloc_8c_source.html#l00090">malloc()</a>, <a class="el" href="string_8c_source.html#l00007">memcpy()</a>, and <a class="el" href="stddef_8h_source.html#l00004">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="directory_8c_source.html#l00142">dir_add()</a>, <a class="el" href="directory_8c_source.html#l00222">dir_readdir()</a>, <a class="el" href="file_8c_source.html#l00069">file_read()</a>, <a class="el" href="file_8c_source.html#l00082">file_read_at()</a>, and <a class="el" href="directory_8c_source.html#l00092">lookup()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h_aeb6be4a6658d5e2746fb704da3d929aa_cgraph.png" border="0" usemap="#ainode_8h_aeb6be4a6658d5e2746fb704da3d929aa_cgraph" alt=""/></div>
<map name="ainode_8h_aeb6be4a6658d5e2746fb704da3d929aa_cgraph" id="ainode_8h_aeb6be4a6658d5e2746fb704da3d929aa_cgraph">
<area shape="rect" title="Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET." alt="" coords="5,385,112,412"/>
<area shape="rect" href="block_8c.html#a8c08b3ab03d5cdb52856bab0aafe7006" title="Reads sector SECTOR from BLOCK into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="171,208,258,235"/>
<area shape="rect" href="inode_8c.html#a9b48abdaf996c82819f49d6d8fc4c224" title="Returns the block device sector that contains byte offset POS within INODE." alt="" coords="160,259,269,285"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="531,309,576,336"/>
<area shape="rect" href="inode_8c.html#a67214eb44fb24ef254fca76f9a63fd6d" title="Returns the length, in bytes, of INODE&#39;s data." alt="" coords="165,537,264,564"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="185,487,245,513"/>
<area shape="rect" href="string_8c.html#a75301dc67774ade574b3b3205ee4f39e" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="179,588,251,615"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="327,208,427,235"/>
<area shape="rect" href="block_8c.html#abfb4cd8ff36ddbdf93ebc1944ccfbd4d" title="Returns BLOCK&#39;s name (e.g." alt="" coords="507,208,600,235"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="689,360,802,387"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="689,411,802,437"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1259,5,1369,32"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1269,360,1359,387"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="697,563,794,589"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="697,613,794,640"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1102,259,1171,285"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="874,157,1014,184"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="683,208,807,235"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1105,208,1168,235"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="1581,461,1699,488"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1601,360,1679,387"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1438,259,1517,285"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1600,309,1680,336"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1612,259,1668,285"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1269,512,1359,539"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="869,690,1019,731"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1259,613,1369,640"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="897,639,991,665"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1439,639,1516,665"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1421,512,1533,539"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1432,892,1523,919"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1264,917,1364,944"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1259,715,1369,741"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1087,613,1186,640"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1606,943,1674,969"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="905,993,983,1020"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1436,1069,1519,1096"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1085,1120,1188,1147"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1080,867,1193,893"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1278,1120,1350,1147"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1095,157,1178,184"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1067,309,1207,336"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1077,56,1196,83"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1285,107,1343,133"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1255,157,1373,184"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1271,309,1357,336"/>
<area shape="rect" href="bitmap_8c.html#a576f7d29f091eac024f70ae8d68997a9" title="Bitmap size." alt="" coords="1267,56,1361,83"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="485,512,621,539"/>
<area shape="rect" href="palloc_8c.html#a0c66d7fdb0a9c8da247421261b5ca188" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="317,512,437,539"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="669,512,821,539"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h_aeb6be4a6658d5e2746fb704da3d929aa_icgraph.png" border="0" usemap="#ainode_8h_aeb6be4a6658d5e2746fb704da3d929aa_icgraph" alt=""/></div>
<map name="ainode_8h_aeb6be4a6658d5e2746fb704da3d929aa_icgraph" id="ainode_8h_aeb6be4a6658d5e2746fb704da3d929aa_icgraph">
<area shape="rect" title="Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET." alt="" coords="1303,107,1409,133"/>
<area shape="rect" href="directory_8c.html#a86380e077145f4f4ca42e0bd413c79fd" title="Adds a file named NAME to DIR, which must not already contain a file by that name." alt="" coords="1037,56,1103,83"/>
<area shape="rect" href="directory_8c.html#ae9ec2107e448111aca8951c2f7bfa61b" title="Reads the next directory entry in DIR and stores the name in NAME." alt="" coords="1166,5,1251,32"/>
<area shape="rect" href="file_8c.html#aa970e0e3d037e457750745798328db97" title="Reads SIZE bytes from FILE into BUFFER, starting at the file&#39;s current position." alt="" coords="1033,259,1107,285"/>
<area shape="rect" href="file_8c.html#a9f62f31208f5a024b47fc3ac90ed0b9c" title="Reads SIZE bytes from FILE into BUFFER, starting at offset FILE_OFS in the file." alt="" coords="1163,157,1255,184"/>
<area shape="rect" href="directory_8c.html#ab2c71a2a1a0ffa3c618792babf4fc8b9" title="Searches DIR for a file with the given NAME." alt="" coords="1178,107,1239,133"/>
<area shape="rect" href="filesys_8c.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="870,56,974,83"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="719,56,817,83"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,132,227,159"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,132,88,159"/>
<area shape="rect" href="fsutil_8c.html#a50cc451070af8d6fd949d2975b5f588d" title="List files in the root directory." alt="" coords="585,5,651,32"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="717,208,819,235"/>
<area shape="rect" href="fsutil_8c.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="731,157,805,184"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="745,307,791,333"/>
<area shape="rect" href="process_8c.html#a2f03f0e1bdd5d41d15c2ea83f0135b7f" title="Loads a segment starting at offset OFS in FILE at address UPAGE." alt="" coords="869,360,975,387"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="567,303,669,329"/>
<area shape="rect" href="process_8c.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="396,277,519,304"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="275,265,348,292"/>
<area shape="rect" href="directory_8c.html#a782062143b05a6f32d11457cfd6259f6" title="Searches DIR for a file with the given NAME and returns true if one exists, false otherwise." alt="" coords="1028,157,1112,184"/>
<area shape="rect" href="directory_8c.html#ae277e450f2d6d436a61adccc0ad5ce23" title="Removes any entry for NAME in DIR." alt="" coords="1025,107,1115,133"/>
<area shape="rect" href="filesys_8c.html#a79d6e6b4a6c2295fba2322000c7c19fd" title="Opens the file with the given NAME." alt="" coords="874,157,970,184"/>
<area shape="rect" href="filesys_8c.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="Deletes the file named NAME." alt="" coords="867,107,977,133"/>
<area shape="rect" href="fsutil_8c.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="421,107,493,133"/>
</map>
</div>

</div>
</div>
<a id="ae718854bb4f015434eaa12086ab04e69" name="ae718854bb4f015434eaa12086ab04e69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae718854bb4f015434eaa12086ab04e69">&#9670;&nbsp;</a></span>inode_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void inode_remove </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Marks INODE to be deleted when it is closed by the last caller who has it open. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00191">191</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, and <a class="el" href="inode_8c_source.html#l00037">inode::removed</a>.</p>

<p class="reference">Referenced by <a class="el" href="directory_8c_source.html#l00185">dir_remove()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h_ae718854bb4f015434eaa12086ab04e69_icgraph.png" border="0" usemap="#ainode_8h_ae718854bb4f015434eaa12086ab04e69_icgraph" alt=""/></div>
<map name="ainode_8h_ae718854bb4f015434eaa12086ab04e69_icgraph" id="ainode_8h_ae718854bb4f015434eaa12086ab04e69_icgraph">
<area shape="rect" title="Marks INODE to be deleted when it is closed by the last caller who has it open." alt="" coords="691,5,797,32"/>
<area shape="rect" href="directory_8c.html#ae277e450f2d6d436a61adccc0ad5ce23" title="Removes any entry for NAME in DIR." alt="" coords="553,5,643,32"/>
<area shape="rect" href="filesys_8c.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="Deletes the file named NAME." alt="" coords="395,5,505,32"/>
<area shape="rect" href="fsutil_8c.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="275,5,347,32"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,5,227,32"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,5,88,32"/>
</map>
</div>

</div>
</div>
<a id="a9e0414adb2e511fe96b43def3f5a51ed" name="a9e0414adb2e511fe96b43def3f5a51ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e0414adb2e511fe96b43def3f5a51ed">&#9670;&nbsp;</a></span>inode_reopen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinode.html">inode</a> * inode_reopen </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reopens and returns INODE. </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00146">146</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, and <a class="el" href="inode_8c_source.html#l00036">inode::open_cnt</a>.</p>

<p class="reference">Referenced by <a class="el" href="directory_8c_source.html#l00063">dir_reopen()</a>, <a class="el" href="file_8c_source.html#l00039">file_reopen()</a>, and <a class="el" href="inode_8c_source.html#l00112">inode_open()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h_a9e0414adb2e511fe96b43def3f5a51ed_icgraph.png" border="0" usemap="#ainode_8h_a9e0414adb2e511fe96b43def3f5a51ed_icgraph" alt=""/></div>
<map name="ainode_8h_a9e0414adb2e511fe96b43def3f5a51ed_icgraph" id="ainode_8h_a9e0414adb2e511fe96b43def3f5a51ed_icgraph">
<area shape="rect" title="Reopens and returns INODE." alt="" coords="1332,208,1436,235"/>
<area shape="rect" href="directory_8c.html#a8c479e18ce6294ba5d6c3fe23dd2b5bf" title="Opens and returns a new directory for the same inode as DIR." alt="" coords="1195,157,1281,184"/>
<area shape="rect" href="file_8c.html#a71b69ddf56278e8e076d9ce48b9966b1" title="Opens and returns a new file for the same inode as FILE." alt="" coords="1194,208,1282,235"/>
<area shape="rect" href="inode_8c.html#a7adc21afc633b56d25a229ce0087c4a0" title="Reads an inode from SECTOR and returns a ‘struct inode’ that contains it." alt="" coords="1192,259,1284,285"/>
<area shape="rect" href="directory_8c.html#a782062143b05a6f32d11457cfd6259f6" title="Searches DIR for a file with the given NAME and returns true if one exists, false otherwise." alt="" coords="1041,132,1125,159"/>
<area shape="rect" href="directory_8c.html#afdea7fe972a97776e832c4324b0c4b9d" title="Opens the root directory and returns a directory for it." alt="" coords="1031,208,1135,235"/>
<area shape="rect" href="directory_8c.html#ae277e450f2d6d436a61adccc0ad5ce23" title="Removes any entry for NAME in DIR." alt="" coords="1038,259,1127,285"/>
<area shape="rect" href="free-map_8c.html#a928c69cba9ea179d6fe581acd970c512" title="Creates a new free map file on disk and writes the free map to it." alt="" coords="1021,309,1144,336"/>
<area shape="rect" href="free-map_8c.html#a82ae69d4b7534829d5c1672231c62370" title="Opens the free map file and reads it from disk." alt="" coords="1025,360,1141,387"/>
<area shape="rect" href="filesys_8c.html#a79d6e6b4a6c2295fba2322000c7c19fd" title="Opens the file with the given NAME." alt="" coords="870,107,966,133"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="567,56,669,83"/>
<area shape="rect" href="fsutil_8c.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="420,107,495,133"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="717,157,815,184"/>
<area shape="rect" href="process_8c.html#af761b81ad417b7194e0132e23abe2cb4" title="Loads an ELF executable from FILE_NAME into the current thread." alt="" coords="743,5,789,32"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,157,227,184"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,233,88,260"/>
<area shape="rect" href="process_8c.html#aff0aeae725745f4c80c93b49e8dc1af0" title="A thread function that loads a user process and starts it running." alt="" coords="567,5,669,32"/>
<area shape="rect" href="process_8c.html#a1582bcaeb44cd10cde5e05c3385b2f97" title="Starts a new thread running a user program loaded from FILENAME." alt="" coords="396,5,519,32"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="275,5,348,32"/>
<area shape="rect" href="filesys_8c.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="866,157,970,184"/>
<area shape="rect" href="filesys_8c.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="Deletes the file named NAME." alt="" coords="863,259,973,285"/>
<area shape="rect" href="fsutil_8c.html#a50cc451070af8d6fd949d2975b5f588d" title="List files in the root directory." alt="" coords="585,208,651,235"/>
<area shape="rect" href="fsutil_8c.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="275,259,347,285"/>
<area shape="rect" href="filesys_8c.html#a2710836971ed586925cb1c55850bf955" title="Formats the file system." alt="" coords="877,309,959,336"/>
<area shape="rect" href="filesys_8c.html#af905a48e295d86405ec08c307b6272f5" title="Initializes the file system module." alt="" coords="724,309,808,336"/>
</map>
</div>

</div>
</div>
<a id="ad6ee4ad6d1d9ecedb64ec631546f6a9e" name="ad6ee4ad6d1d9ecedb64ec631546f6a9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6ee4ad6d1d9ecedb64ec631546f6a9e">&#9670;&nbsp;</a></span>inode_write_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a> inode_write_at </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&#160;</td>
          <td class="paramname"><em>inode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buffer_</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="off__t_8h.html#a7d63687fa6ad4c7e0134c0ffc5f3962c">off_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes SIZE bytes from BUFFER into INODE, starting at OFFSET. </p>
<p >Returns the number of bytes actually written, which may be less than SIZE if end of file is reached or an error occurs. (Normally a write at end of file would extend the inode, but growth is not yet implemented.) </p>

<p class="definition">Definition at line <a class="el" href="inode_8c_source.html#l00258">258</a> of file <a class="el" href="inode_8c_source.html">inode.c</a>.</p>

<p class="reference">References <a class="el" href="block_8c_source.html#l00121">block_read()</a>, <a class="el" href="block_8h_source.html#l00011">BLOCK_SECTOR_SIZE</a>, <a class="el" href="block_8c_source.html#l00134">block_write()</a>, <a class="el" href="input_8c_source.html#l00007">buffer</a>, <a class="el" href="inode_8c_source.html#l00047">byte_to_sector()</a>, <a class="el" href="inode_8c_source.html#l00038">inode::deny_write_cnt</a>, <a class="el" href="malloc_8c_source.html#l00219">free()</a>, <a class="el" href="filesys_8c_source.html#l00011">fs_device</a>, <a class="el" href="inode_8c_source.html#l00342">inode_length()</a>, <a class="el" href="malloc_8c_source.html#l00090">malloc()</a>, <a class="el" href="string_8c_source.html#l00007">memcpy()</a>, <a class="el" href="string_8c_source.html#l00279">memset()</a>, and <a class="el" href="stddef_8h_source.html#l00004">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="directory_8c_source.html#l00142">dir_add()</a>, <a class="el" href="directory_8c_source.html#l00185">dir_remove()</a>, <a class="el" href="file_8c_source.html#l00095">file_write()</a>, and <a class="el" href="file_8c_source.html#l00110">file_write_at()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h_ad6ee4ad6d1d9ecedb64ec631546f6a9e_cgraph.png" border="0" usemap="#ainode_8h_ad6ee4ad6d1d9ecedb64ec631546f6a9e_cgraph" alt=""/></div>
<map name="ainode_8h_ad6ee4ad6d1d9ecedb64ec631546f6a9e_cgraph" id="ainode_8h_ad6ee4ad6d1d9ecedb64ec631546f6a9e_cgraph">
<area shape="rect" title="Writes SIZE bytes from BUFFER into INODE, starting at OFFSET." alt="" coords="5,183,115,209"/>
<area shape="rect" href="block_8c.html#a8c08b3ab03d5cdb52856bab0aafe7006" title="Reads sector SECTOR from BLOCK into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="174,5,261,32"/>
<area shape="rect" href="block_8c.html#ab7e44f7861385a5c4630d899a469f9d4" title="Write sector SECTOR to BLOCK from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="173,56,262,83"/>
<area shape="rect" href="inode_8c.html#a9b48abdaf996c82819f49d6d8fc4c224" title="Returns the block device sector that contains byte offset POS within INODE." alt="" coords="163,107,272,133"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="357,385,403,412"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="912,360,981,387"/>
<area shape="rect" href="inode_8c.html#a67214eb44fb24ef254fca76f9a63fd6d" title="Returns the length, in bytes, of INODE&#39;s data." alt="" coords="168,259,267,285"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="187,715,247,741"/>
<area shape="rect" href="string_8c.html#a75301dc67774ade574b3b3205ee4f39e" title="Copies SIZE bytes from SRC to DST, which must not overlap." alt="" coords="181,765,253,792"/>
<area shape="rect" href="block_8c.html#a987bd0fa2cc9d2510f3756532f120d25" title="Verifies that SECTOR is a valid offset within BLOCK." alt="" coords="330,31,430,57"/>
<area shape="rect" href="block_8c.html#abfb4cd8ff36ddbdf93ebc1944ccfbd4d" title="Returns BLOCK&#39;s name (e.g." alt="" coords="509,31,603,57"/>
<area shape="rect" href="malloc_8c.html#a9c2a4cff5e437e5be52e507be30eea49" title="Returns the (IDX &#45; 1)&#39;th block within arena A." alt="" coords="499,563,613,589"/>
<area shape="rect" href="malloc_8c.html#a5db3c69e2b5fc7fb13fa1f663df2bf03" title="Returns the arena that block B is inside." alt="" coords="691,512,805,539"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a2b0911a5635312de560f8d2a744956ad" title="Inserts ELEM at the beginning of LIST, so that it becomes the front in LIST." alt="" coords="1237,461,1346,488"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1246,411,1337,437"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="699,1095,797,1121"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="699,816,797,843"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="678,309,818,336"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="494,259,618,285"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="915,411,978,437"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="1555,600,1672,627"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1574,524,1653,551"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1411,461,1490,488"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1573,411,1653,437"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1585,461,1641,488"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1246,1171,1337,1197"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="872,1222,1021,1263"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1237,1247,1346,1273"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="900,1095,993,1121"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1412,993,1489,1020"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1395,1171,1507,1197"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1405,943,1496,969"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1241,993,1341,1020"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1236,765,1347,792"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1079,1221,1178,1248"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1579,689,1647,716"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="908,816,985,843"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1409,664,1492,691"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1077,613,1180,640"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1072,917,1185,944"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1255,613,1327,640"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="905,309,988,336"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="877,512,1017,539"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="887,208,1006,235"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1099,233,1158,260"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1069,309,1188,336"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1085,512,1172,539"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="488,765,624,792"/>
<area shape="rect" href="palloc_8c.html#a0c66d7fdb0a9c8da247421261b5ca188" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="320,816,440,843"/>
<area shape="rect" href="bitmap_8c.html#a9ba55f2ff408378a1127282264353651" title="Finds the first group of CNT consecutive bits in B at or after START that are all set to VALUE,..." alt="" coords="672,664,824,691"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="inode_8h_ad6ee4ad6d1d9ecedb64ec631546f6a9e_icgraph.png" border="0" usemap="#ainode_8h_ad6ee4ad6d1d9ecedb64ec631546f6a9e_icgraph" alt=""/></div>
<map name="ainode_8h_ad6ee4ad6d1d9ecedb64ec631546f6a9e_icgraph" id="ainode_8h_ad6ee4ad6d1d9ecedb64ec631546f6a9e_icgraph">
<area shape="rect" title="Writes SIZE bytes from BUFFER into INODE, starting at OFFSET." alt="" coords="720,81,829,108"/>
<area shape="rect" href="directory_8c.html#a86380e077145f4f4ca42e0bd413c79fd" title="Adds a file named NAME to DIR, which must not already contain a file by that name." alt="" coords="592,56,659,83"/>
<area shape="rect" href="directory_8c.html#ae277e450f2d6d436a61adccc0ad5ce23" title="Removes any entry for NAME in DIR." alt="" coords="581,107,670,133"/>
<area shape="rect" href="file_8c.html#a5c3629e8008d2ad73290be83f84d27eb" title="Writes SIZE bytes from BUFFER into FILE, starting at the file&#39;s current position." alt="" coords="438,5,513,32"/>
<area shape="rect" href="file_8c.html#a066213728ed4ad6314a980f50c2c93d7" title="Writes SIZE bytes from BUFFER into FILE, starting at offset FILE_OFS in the file." alt="" coords="579,157,672,184"/>
<area shape="rect" href="filesys_8c.html#aff15830b489ffbb2619bbb71a79656ee" title="Creates a file named NAME with the given INITIAL_SIZE." alt="" coords="423,56,527,83"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="275,56,372,83"/>
<area shape="rect" href="init_8c.html#a119afb30b477e7978c504b34450be746" title="Executes all of the actions specified in ARGV[] up to the null pointer sentinel." alt="" coords="136,81,227,108"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,81,88,108"/>
<area shape="rect" href="filesys_8c.html#ac536ffc3c10934a7f80e43e98b7c75ae" title="Deletes the file named NAME." alt="" coords="420,107,531,133"/>
<area shape="rect" href="fsutil_8c.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="287,107,359,133"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 4 2021 19:31:03 for PKUOS - Pintos by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
