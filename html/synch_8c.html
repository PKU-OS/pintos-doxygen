<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PKUOS - Pintos: src/threads/synch.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PKUOS - Pintos
   </div>
   <div id="projectbrief">Pintos source browser for PKU Operating System course</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_3454632d1a606e9a309cdaae2c26d5ae.html">threads</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">synch.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="synch_8h_source.html">threads/synch.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;<a class="el" href="string_8h_source.html">string.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="interrupt_8h_source.html">threads/interrupt.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="thread_8h_source.html">threads/thread.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for synch.c:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c__incl.png" border="0" usemap="#asrc_2threads_2synch_8c" alt=""/></div>
<map name="asrc_2threads_2synch_8c" id="asrc_2threads_2synch_8c">
<area shape="rect" title=" " alt="" coords="195,5,333,32"/>
<area shape="rect" href="synch_8h.html" title=" " alt="" coords="13,80,129,107"/>
<area shape="rect" title=" " alt="" coords="399,80,460,107"/>
<area shape="rect" href="string_8h.html" title=" " alt="" coords="397,155,462,181"/>
<area shape="rect" href="interrupt_8h.html" title=" " alt="" coords="21,155,152,181"/>
<area shape="rect" href="thread_8h.html" title=" " alt="" coords="205,80,323,107"/>
<area shape="rect" href="list_8h.html" title=" " alt="" coords="177,155,226,181"/>
<area shape="rect" href="stdbool_8h.html" title=" " alt="" coords="49,229,125,256"/>
<area shape="rect" href="stddef_8h.html" title=" " alt="" coords="327,229,396,256"/>
<area shape="rect" href="stdint_8h.html" title=" " alt="" coords="169,229,234,256"/>
<area shape="rect" href="debug_8h.html" title=" " alt="" coords="302,155,373,181"/>
</map>
</div>
</div>
<p><a href="synch_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsemaphore__elem.html">semaphore_elem</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">One semaphore in a list.  <a href="structsemaphore__elem.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1349a31f4880cf4eae026761f0ab3343"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="synch_8c.html#a1349a31f4880cf4eae026761f0ab3343">sema_init</a> (struct <a class="el" href="structsemaphore.html">semaphore</a> *<a class="el" href="priority-sema_8c.html#af6476a22ddf8026fd0e33c1f4d5ee428">sema</a>, unsigned <a class="el" href="structvalue.html">value</a>)</td></tr>
<tr class="memdesc:a1349a31f4880cf4eae026761f0ab3343"><td class="mdescLeft">&#160;</td><td class="mdescRight">This file is derived from source code for the Nachos instructional operating system.  <a href="synch_8c.html#a1349a31f4880cf4eae026761f0ab3343">More...</a><br /></td></tr>
<tr class="separator:a1349a31f4880cf4eae026761f0ab3343"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae10ded72d3b93a832b7107566f09286c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c">sema_down</a> (struct <a class="el" href="structsemaphore.html">semaphore</a> *<a class="el" href="priority-sema_8c.html#af6476a22ddf8026fd0e33c1f4d5ee428">sema</a>)</td></tr>
<tr class="memdesc:ae10ded72d3b93a832b7107566f09286c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Down or "P" operation on a semaphore.  <a href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c">More...</a><br /></td></tr>
<tr class="separator:ae10ded72d3b93a832b7107566f09286c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e4e794129baf4a30244058661afa31a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="synch_8c.html#a1e4e794129baf4a30244058661afa31a">sema_try_down</a> (struct <a class="el" href="structsemaphore.html">semaphore</a> *<a class="el" href="priority-sema_8c.html#af6476a22ddf8026fd0e33c1f4d5ee428">sema</a>)</td></tr>
<tr class="memdesc:a1e4e794129baf4a30244058661afa31a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Down or "P" operation on a semaphore, but only if the semaphore is not already 0.  <a href="synch_8c.html#a1e4e794129baf4a30244058661afa31a">More...</a><br /></td></tr>
<tr class="separator:a1e4e794129baf4a30244058661afa31a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6da4176e1c419bd4467b181c66b077da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da">sema_up</a> (struct <a class="el" href="structsemaphore.html">semaphore</a> *<a class="el" href="priority-sema_8c.html#af6476a22ddf8026fd0e33c1f4d5ee428">sema</a>)</td></tr>
<tr class="memdesc:a6da4176e1c419bd4467b181c66b077da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Up or "V" operation on a semaphore.  <a href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da">More...</a><br /></td></tr>
<tr class="separator:a6da4176e1c419bd4467b181c66b077da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57b7a9021b4a9c32f00065da020e96cd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="synch_8c.html#a57b7a9021b4a9c32f00065da020e96cd">sema_test_helper</a> (void *sema_)</td></tr>
<tr class="memdesc:a57b7a9021b4a9c32f00065da020e96cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread function used by <a class="el" href="synch_8c.html#ac007e29a5442996a099aa8172f5e046a" title="Self-test for semaphores that makes control &quot;ping-pong&quot; between a pair of threads.">sema_self_test()</a>.  <a href="synch_8c.html#a57b7a9021b4a9c32f00065da020e96cd">More...</a><br /></td></tr>
<tr class="separator:a57b7a9021b4a9c32f00065da020e96cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac007e29a5442996a099aa8172f5e046a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="synch_8c.html#ac007e29a5442996a099aa8172f5e046a">sema_self_test</a> (void)</td></tr>
<tr class="memdesc:ac007e29a5442996a099aa8172f5e046a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Self-test for semaphores that makes control "ping-pong" between a pair of threads.  <a href="synch_8c.html#ac007e29a5442996a099aa8172f5e046a">More...</a><br /></td></tr>
<tr class="separator:ac007e29a5442996a099aa8172f5e046a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa760472aa4916bba476b2165ea25b411"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="synch_8c.html#aa760472aa4916bba476b2165ea25b411">lock_init</a> (struct <a class="el" href="structlock.html">lock</a> *<a class="el" href="structlock.html">lock</a>)</td></tr>
<tr class="memdesc:aa760472aa4916bba476b2165ea25b411"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes LOCK.  <a href="synch_8c.html#aa760472aa4916bba476b2165ea25b411">More...</a><br /></td></tr>
<tr class="separator:aa760472aa4916bba476b2165ea25b411"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9021f4c36b4b177c557e0ed8967d048"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048">lock_acquire</a> (struct <a class="el" href="structlock.html">lock</a> *<a class="el" href="structlock.html">lock</a>)</td></tr>
<tr class="memdesc:aa9021f4c36b4b177c557e0ed8967d048"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acquires LOCK, sleeping until it becomes available if necessary.  <a href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048">More...</a><br /></td></tr>
<tr class="separator:aa9021f4c36b4b177c557e0ed8967d048"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a343f11e4ce80e077a18e565b6d9ac180"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="synch_8c.html#a343f11e4ce80e077a18e565b6d9ac180">lock_try_acquire</a> (struct <a class="el" href="structlock.html">lock</a> *<a class="el" href="structlock.html">lock</a>)</td></tr>
<tr class="memdesc:a343f11e4ce80e077a18e565b6d9ac180"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries to acquires LOCK and returns true if successful or false on failure.  <a href="synch_8c.html#a343f11e4ce80e077a18e565b6d9ac180">More...</a><br /></td></tr>
<tr class="separator:a343f11e4ce80e077a18e565b6d9ac180"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0616a97ad47869923552432c218f068a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="synch_8c.html#a0616a97ad47869923552432c218f068a">lock_release</a> (struct <a class="el" href="structlock.html">lock</a> *<a class="el" href="structlock.html">lock</a>)</td></tr>
<tr class="memdesc:a0616a97ad47869923552432c218f068a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Releases LOCK, which must be owned by the current thread.  <a href="synch_8c.html#a0616a97ad47869923552432c218f068a">More...</a><br /></td></tr>
<tr class="separator:a0616a97ad47869923552432c218f068a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3564cf7ad3b72bee0dd6cdd211ccd666"><td class="memItemLeft" align="right" valign="top"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666">lock_held_by_current_thread</a> (const struct <a class="el" href="structlock.html">lock</a> *<a class="el" href="structlock.html">lock</a>)</td></tr>
<tr class="memdesc:a3564cf7ad3b72bee0dd6cdd211ccd666"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if the current thread holds LOCK, false otherwise.  <a href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666">More...</a><br /></td></tr>
<tr class="separator:a3564cf7ad3b72bee0dd6cdd211ccd666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8a9f4893206d0c104633ad5c058ba16"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="synch_8c.html#af8a9f4893206d0c104633ad5c058ba16">cond_init</a> (struct <a class="el" href="structcondition.html">condition</a> *cond)</td></tr>
<tr class="memdesc:af8a9f4893206d0c104633ad5c058ba16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes condition variable COND.  <a href="synch_8c.html#af8a9f4893206d0c104633ad5c058ba16">More...</a><br /></td></tr>
<tr class="separator:af8a9f4893206d0c104633ad5c058ba16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a408896d5b2af213dc2a8da984c696419"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="synch_8c.html#a408896d5b2af213dc2a8da984c696419">cond_wait</a> (struct <a class="el" href="structcondition.html">condition</a> *cond, struct <a class="el" href="structlock.html">lock</a> *<a class="el" href="structlock.html">lock</a>)</td></tr>
<tr class="memdesc:a408896d5b2af213dc2a8da984c696419"><td class="mdescLeft">&#160;</td><td class="mdescRight">Atomically releases LOCK and waits for COND to be signaled by some other piece of code.  <a href="synch_8c.html#a408896d5b2af213dc2a8da984c696419">More...</a><br /></td></tr>
<tr class="separator:a408896d5b2af213dc2a8da984c696419"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4534660eba2b75a5e5e34590d743f685"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="synch_8c.html#a4534660eba2b75a5e5e34590d743f685">cond_signal</a> (struct <a class="el" href="structcondition.html">condition</a> *cond, struct <a class="el" href="structlock.html">lock</a> *<a class="el" href="structlock.html">lock</a> <a class="el" href="debug_8h.html#addf5ec070e9499d36b7f2009ce736076">UNUSED</a>)</td></tr>
<tr class="memdesc:a4534660eba2b75a5e5e34590d743f685"><td class="mdescLeft">&#160;</td><td class="mdescRight">If any threads are waiting on COND (protected by LOCK), then this function signals one of them to wake up from its wait.  <a href="synch_8c.html#a4534660eba2b75a5e5e34590d743f685">More...</a><br /></td></tr>
<tr class="separator:a4534660eba2b75a5e5e34590d743f685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd647748214f5f33ba24336941ffeb11"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="synch_8c.html#abd647748214f5f33ba24336941ffeb11">cond_broadcast</a> (struct <a class="el" href="structcondition.html">condition</a> *cond, struct <a class="el" href="structlock.html">lock</a> *<a class="el" href="structlock.html">lock</a>)</td></tr>
<tr class="memdesc:abd647748214f5f33ba24336941ffeb11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wakes up all threads, if any, waiting on COND (protected by LOCK).  <a href="synch_8c.html#abd647748214f5f33ba24336941ffeb11">More...</a><br /></td></tr>
<tr class="separator:abd647748214f5f33ba24336941ffeb11"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="abd647748214f5f33ba24336941ffeb11" name="abd647748214f5f33ba24336941ffeb11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd647748214f5f33ba24336941ffeb11">&#9670;&nbsp;</a></span>cond_broadcast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cond_broadcast </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcondition.html">condition</a> *&#160;</td>
          <td class="paramname"><em>cond</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlock.html">lock</a> *&#160;</td>
          <td class="paramname"><em>lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wakes up all threads, if any, waiting on COND (protected by LOCK). </p>
<p >LOCK must be held before calling this function.</p>
<p >An interrupt handler cannot acquire a lock, so it does not make sense to try to signal a condition variable within an interrupt handler. </p>

<p class="definition">Definition at line <a class="el" href="synch_8c_source.html#l00331">331</a> of file <a class="el" href="synch_8c_source.html">synch.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="synch_8c_source.html#l00312">cond_signal()</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00310">list_empty()</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, and <a class="el" href="synch_8h_source.html#l00036">condition::waiters</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_abd647748214f5f33ba24336941ffeb11_cgraph.png" border="0" usemap="#asynch_8c_abd647748214f5f33ba24336941ffeb11_cgraph" alt=""/></div>
<map name="asynch_8c_abd647748214f5f33ba24336941ffeb11_cgraph" id="asynch_8c_abd647748214f5f33ba24336941ffeb11_cgraph">
<area shape="rect" title="Wakes up all threads, if any, waiting on COND (protected by LOCK)." alt="" coords="5,478,123,505"/>
<area shape="rect" href="synch_8c.html#a4534660eba2b75a5e5e34590d743f685" title="If any threads are waiting on COND (protected by LOCK), then this function signals one of them to wak..." alt="" coords="171,326,264,353"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="848,453,931,479"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1001,123,1092,150"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="515,402,617,429"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="312,163,461,204"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="348,275,425,302"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1007,453,1086,479"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1013,402,1081,429"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="691,453,763,479"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="844,402,935,429"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1007,351,1087,378"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="511,98,621,125"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="688,98,765,125"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="671,47,783,74"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="831,47,948,74"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="844,199,935,226"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="677,149,777,175"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="509,199,623,226"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="996,174,1097,201"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="845,149,933,175"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="671,301,782,327"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="850,301,929,327"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1019,301,1075,327"/>
</map>
</div>

</div>
</div>
<a id="af8a9f4893206d0c104633ad5c058ba16" name="af8a9f4893206d0c104633ad5c058ba16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8a9f4893206d0c104633ad5c058ba16">&#9670;&nbsp;</a></span>cond_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cond_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcondition.html">condition</a> *&#160;</td>
          <td class="paramname"><em>cond</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes condition variable COND. </p>
<p >A condition variable allows one piece of code to signal a condition and cooperating code to receive the signal and act upon it. </p>

<p class="definition">Definition at line <a class="el" href="synch_8c_source.html#l00260">260</a> of file <a class="el" href="synch_8c_source.html">synch.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00061">list_init()</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, and <a class="el" href="synch_8h_source.html#l00036">condition::waiters</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_af8a9f4893206d0c104633ad5c058ba16_cgraph.png" border="0" usemap="#asynch_8c_af8a9f4893206d0c104633ad5c058ba16_cgraph" alt=""/></div>
<map name="asynch_8c_af8a9f4893206d0c104633ad5c058ba16_cgraph" id="asynch_8c_af8a9f4893206d0c104633ad5c058ba16_cgraph">
<area shape="rect" title="Initializes condition variable COND." alt="" coords="5,5,81,32"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a8aa862d10f52f7b0348fce990c7c12db" title="Initializes LIST as an empty list." alt="" coords="129,5,192,32"/>
</map>
</div>

</div>
</div>
<a id="a4534660eba2b75a5e5e34590d743f685" name="a4534660eba2b75a5e5e34590d743f685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4534660eba2b75a5e5e34590d743f685">&#9670;&nbsp;</a></span>cond_signal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cond_signal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcondition.html">condition</a> *&#160;</td>
          <td class="paramname"><em>cond</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlock.html">lock</a> *<a class="el" href="structlock.html">lock</a>&#160;</td>
          <td class="paramname"><em>UNUSED</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If any threads are waiting on COND (protected by LOCK), then this function signals one of them to wake up from its wait. </p>
<p >LOCK must be held before calling this function.</p>
<p >An interrupt handler cannot acquire a lock, so it does not make sense to try to signal a condition variable within an interrupt handler. </p>

<p class="definition">Definition at line <a class="el" href="synch_8c_source.html#l00312">312</a> of file <a class="el" href="synch_8c_source.html">synch.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="synch_8c_source.html#l00252">semaphore_elem::elem</a>, <a class="el" href="interrupt_8c_source.html#l00212">intr_context()</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00310">list_empty()</a>, <a class="el" href="list_8h_source.html#l00108">list_entry</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00260">list_pop_front()</a>, <a class="el" href="synch_8c_source.html#l00242">lock_held_by_current_thread()</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, <a class="el" href="synch_8c_source.html#l00109">sema_up()</a>, and <a class="el" href="synch_8h_source.html#l00036">condition::waiters</a>.</p>

<p class="reference">Referenced by <a class="el" href="synch_8c_source.html#l00331">cond_broadcast()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_a4534660eba2b75a5e5e34590d743f685_cgraph.png" border="0" usemap="#asynch_8c_a4534660eba2b75a5e5e34590d743f685_cgraph" alt=""/></div>
<map name="asynch_8c_a4534660eba2b75a5e5e34590d743f685_cgraph" id="asynch_8c_a4534660eba2b75a5e5e34590d743f685_cgraph">
<area shape="rect" title="If any threads are waiting on COND (protected by LOCK), then this function signals one of them to wak..." alt="" coords="5,397,99,424"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="836,17,927,44"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="683,391,765,417"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="349,397,452,424"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="147,499,296,541"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="183,271,260,297"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="842,391,921,417"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="847,315,915,341"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="525,397,597,424"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="679,296,769,323"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="841,252,921,279"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="346,503,455,529"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="523,245,600,272"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="505,503,617,529"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="665,503,783,529"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="679,93,769,120"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="511,43,611,69"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="344,195,457,221"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="831,81,932,108"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="680,43,768,69"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="506,195,617,221"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="685,195,763,221"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="853,195,909,221"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_a4534660eba2b75a5e5e34590d743f685_icgraph.png" border="0" usemap="#asynch_8c_a4534660eba2b75a5e5e34590d743f685_icgraph" alt=""/></div>
<map name="asynch_8c_a4534660eba2b75a5e5e34590d743f685_icgraph" id="asynch_8c_a4534660eba2b75a5e5e34590d743f685_icgraph">
<area shape="rect" title="If any threads are waiting on COND (protected by LOCK), then this function signals one of them to wak..." alt="" coords="171,5,264,32"/>
<area shape="rect" href="synch_8c.html#abd647748214f5f33ba24336941ffeb11" title="Wakes up all threads, if any, waiting on COND (protected by LOCK)." alt="" coords="5,5,123,32"/>
</map>
</div>

</div>
</div>
<a id="a408896d5b2af213dc2a8da984c696419" name="a408896d5b2af213dc2a8da984c696419"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a408896d5b2af213dc2a8da984c696419">&#9670;&nbsp;</a></span>cond_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cond_wait </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structcondition.html">condition</a> *&#160;</td>
          <td class="paramname"><em>cond</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structlock.html">lock</a> *&#160;</td>
          <td class="paramname"><em>lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Atomically releases LOCK and waits for COND to be signaled by some other piece of code. </p>
<p >After COND is signaled, LOCK is reacquired before returning. LOCK must be held before calling this function.</p>
<p >The monitor implemented by this function is "Mesa" style, not "Hoare" style, that is, sending and receiving a signal are not an atomic operation. Thus, typically the caller must recheck the condition after the wait completes and, if necessary, wait again.</p>
<p >A given condition variable is associated with only a single lock, but one lock may be associated with any number of condition variables. That is, there is a one-to-many mapping from locks to condition variables.</p>
<p >This function may sleep, so it must not be called within an interrupt handler. This function may be called with interrupts disabled, but interrupts will be turned back on if we need to sleep. </p>

<p class="definition">Definition at line <a class="el" href="synch_8c_source.html#l00288">288</a> of file <a class="el" href="synch_8c_source.html">synch.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="synch_8c_source.html#l00252">semaphore_elem::elem</a>, <a class="el" href="interrupt_8c_source.html#l00212">intr_context()</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00217">list_push_back()</a>, <a class="el" href="synch_8c_source.html#l00193">lock_acquire()</a>, <a class="el" href="synch_8c_source.html#l00242">lock_held_by_current_thread()</a>, <a class="el" href="synch_8c_source.html#l00229">lock_release()</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, <a class="el" href="synch_8c_source.html#l00061">sema_down()</a>, <a class="el" href="synch_8c_source.html#l00045">sema_init()</a>, <a class="el" href="synch_8c_source.html#l00253">semaphore_elem::semaphore</a>, and <a class="el" href="synch_8h_source.html#l00036">condition::waiters</a>.</p>

<p class="reference">Referenced by <a class="el" href="priority-condvar_8c_source.html#l00046">priority_condvar_thread()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_a408896d5b2af213dc2a8da984c696419_cgraph.png" border="0" usemap="#asynch_8c_a408896d5b2af213dc2a8da984c696419_cgraph" alt=""/></div>
<map name="asynch_8c_a408896d5b2af213dc2a8da984c696419_cgraph" id="asynch_8c_a408896d5b2af213dc2a8da984c696419_cgraph">
<area shape="rect" title="Atomically releases LOCK and waits for COND to be signaled by some other piece of code." alt="" coords="5,413,88,440"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1009,245,1099,272"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="640,1005,751,1032"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="136,312,233,339"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="281,330,431,371"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="309,464,403,491"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="136,413,233,440"/>
<area shape="rect" href="synch_8c.html#a1349a31f4880cf4eae026761f0ab3343" title="This file is derived from source code for the Nachos instructional operating system." alt="" coords="145,1157,224,1184"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1565,1081,1633,1108"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="832,1005,911,1032"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1382,1056,1462,1083"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1026,1056,1082,1083"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1367,271,1477,297"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1561,549,1638,576"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1543,448,1655,475"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="1707,448,1824,475"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="826,853,917,880"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="645,752,745,779"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="486,464,585,491"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1003,701,1105,728"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="827,651,915,677"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="657,524,733,551"/>
<area shape="rect" href="intq_8c.html#ac473f50d2829cba1321d34a57c425042" title="Returns the position after POS within an intq." alt="" coords="848,448,895,475"/>
<area shape="rect" href="thread_8c.html#ace7a46dcf0f5c9c4cbb8f47a5b3c76f5" title="Chooses and returns the next thread to be scheduled." alt="" coords="803,803,940,829"/>
<area shape="rect" href="switch_8h.html#a72fbed245d8de7e36d70eb4682682c98" title="Switches from CUR, which must be the running thread, to NEXT, which must also be running switch_threa..." alt="" coords="816,499,927,525"/>
<area shape="rect" href="thread_8c.html#acbbd25908c41e62d44a179cfbc3962e2" title="Completes a thread switch by activating the new thread&#39;s page tables, and, if the previous thread is ..." alt="" coords="799,600,944,627"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1381,955,1463,981"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1003,955,1105,981"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1560,955,1639,981"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1198,955,1270,981"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1189,1005,1279,1032"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="992,625,1116,652"/>
<area shape="rect" href="process_8c.html#a23823b283ef2815ecc5ae19e772dac24" title="Sets up the CPU for running user code in the current thread." alt="" coords="993,372,1115,399"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="1164,701,1304,728"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1381,853,1463,880"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1352,651,1492,677"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1387,600,1457,627"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1363,701,1481,728"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1570,752,1629,779"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1391,803,1453,829"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1540,853,1659,880"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1556,651,1643,677"/>
<area shape="rect" href="bitmap_8c.html#a576f7d29f091eac024f70ae8d68997a9" title="Bitmap size." alt="" coords="1553,701,1646,728"/>
<area shape="rect" href="pagedir_8c.html#ac0a75950cc56724fef94d224df4b0cd0" title="Loads page directory PD into the CPU&#39;s page directory base register." alt="" coords="1174,397,1294,424"/>
<area shape="rect" href="tss_8c.html#a089f0d1278964a0cc36f92d47febd2d4" title="Sets the ring 0 stack pointer in the TSS to point to the end of the thread stack." alt="" coords="1191,347,1277,373"/>
<area shape="rect" href="vaddr_8h.html#a0f6ff2f4a18892d83d6e1c1a3c2d9f9b" title="Returns physical address at which kernel virtual address VADDR is mapped." alt="" coords="1399,397,1445,424"/>
<area shape="rect" href="vaddr_8h.html#ad3a451f5e710dfb7831cb7be9a1e04f5" title="Returns true if VADDR is a kernel virtual address." alt="" coords="1541,397,1657,424"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="317,828,395,855"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="479,853,592,880"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a8aa862d10f52f7b0348fce990c7c12db" title="Initializes LIST as an empty list." alt="" coords="325,1157,387,1184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_a408896d5b2af213dc2a8da984c696419_icgraph.png" border="0" usemap="#asynch_8c_a408896d5b2af213dc2a8da984c696419_icgraph" alt=""/></div>
<map name="asynch_8c_a408896d5b2af213dc2a8da984c696419_icgraph" id="asynch_8c_a408896d5b2af213dc2a8da984c696419_icgraph">
<area shape="rect" title="Atomically releases LOCK and waits for COND to be signaled by some other piece of code." alt="" coords="216,5,299,32"/>
<area shape="rect" href="priority-condvar_8c.html#a0a388ce73d55720aac505642bc72ce37" title=" " alt="" coords="5,5,168,32"/>
</map>
</div>

</div>
</div>
<a id="aa9021f4c36b4b177c557e0ed8967d048" name="aa9021f4c36b4b177c557e0ed8967d048"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9021f4c36b4b177c557e0ed8967d048">&#9670;&nbsp;</a></span>lock_acquire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lock_acquire </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlock.html">lock</a> *&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acquires LOCK, sleeping until it becomes available if necessary. </p>
<p >The lock must not already be held by the current thread.</p>
<p >This function may sleep, so it must not be called within an interrupt handler. This function may be called with interrupts disabled, but interrupts will be turned back on if we need to sleep. </p>

<p class="definition">Definition at line <a class="el" href="synch_8c_source.html#l00193">193</a> of file <a class="el" href="synch_8c_source.html">synch.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="synch_8h_source.html#l00023">lock::holder</a>, <a class="el" href="interrupt_8c_source.html#l00212">intr_context()</a>, <a class="el" href="synch_8c_source.html#l00242">lock_held_by_current_thread()</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, <a class="el" href="synch_8c_source.html#l00061">sema_down()</a>, <a class="el" href="synch_8h_source.html#l00024">lock::semaphore</a>, and <a class="el" href="thread_8c_source.html#l00256">thread_current()</a>.</p>

<p class="reference">Referenced by <a class="el" href="priority-donate-multiple_8c_source.html#l00058">a_thread_func()</a>, <a class="el" href="priority-donate-one_8c_source.html#l00046">acquire1_thread_func()</a>, <a class="el" href="priority-donate-one_8c_source.html#l00057">acquire2_thread_func()</a>, <a class="el" href="kernel_2console_8c_source.html#l00088">acquire_console()</a>, <a class="el" href="priority-donate-lower_8c_source.html#l00043">acquire_thread_func()</a>, <a class="el" href="thread_8c_source.html#l00570">allocate_tid()</a>, <a class="el" href="priority-donate-multiple_8c_source.html#l00069">b_thread_func()</a>, <a class="el" href="mlfqs-block_8c_source.html#l00050">block_thread()</a>, <a class="el" href="synch_8c_source.html#l00288">cond_wait()</a>, <a class="el" href="priority-donate-chain_8c_source.html#l00086">donor_thread_func()</a>, <a class="el" href="malloc_8c_source.html#l00219">free()</a>, <a class="el" href="priority-donate-sema_8c_source.html#l00072">h_thread_func()</a>, <a class="el" href="priority-donate-nest_8c_source.html#l00086">high_thread_func()</a>, <a class="el" href="ide_8c_source.html#l00345">ide_read()</a>, <a class="el" href="ide_8c_source.html#l00365">ide_write()</a>, <a class="el" href="intq_8c_source.html#l00038">intq_getc()</a>, <a class="el" href="intq_8c_source.html#l00061">intq_putc()</a>, <a class="el" href="priority-donate-sema_8c_source.html#l00050">l_thread_func()</a>, <a class="el" href="malloc_8c_source.html#l00090">malloc()</a>, <a class="el" href="priority-donate-nest_8c_source.html#l00064">medium_thread_func()</a>, <a class="el" href="palloc_8c_source.html#l00071">palloc_get_multiple()</a>, <a class="el" href="priority-condvar_8c_source.html#l00046">priority_condvar_thread()</a>, <a class="el" href="priority-fifo_8c_source.html#l00087">simple_thread_func()</a>, <a class="el" href="alarm-wait_8c_source.html#l00138">sleeper()</a>, and <a class="el" href="alarm-wait_8c_source.html#l00051">test_sleep()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_aa9021f4c36b4b177c557e0ed8967d048_cgraph.png" border="0" usemap="#asynch_8c_aa9021f4c36b4b177c557e0ed8967d048_cgraph" alt=""/></div>
<map name="asynch_8c_aa9021f4c36b4b177c557e0ed8967d048_cgraph" id="asynch_8c_aa9021f4c36b4b177c557e0ed8967d048_cgraph">
<area shape="rect" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="5,764,103,791"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="662,411,753,437"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="151,955,300,997"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1203,943,1313,969"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="179,664,272,691"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1397,904,1474,931"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1379,563,1491,589"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="1543,563,1660,589"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="496,664,587,691"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="348,613,448,640"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="835,259,945,285"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="349,765,447,792"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="839,740,941,767"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="497,613,585,640"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1401,271,1469,297"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1031,56,1109,83"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1218,56,1298,83"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1230,5,1286,32"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="503,765,579,792"/>
<area shape="rect" href="intq_8c.html#ac473f50d2829cba1321d34a57c425042" title="Returns the position after POS within an intq." alt="" coords="684,765,731,792"/>
<area shape="rect" href="thread_8c.html#ace7a46dcf0f5c9c4cbb8f47a5b3c76f5" title="Chooses and returns the next thread to be scheduled." alt="" coords="639,461,776,488"/>
<area shape="rect" href="switch_8h.html#a72fbed245d8de7e36d70eb4682682c98" title="Switches from CUR, which must be the running thread, to NEXT, which must also be running switch_threa..." alt="" coords="652,715,763,741"/>
<area shape="rect" href="thread_8c.html#acbbd25908c41e62d44a179cfbc3962e2" title="Completes a thread switch by activating the new thread&#39;s page tables, and, if the previous thread is ..." alt="" coords="635,563,780,589"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1217,461,1299,488"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="839,360,941,387"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1396,461,1475,488"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1034,385,1106,412"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1025,157,1115,184"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="828,411,952,437"/>
<area shape="rect" href="process_8c.html#a23823b283ef2815ecc5ae19e772dac24" title="Sets up the CPU for running user code in the current thread." alt="" coords="829,689,951,716"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="1000,309,1140,336"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1217,360,1299,387"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1188,107,1328,133"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1223,411,1293,437"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1199,208,1317,235"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1406,157,1465,184"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1227,309,1289,336"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1376,347,1495,373"/>
<area shape="rect" href="bitmap_8c.html#ab8d6660c5e30dab9cecef1240c7423d9" title="Returns the value of the bit numbered IDX in B." alt="" coords="1556,208,1647,235"/>
<area shape="rect" href="bitmap_8c.html#acc12f810fdb7b50a620c3852c3656d63" title="Returns an elem_type where only the bit corresponding to BIT_IDX is turned on." alt="" coords="1708,183,1784,209"/>
<area shape="rect" href="bitmap_8c.html#abb94f95006e0ec6ff6b5c88262f28d74" title="Returns the index of the element that contains the bit numbered BIT_IDX." alt="" coords="1708,132,1784,159"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1392,107,1479,133"/>
<area shape="rect" href="bitmap_8c.html#adb8912537854d4a2dcb1f35940a7134b" title="Atomically sets the bit numbered BIT_IDX in B to true." alt="" coords="1552,107,1651,133"/>
<area shape="rect" href="bitmap_8c.html#a5bb6be898ca442c95e725be80c2369a6" title="Atomically sets the bit numbered BIT_IDX in B to false." alt="" coords="1552,157,1651,184"/>
<area shape="rect" href="bitmap_8c.html#a576f7d29f091eac024f70ae8d68997a9" title="Bitmap size." alt="" coords="1389,208,1482,235"/>
<area shape="rect" href="pagedir_8c.html#ac0a75950cc56724fef94d224df4b0cd0" title="Loads page directory PD into the CPU&#39;s page directory base register." alt="" coords="1010,689,1130,716"/>
<area shape="rect" href="tss_8c.html#a089f0d1278964a0cc36f92d47febd2d4" title="Sets the ring 0 stack pointer in the TSS to point to the end of the thread stack." alt="" coords="1027,917,1113,944"/>
<area shape="rect" href="vaddr_8h.html#a0f6ff2f4a18892d83d6e1c1a3c2d9f9b" title="Returns physical address at which kernel virtual address VADDR is mapped." alt="" coords="1235,689,1281,716"/>
<area shape="rect" href="vaddr_8h.html#ad3a451f5e710dfb7831cb7be9a1e04f5" title="Returns true if VADDR is a kernel virtual address." alt="" coords="1377,689,1493,716"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_aa9021f4c36b4b177c557e0ed8967d048_icgraph.png" border="0" usemap="#asynch_8c_aa9021f4c36b4b177c557e0ed8967d048_icgraph" alt=""/></div>
<map name="asynch_8c_aa9021f4c36b4b177c557e0ed8967d048_icgraph" id="asynch_8c_aa9021f4c36b4b177c557e0ed8967d048_icgraph">
<area shape="rect" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="877,613,975,640"/>
<area shape="rect" href="priority-donate-multiple_8c.html#a56379b758fb21b5a67de1a87d2a74672" title=" " alt="" coords="701,5,807,32"/>
<area shape="rect" href="priority-donate-one_8c.html#adbcd765439b4d960f0db9ba4a47d421f" title=" " alt="" coords="679,56,829,83"/>
<area shape="rect" href="priority-donate-one_8c.html#aae18eed8351e7789ef848517a96284a5" title=" " alt="" coords="679,107,829,133"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="695,157,813,184"/>
<area shape="rect" href="priority-donate-lower_8c.html#ab955dabdbbfc7a7a188317e70b95ef04" title=" " alt="" coords="682,208,826,235"/>
<area shape="rect" href="thread_8c.html#a382e72d5d2fb4cfe2b5034eb62a887c8" title="Returns a tid to use for a new thread." alt="" coords="709,259,799,285"/>
<area shape="rect" href="priority-donate-multiple_8c.html#af257d61c4fea017f52981dbe2a40534b" title=" " alt="" coords="701,461,807,488"/>
<area shape="rect" href="mlfqs-block_8c.html#afae0754a3b814ae247351cc6ee14276c" title="Checks that recent_cpu and priorities are updated for blocked threads." alt="" coords="705,512,803,539"/>
<area shape="rect" href="synch_8c.html#a408896d5b2af213dc2a8da984c696419" title="Atomically releases LOCK and waits for COND to be signaled by some other piece of code." alt="" coords="713,563,795,589"/>
<area shape="rect" href="priority-condvar_8c.html#a0a388ce73d55720aac505642bc72ce37" title=" " alt="" coords="468,613,631,640"/>
<area shape="rect" href="priority-donate-chain_8c.html#af3ea65daade3a57b9afbfaf87d187dfd" title=" " alt="" coords="687,664,821,691"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="527,563,572,589"/>
<area shape="rect" href="priority-donate-sema_8c.html#a85675782bf8084df44707dfcfd2d7ae8" title=" " alt="" coords="701,715,807,741"/>
<area shape="rect" href="priority-donate-nest_8c.html#acc1e53225c07946f00921d331e5736c5" title=" " alt="" coords="691,765,817,792"/>
<area shape="rect" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="717,816,791,843"/>
<area shape="rect" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49" title="Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="716,867,792,893"/>
<area shape="rect" href="intq_8c.html#a45ba970f3357ff262d7fafecc50735c6" title="Removes a byte from Q and returns it." alt="" coords="716,917,792,944"/>
<area shape="rect" href="intq_8c.html#a6a440110d5417c12cedf1c2e86f445f8" title="Adds BYTE to the end of Q." alt="" coords="716,968,792,995"/>
<area shape="rect" href="priority-donate-sema_8c.html#aeb0f97fa3c6d25534de6a11bf3532aa3" title=" " alt="" coords="703,1019,805,1045"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="519,309,579,336"/>
<area shape="rect" href="priority-donate-nest_8c.html#ada3ddea14ea0cb3220f0a00cfa7929dc" title=" " alt="" coords="681,1069,827,1096"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="686,309,822,336"/>
<area shape="rect" href="priority-fifo_8c.html#a09afbb5707a2af609420fccb0795b96c" title=" " alt="" coords="685,1120,823,1147"/>
<area shape="rect" href="alarm-wait_8c.html#a208a74d5680b1bc8dab4e3978fc23d98" title="Sleeper thread." alt="" coords="721,1171,787,1197"/>
<area shape="rect" href="alarm-wait_8c.html#a46bbfad063bc4c9983350bd522fe6fbb" title="Creates N threads, each of which sleeps a different, fixed duration, M times." alt="" coords="508,1196,591,1223"/>
<area shape="rect" href="kernel_2console_8c.html#a6912abfdc7e2b2345da944f82cb8305b" title="Writes the N characters in BUFFER to the console." alt="" coords="520,107,579,133"/>
<area shape="rect" href="kernel_2console_8c.html#af4de2514b7778805db3815e8dd6cf09a" title="Writes C to the vga display and serial port." alt="" coords="516,157,583,184"/>
<area shape="rect" href="kernel_2console_8c.html#ad41876f99f190c7488e64ef39c50a23f" title="Writes string S to the console, followed by a new&#45;line character." alt="" coords="526,208,573,235"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="520,56,579,83"/>
<area shape="rect" href="thread_8c.html#a8f7759a71c1c49fc8761ef92aa90a36d" title="Creates a new kernel thread named NAME with the given initial PRIORITY, which executes FUNCTION passi..." alt="" coords="497,259,601,285"/>
<area shape="rect" href="alarm-simultaneous_8c.html#a46bbfad063bc4c9983350bd522fe6fbb" title="Creates N threads, each of which sleeps a different, fixed duration, M times." alt="" coords="309,133,391,160"/>
<area shape="rect" href="bitmap_8c.html#af3d1070908c2f73d4b18741f7fb5695e" title="Creation and destruction." alt="" coords="297,461,403,488"/>
<area shape="rect" href="bitmap_8c.html#adacf8862f49d7e7ceb1ba2368dd76698" title="Destroys bitmap B, freeing its storage." alt="" coords="293,968,407,995"/>
<area shape="rect" href="directory_8c.html#a92d246b6a292843fdfd7e3e1d2b29701" title="Destroys DIR and frees associated resources." alt="" coords="155,777,231,804"/>
<area shape="rect" href="directory_8c.html#a12c77ad2315eb1079f7914b1b1b27ce2" title="Opens and returns the directory for the given INODE, of which it takes ownership." alt="" coords="157,835,230,861"/>
<area shape="rect" href="file_8c.html#a4d12e9de7ab756bef5396c7b37698c9a" title="Closes FILE." alt="" coords="155,613,232,640"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="5,563,107,589"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="7,613,105,640"/>
<area shape="rect" href="file_8c.html#a57cca369d13720dba680d09f76f96c70" title="Opens a file for the given INODE, of which it takes ownership, and returns the new file." alt="" coords="155,911,231,937"/>
<area shape="rect" href="hash_8c.html#ac69fc1bec8463507c3967d0f77653125" title="Destroys hash table H." alt="" coords="299,664,401,691"/>
<area shape="rect" href="inode_8c.html#a74e1a19b5bcae248617541fe6f2f77c5" title="Closes INODE and writes it to disk." alt="" coords="303,816,397,843"/>
<area shape="rect" href="inode_8c.html#aa867b845d1fde30169c685397e05ac3f" title="Initializes an inode with LENGTH bytes of data and writes the new inode to sector SECTOR on the file ..." alt="" coords="301,715,399,741"/>
<area shape="rect" href="inode_8c.html#a31fcd756c686b818d56067b4460bfdb9" title="Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET." alt="" coords="297,285,403,312"/>
<area shape="rect" href="inode_8c.html#a09402d2c8d33dc00b2557daa27d944ee" title="Writes SIZE bytes from BUFFER into INODE, starting at OFFSET." alt="" coords="295,336,405,363"/>
<area shape="rect" href="partition_8c.html#a5723d235ee99ff5ebd79a4db49236237" title="Reads the partition table in the given SECTOR of BLOCK and scans it for partitions of interest to Pin..." alt="" coords="280,411,420,437"/>
<area shape="rect" href="malloc_8c.html#a729621e4209745ef6edbe31f71a2a8eb" title="Attempts to resize OLD_BLOCK to NEW_SIZE bytes, possibly moving it in the process." alt="" coords="319,512,381,539"/>
<area shape="rect" href="hash_8c.html#afc76c6b6a33bf5fac77a82491e17dbf0" title="Changes the number of buckets in hash table H to match the ideal." alt="" coords="319,235,381,261"/>
<area shape="rect" href="input_8c.html#a07e161b7f0ec81e4d4d4990e0b5e6a27" title="Retrieves a key from the input buffer." alt="" coords="507,943,591,969"/>
<area shape="rect" href="serial_8c.html#a04858117b8541474fe79c45a044b59cc" title="Flushes anything in the serial buffer out the port in polling mode." alt="" coords="505,892,594,919"/>
</map>
</div>

</div>
</div>
<a id="a3564cf7ad3b72bee0dd6cdd211ccd666" name="a3564cf7ad3b72bee0dd6cdd211ccd666"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3564cf7ad3b72bee0dd6cdd211ccd666">&#9670;&nbsp;</a></span>lock_held_by_current_thread()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> lock_held_by_current_thread </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="structlock.html">lock</a> *&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if the current thread holds LOCK, false otherwise. </p>
<p >(Note that testing whether some other thread holds a lock would be racy.) </p>

<p class="definition">Definition at line <a class="el" href="synch_8c_source.html#l00242">242</a> of file <a class="el" href="synch_8c_source.html">synch.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="synch_8h_source.html#l00023">lock::holder</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, and <a class="el" href="thread_8c_source.html#l00256">thread_current()</a>.</p>

<p class="reference">Referenced by <a class="el" href="kernel_2console_8c_source.html#l00088">acquire_console()</a>, <a class="el" href="synch_8c_source.html#l00312">cond_signal()</a>, <a class="el" href="synch_8c_source.html#l00288">cond_wait()</a>, <a class="el" href="kernel_2console_8c_source.html#l00115">console_locked_by_current_thread()</a>, <a class="el" href="synch_8c_source.html#l00193">lock_acquire()</a>, <a class="el" href="synch_8c_source.html#l00229">lock_release()</a>, and <a class="el" href="synch_8c_source.html#l00210">lock_try_acquire()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_a3564cf7ad3b72bee0dd6cdd211ccd666_cgraph.png" border="0" usemap="#asynch_8c_a3564cf7ad3b72bee0dd6cdd211ccd666_cgraph" alt=""/></div>
<map name="asynch_8c_a3564cf7ad3b72bee0dd6cdd211ccd666_cgraph" id="asynch_8c_a3564cf7ad3b72bee0dd6cdd211ccd666_cgraph">
<area shape="rect" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="5,23,155,65"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="203,31,312,57"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="377,5,455,32"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="360,56,472,83"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="520,56,637,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_a3564cf7ad3b72bee0dd6cdd211ccd666_icgraph.png" border="0" usemap="#asynch_8c_a3564cf7ad3b72bee0dd6cdd211ccd666_icgraph" alt=""/></div>
<map name="asynch_8c_a3564cf7ad3b72bee0dd6cdd211ccd666_icgraph" id="asynch_8c_a3564cf7ad3b72bee0dd6cdd211ccd666_icgraph">
<area shape="rect" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="1048,302,1197,343"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="633,208,752,235"/>
<area shape="rect" href="synch_8c.html#a4534660eba2b75a5e5e34590d743f685" title="If any threads are waiting on COND (protected by LOCK), then this function signals one of them to wak..." alt="" coords="861,112,955,139"/>
<area shape="rect" href="synch_8c.html#a408896d5b2af213dc2a8da984c696419" title="Atomically releases LOCK and waits for COND to be signaled by some other piece of code." alt="" coords="651,309,734,336"/>
<area shape="rect" href="kernel_2console_8c.html#ac9311ca129f215c0c8c07cd095a72f2f" title="Returns true if the current thread has the console lock, false otherwise." alt="" coords="816,167,1000,209"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="859,791,957,817"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="859,993,957,1020"/>
<area shape="rect" href="synch_8c.html#a343f11e4ce80e077a18e565b6d9ac180" title="Tries to acquires LOCK and returns true if successful or false on failure." alt="" coords="849,1044,967,1071"/>
<area shape="rect" href="kernel_2console_8c.html#a6912abfdc7e2b2345da944f82cb8305b" title="Writes the N characters in BUFFER to the console." alt="" coords="459,259,517,285"/>
<area shape="rect" href="kernel_2console_8c.html#af4de2514b7778805db3815e8dd6cf09a" title="Writes C to the vga display and serial port." alt="" coords="455,107,521,133"/>
<area shape="rect" href="kernel_2console_8c.html#ad41876f99f190c7488e64ef39c50a23f" title="Writes string S to the console, followed by a new&#45;line character." alt="" coords="465,309,511,336"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="276,284,335,311"/>
<area shape="rect" href="tests_8c.html#a7380daad7085b08d0e037abc3136dccd" title="Prints failure message FORMAT as if with printf(), prefixing the output by the name of the test and F..." alt="" coords="35,208,74,235"/>
<area shape="rect" href="tests_8c.html#a9f5464c3d546d12524ce3cfb8694e682" title="Prints FORMAT as if with printf(), prefixing the output by the name of the test and following it with..." alt="" coords="31,309,78,336"/>
<area shape="rect" href="user_2console_8c.html#ad41876f99f190c7488e64ef39c50a23f" title="Writes string S to the console, followed by a new&#45;line character." alt="" coords="282,5,329,32"/>
<area shape="rect" href="shell_8c.html#ae50f2386b53b64d6827fe6e35958898a" title="Reads a line of input from the user into LINE, which has room for SIZE bytes." alt="" coords="267,56,344,83"/>
<area shape="rect" href="kernel_2debug_8c.html#a0dba4a46c338129ae12e314e07e9fbe3" title="Halts the OS, printing the source file name, line number, and function name, plus a user&#45;specific mes..." alt="" coords="5,259,104,285"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="152,309,204,336"/>
<area shape="rect" href="insult_8c.html#a727c30b9bfdf10e2f075dfb927e443b7" title=" " alt="" coords="25,385,84,412"/>
<area shape="rect" href="synch_8c.html#abd647748214f5f33ba24336941ffeb11" title="Wakes up all threads, if any, waiting on COND (protected by LOCK)." alt="" coords="634,107,751,133"/>
<area shape="rect" href="priority-condvar_8c.html#a0a388ce73d55720aac505642bc72ce37" title=" " alt="" coords="407,360,569,387"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="626,157,759,184"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="437,157,539,184"/>
<area shape="rect" href="priority-donate-multiple_8c.html#a56379b758fb21b5a67de1a87d2a74672" title=" " alt="" coords="639,1221,746,1248"/>
<area shape="rect" href="priority-donate-one_8c.html#adbcd765439b4d960f0db9ba4a47d421f" title=" " alt="" coords="617,1272,768,1299"/>
<area shape="rect" href="priority-donate-one_8c.html#aae18eed8351e7789ef848517a96284a5" title=" " alt="" coords="617,512,768,539"/>
<area shape="rect" href="priority-donate-lower_8c.html#ab955dabdbbfc7a7a188317e70b95ef04" title=" " alt="" coords="621,563,765,589"/>
<area shape="rect" href="thread_8c.html#a382e72d5d2fb4cfe2b5034eb62a887c8" title="Returns a tid to use for a new thread." alt="" coords="648,1120,737,1147"/>
<area shape="rect" href="priority-donate-multiple_8c.html#af257d61c4fea017f52981dbe2a40534b" title=" " alt="" coords="639,613,746,640"/>
<area shape="rect" href="mlfqs-block_8c.html#afae0754a3b814ae247351cc6ee14276c" title="Checks that recent_cpu and priorities are updated for blocked threads." alt="" coords="643,360,742,387"/>
<area shape="rect" href="priority-donate-chain_8c.html#af3ea65daade3a57b9afbfaf87d187dfd" title=" " alt="" coords="626,664,759,691"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="670,1525,715,1552"/>
<area shape="rect" href="priority-donate-sema_8c.html#a85675782bf8084df44707dfcfd2d7ae8" title=" " alt="" coords="639,715,746,741"/>
<area shape="rect" href="priority-donate-nest_8c.html#acc1e53225c07946f00921d331e5736c5" title=" " alt="" coords="630,765,755,792"/>
<area shape="rect" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="656,816,729,843"/>
<area shape="rect" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49" title="Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="655,867,731,893"/>
<area shape="rect" href="intq_8c.html#a45ba970f3357ff262d7fafecc50735c6" title="Removes a byte from Q and returns it." alt="" coords="655,917,731,944"/>
<area shape="rect" href="intq_8c.html#a6a440110d5417c12cedf1c2e86f445f8" title="Adds BYTE to the end of Q." alt="" coords="655,968,731,995"/>
<area shape="rect" href="priority-donate-sema_8c.html#aeb0f97fa3c6d25534de6a11bf3532aa3" title=" " alt="" coords="641,1019,744,1045"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="458,1424,518,1451"/>
<area shape="rect" href="priority-donate-nest_8c.html#ada3ddea14ea0cb3220f0a00cfa7929dc" title=" " alt="" coords="619,1069,766,1096"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="625,1424,761,1451"/>
<area shape="rect" href="priority-fifo_8c.html#a09afbb5707a2af609420fccb0795b96c" title=" " alt="" coords="623,1171,762,1197"/>
<area shape="rect" href="alarm-wait_8c.html#a208a74d5680b1bc8dab4e3978fc23d98" title="Sleeper thread." alt="" coords="660,1576,725,1603"/>
<area shape="rect" href="alarm-wait_8c.html#a46bbfad063bc4c9983350bd522fe6fbb" title="Creates N threads, each of which sleeps a different, fixed duration, M times." alt="" coords="447,1627,529,1653"/>
<area shape="rect" href="thread_8c.html#a8f7759a71c1c49fc8761ef92aa90a36d" title="Creates a new kernel thread named NAME with the given initial PRIORITY, which executes FUNCTION passi..." alt="" coords="436,1120,540,1147"/>
<area shape="rect" href="bitmap_8c.html#af3d1070908c2f73d4b18741f7fb5695e" title="Creation and destruction." alt="" coords="252,1449,359,1476"/>
<area shape="rect" href="bitmap_8c.html#adacf8862f49d7e7ceb1ba2368dd76698" title="Destroys bitmap B, freeing its storage." alt="" coords="431,1525,545,1552"/>
<area shape="rect" href="directory_8c.html#a92d246b6a292843fdfd7e3e1d2b29701" title="Destroys DIR and frees associated resources." alt="" coords="450,1576,526,1603"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="633,1323,752,1349"/>
</map>
</div>

</div>
</div>
<a id="aa760472aa4916bba476b2165ea25b411" name="aa760472aa4916bba476b2165ea25b411"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa760472aa4916bba476b2165ea25b411">&#9670;&nbsp;</a></span>lock_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lock_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlock.html">lock</a> *&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes LOCK. </p>
<p >A lock can be held by at most a single thread at any given time. Our locks are not "recursive", that is, it is an error for the thread currently holding a lock to try to acquire that lock.</p>
<p >A lock is a specialization of a semaphore with an initial value of 1. The difference between a lock and such a semaphore is twofold. First, a semaphore can have a value greater than 1, but a lock can only be owned by a single thread at a time. Second, a semaphore does not have an owner, meaning that one thread can "down" the semaphore and then another one "up" it, but with a lock the same thread must both acquire and release it. When these restrictions prove onerous, it's a good sign that a semaphore should be used, instead of a lock. </p>

<p class="definition">Definition at line <a class="el" href="synch_8c_source.html#l00176">176</a> of file <a class="el" href="synch_8c_source.html">synch.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="synch_8h_source.html#l00023">lock::holder</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, <a class="el" href="synch_8c_source.html#l00045">sema_init()</a>, and <a class="el" href="synch_8h_source.html#l00024">lock::semaphore</a>.</p>

<p class="reference">Referenced by <a class="el" href="kernel_2console_8c_source.html#l00064">console_init()</a>, <a class="el" href="ide_8c_source.html#l00102">ide_init()</a>, <a class="el" href="palloc_8c_source.html#l00154">init_pool()</a>, <a class="el" href="intq_8c_source.html#l00011">intq_init()</a>, <a class="el" href="malloc_8c_source.html#l00072">malloc_init()</a>, and <a class="el" href="alarm-wait_8c_source.html#l00051">test_sleep()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_aa760472aa4916bba476b2165ea25b411_cgraph.png" border="0" usemap="#asynch_8c_aa760472aa4916bba476b2165ea25b411_cgraph" alt=""/></div>
<map name="asynch_8c_aa760472aa4916bba476b2165ea25b411_cgraph" id="asynch_8c_aa760472aa4916bba476b2165ea25b411_cgraph">
<area shape="rect" title="Initializes LOCK." alt="" coords="5,5,76,32"/>
<area shape="rect" href="synch_8c.html#a1349a31f4880cf4eae026761f0ab3343" title="This file is derived from source code for the Nachos instructional operating system." alt="" coords="124,5,203,32"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a8aa862d10f52f7b0348fce990c7c12db" title="Initializes LIST as an empty list." alt="" coords="251,5,313,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_aa760472aa4916bba476b2165ea25b411_icgraph.png" border="0" usemap="#asynch_8c_aa760472aa4916bba476b2165ea25b411_icgraph" alt=""/></div>
<map name="asynch_8c_aa760472aa4916bba476b2165ea25b411_icgraph" id="asynch_8c_aa760472aa4916bba476b2165ea25b411_icgraph">
<area shape="rect" title="Initializes LOCK." alt="" coords="1679,1689,1749,1716"/>
<area shape="rect" href="kernel_2console_8c.html#acadd2a5d99d952e55a4580dbc8f8739d" title="Enable console locking." alt="" coords="1119,1765,1211,1792"/>
<area shape="rect" href="ide_8c.html#a5e8e1409e0675bdd93040403c52dd660" title="Initialize the disk subsystem and detect disks." alt="" coords="149,1537,213,1564"/>
<area shape="rect" href="palloc_8c.html#ae93da2ef876a9e957a6245fa2bd68a1f" title="Initializes pool P as starting at START and ending at END, naming it NAME for debugging purposes." alt="" coords="505,1613,577,1640"/>
<area shape="rect" href="intq_8c.html#a74912dc0f8bf3b5cfeecab5630ed3f89" title="Initializes interrupt queue Q." alt="" coords="1555,1563,1623,1589"/>
<area shape="rect" href="malloc_8c.html#a1be0594bb47cfcf2e4616c3baa3b9e13" title="Initializes the malloc() descriptors." alt="" coords="1415,1715,1500,1741"/>
<area shape="rect" href="alarm-wait_8c.html#a46bbfad063bc4c9983350bd522fe6fbb" title="Creates N threads, each of which sleeps a different, fixed duration, M times." alt="" coords="1548,1816,1631,1843"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="5,1613,88,1640"/>
<area shape="rect" href="palloc_8c.html#acc2c206763e5de4e4414fda821ca6db8" title="Initializes the page allocator." alt="" coords="140,1613,221,1640"/>
<area shape="rect" href="serial_8c.html#aa1fb82a5be4690023966ea841c88a624" title="Initializes the serial port device for polling mode." alt="" coords="1424,245,1491,272"/>
<area shape="rect" href="input_8c.html#a002df33f6298c53d5ab3892e473bcbde" title="Initializes the input buffer." alt="" coords="1285,1563,1361,1589"/>
<area shape="rect" href="serial_8c.html#a54e99a9877b7ed2a6be751fc43905978" title="Initializes the serial port device for queued interrupt&#45;driven I/O." alt="" coords="777,37,900,64"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="1280,245,1367,272"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="1099,245,1232,272"/>
<area shape="rect" href="kernel_2console_8c.html#a6912abfdc7e2b2345da944f82cb8305b" title="Writes the N characters in BUFFER to the console." alt="" coords="970,321,1029,348"/>
<area shape="rect" href="kernel_2console_8c.html#af4de2514b7778805db3815e8dd6cf09a" title="Writes C to the vga display and serial port." alt="" coords="663,93,729,120"/>
<area shape="rect" href="kernel_2console_8c.html#ad41876f99f190c7488e64ef39c50a23f" title="Writes string S to the console, followed by a new&#45;line character." alt="" coords="976,271,1023,297"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="948,220,1051,247"/>
<area shape="rect" href="tests_8c.html#a7380daad7085b08d0e037abc3136dccd" title="Prints failure message FORMAT as if with printf(), prefixing the output by the name of the test and F..." alt="" coords="521,144,560,171"/>
<area shape="rect" href="tests_8c.html#a9f5464c3d546d12524ce3cfb8694e682" title="Prints FORMAT as if with printf(), prefixing the output by the name of the test and following it with..." alt="" coords="517,195,564,221"/>
<area shape="rect" href="user_2console_8c.html#ad41876f99f190c7488e64ef39c50a23f" title="Writes string S to the console, followed by a new&#45;line character." alt="" coords="517,93,564,120"/>
<area shape="rect" href="shell_8c.html#ae50f2386b53b64d6827fe6e35958898a" title="Reads a line of input from the user into LINE, which has room for SIZE bytes." alt="" coords="307,132,385,159"/>
<area shape="rect" href="tests_8c.html#a31e43c3ff7a147fd2a262e4f78ea07b4" title="Runs the test named NAME." alt="" coords="311,271,381,297"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="144,372,217,399"/>
<area shape="rect" href="shell_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="155,132,206,159"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="809,220,868,247"/>
<area shape="rect" href="kernel_2debug_8c.html#a0dba4a46c338129ae12e314e07e9fbe3" title="Halts the OS, printing the source file name, line number, and function name, plus a user&#45;specific mes..." alt="" coords="297,600,395,627"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="670,853,722,880"/>
<area shape="rect" href="insult_8c.html#a727c30b9bfdf10e2f075dfb927e443b7" title=" " alt="" coords="511,296,570,323"/>
<area shape="rect" href="tar_8c.html#a11d3fc4ba0c33158e98b91bd973212f9" title=" " alt="" coords="284,777,408,804"/>
<area shape="rect" href="tar_8c.html#a736a422fc49cb04f6601997fb136c19c" title=" " alt="" coords="136,752,225,779"/>
<area shape="rect" href="tar_8c.html#a95557238bd1ce1ece7c3859eff9888dc" title=" " alt="" coords="273,727,419,753"/>
<area shape="rect" href="shell_8c.html#a0abb03c13300144f4e7c50807e31ca3a" title="If *POS is past the beginning of LINE, backs up one character position." alt="" coords="498,347,583,373"/>
<area shape="rect" href="block_8c.html#af1e8b4db376000c3c1824b19a3984fbb" title="Prints statistics for each block device used for a Pintos role." alt="" coords="479,853,602,880"/>
<area shape="rect" href="block_8c.html#a39d3d6f31410885d66cf8f719339d79d" title="Registers a new block device with the given NAME." alt="" coords="488,1461,593,1488"/>
<area shape="rect" href="partition_8c.html#a80cdac8263b0ada84abe4ddf0adb8614" title="We have found a primary or logical partition of the given TYPE on BLOCK, starting at sector START and..." alt="" coords="291,1436,401,1463"/>
<area shape="rect" href="ide_8c.html#afcd1cfa04037980c000c94c826517759" title="Sends an IDENTIFY DEVICE command to disk D and reads the response." alt="" coords="278,1512,414,1539"/>
<area shape="rect" href="tests_2internal_2stdio_8c.html#add606a71d9f818f09ede48c54a3b7c1f" title=" " alt="" coords="511,904,571,931"/>
<area shape="rect" href="kernel_2console_8c.html#a0535ab189f0f409b481df0df4a4e460b" title="Prints console statistics." alt="" coords="472,1107,609,1133"/>
<area shape="rect" href="debug_8c.html#a48a47644097877a8b22a70951445524d" title="Prints the call stack, that is, a list of addresses, one in each of the functions we are nested withi..." alt="" coords="479,600,603,627"/>
<area shape="rect" href="filesys_8c.html#a2710836971ed586925cb1c55850bf955" title="Formats the file system." alt="" coords="499,1157,582,1184"/>
<area shape="rect" href="tar_8c.html#aed54c3c43e1f39c75bd51bf2b7107c6b" title=" " alt="" coords="505,752,577,779"/>
<area shape="rect" href="exception_8c.html#a3b29f840ff063cfddd9970ca12bbdc8d" title="Prints exception statistics." alt="" coords="467,1259,615,1285"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="490,1309,591,1336"/>
<area shape="rect" href="fsutil_8c.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="309,980,383,1007"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="492,1360,589,1387"/>
<area shape="rect" href="fsutil_8c.html#a50cc451070af8d6fd949d2975b5f588d" title="List files in the root directory." alt="" coords="507,448,574,475"/>
<area shape="rect" href="fsutil_8c.html#abd1a295d2e6c91da47f137c863a26b97" title="Deletes file ARGV[1]." alt="" coords="505,499,577,525"/>
<area shape="rect" href="lib_2stdio_8c.html#af29b397e488c767a37e2f44c787b4746" title="Dumps the SIZE bytes in BUF to the console as hex bytes arranged 16 per line." alt="" coords="499,1005,583,1032"/>
<area shape="rect" href="ide_8c.html#a968e89e258918c93a81618744b6c0e35" title="ATA interrupt handler." alt="" coords="285,1296,407,1323"/>
</map>
</div>

</div>
</div>
<a id="a0616a97ad47869923552432c218f068a" name="a0616a97ad47869923552432c218f068a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0616a97ad47869923552432c218f068a">&#9670;&nbsp;</a></span>lock_release()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lock_release </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlock.html">lock</a> *&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Releases LOCK, which must be owned by the current thread. </p>
<p >An interrupt handler cannot acquire a lock, so it does not make sense to try to release a lock within an interrupt handler. </p>

<p class="definition">Definition at line <a class="el" href="synch_8c_source.html#l00229">229</a> of file <a class="el" href="synch_8c_source.html">synch.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="synch_8h_source.html#l00023">lock::holder</a>, <a class="el" href="synch_8c_source.html#l00242">lock_held_by_current_thread()</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, <a class="el" href="synch_8c_source.html#l00109">sema_up()</a>, and <a class="el" href="synch_8h_source.html#l00024">lock::semaphore</a>.</p>

<p class="reference">Referenced by <a class="el" href="priority-donate-multiple_8c_source.html#l00058">a_thread_func()</a>, <a class="el" href="priority-donate-one_8c_source.html#l00046">acquire1_thread_func()</a>, <a class="el" href="priority-donate-one_8c_source.html#l00057">acquire2_thread_func()</a>, <a class="el" href="priority-donate-lower_8c_source.html#l00043">acquire_thread_func()</a>, <a class="el" href="thread_8c_source.html#l00570">allocate_tid()</a>, <a class="el" href="priority-donate-multiple_8c_source.html#l00069">b_thread_func()</a>, <a class="el" href="synch_8c_source.html#l00288">cond_wait()</a>, <a class="el" href="priority-donate-chain_8c_source.html#l00086">donor_thread_func()</a>, <a class="el" href="malloc_8c_source.html#l00219">free()</a>, <a class="el" href="priority-donate-sema_8c_source.html#l00072">h_thread_func()</a>, <a class="el" href="priority-donate-nest_8c_source.html#l00086">high_thread_func()</a>, <a class="el" href="ide_8c_source.html#l00345">ide_read()</a>, <a class="el" href="ide_8c_source.html#l00365">ide_write()</a>, <a class="el" href="intq_8c_source.html#l00038">intq_getc()</a>, <a class="el" href="intq_8c_source.html#l00061">intq_putc()</a>, <a class="el" href="priority-donate-sema_8c_source.html#l00050">l_thread_func()</a>, <a class="el" href="malloc_8c_source.html#l00090">malloc()</a>, <a class="el" href="priority-donate-nest_8c_source.html#l00064">medium_thread_func()</a>, <a class="el" href="palloc_8c_source.html#l00071">palloc_get_multiple()</a>, <a class="el" href="priority-condvar_8c_source.html#l00046">priority_condvar_thread()</a>, <a class="el" href="kernel_2console_8c_source.html#l00101">release_console()</a>, <a class="el" href="priority-fifo_8c_source.html#l00087">simple_thread_func()</a>, <a class="el" href="alarm-wait_8c_source.html#l00138">sleeper()</a>, and <a class="el" href="alarm-wait_8c_source.html#l00051">test_sleep()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_a0616a97ad47869923552432c218f068a_cgraph.png" border="0" usemap="#asynch_8c_a0616a97ad47869923552432c218f068a_cgraph" alt=""/></div>
<map name="asynch_8c_a0616a97ad47869923552432c218f068a_cgraph" id="asynch_8c_a0616a97ad47869923552432c218f068a_cgraph">
<area shape="rect" title="Releases LOCK, which must be owned by the current thread." alt="" coords="5,204,103,231"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="151,109,300,150"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="187,233,264,260"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="350,56,459,83"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="527,56,604,83"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="509,5,621,32"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="669,5,787,32"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="683,360,773,387"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="515,411,615,437"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="687,107,769,133"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="353,208,456,235"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="348,259,461,285"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="835,360,936,387"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="684,411,772,437"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="840,411,931,437"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="846,107,925,133"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="851,157,919,184"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="529,157,601,184"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="683,208,773,235"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="845,208,925,235"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="510,259,621,285"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="689,259,767,285"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="857,259,913,285"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_a0616a97ad47869923552432c218f068a_icgraph.png" border="0" usemap="#asynch_8c_a0616a97ad47869923552432c218f068a_icgraph" alt=""/></div>
<map name="asynch_8c_a0616a97ad47869923552432c218f068a_icgraph" id="asynch_8c_a0616a97ad47869923552432c218f068a_icgraph">
<area shape="rect" title="Releases LOCK, which must be owned by the current thread." alt="" coords="899,928,996,955"/>
<area shape="rect" href="priority-donate-multiple_8c.html#a56379b758fb21b5a67de1a87d2a74672" title=" " alt="" coords="722,345,829,372"/>
<area shape="rect" href="priority-donate-one_8c.html#adbcd765439b4d960f0db9ba4a47d421f" title=" " alt="" coords="700,396,851,423"/>
<area shape="rect" href="priority-donate-one_8c.html#aae18eed8351e7789ef848517a96284a5" title=" " alt="" coords="700,447,851,473"/>
<area shape="rect" href="priority-donate-lower_8c.html#ab955dabdbbfc7a7a188317e70b95ef04" title=" " alt="" coords="703,497,847,524"/>
<area shape="rect" href="thread_8c.html#a382e72d5d2fb4cfe2b5034eb62a887c8" title="Returns a tid to use for a new thread." alt="" coords="731,548,820,575"/>
<area shape="rect" href="priority-donate-multiple_8c.html#af257d61c4fea017f52981dbe2a40534b" title=" " alt="" coords="722,751,829,777"/>
<area shape="rect" href="synch_8c.html#a408896d5b2af213dc2a8da984c696419" title="Atomically releases LOCK and waits for COND to be signaled by some other piece of code." alt="" coords="734,852,817,879"/>
<area shape="rect" href="priority-condvar_8c.html#a0a388ce73d55720aac505642bc72ce37" title=" " alt="" coords="489,827,652,853"/>
<area shape="rect" href="priority-donate-chain_8c.html#af3ea65daade3a57b9afbfaf87d187dfd" title=" " alt="" coords="709,903,842,929"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="548,436,593,463"/>
<area shape="rect" href="priority-donate-sema_8c.html#a85675782bf8084df44707dfcfd2d7ae8" title=" " alt="" coords="722,953,829,980"/>
<area shape="rect" href="priority-donate-nest_8c.html#acc1e53225c07946f00921d331e5736c5" title=" " alt="" coords="713,1004,838,1031"/>
<area shape="rect" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="739,1055,812,1081"/>
<area shape="rect" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49" title="Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="737,1105,813,1132"/>
<area shape="rect" href="intq_8c.html#a45ba970f3357ff262d7fafecc50735c6" title="Removes a byte from Q and returns it." alt="" coords="737,1156,813,1183"/>
<area shape="rect" href="intq_8c.html#a6a440110d5417c12cedf1c2e86f445f8" title="Adds BYTE to the end of Q." alt="" coords="737,1207,813,1233"/>
<area shape="rect" href="priority-donate-sema_8c.html#aeb0f97fa3c6d25534de6a11bf3532aa3" title=" " alt="" coords="724,1257,827,1284"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="541,739,601,765"/>
<area shape="rect" href="priority-donate-nest_8c.html#ada3ddea14ea0cb3220f0a00cfa7929dc" title=" " alt="" coords="702,1308,849,1335"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="707,700,843,727"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="716,1359,835,1385"/>
<area shape="rect" href="priority-fifo_8c.html#a09afbb5707a2af609420fccb0795b96c" title=" " alt="" coords="706,1409,845,1436"/>
<area shape="rect" href="alarm-wait_8c.html#a208a74d5680b1bc8dab4e3978fc23d98" title="Sleeper thread." alt="" coords="743,1511,808,1537"/>
<area shape="rect" href="alarm-wait_8c.html#a46bbfad063bc4c9983350bd522fe6fbb" title="Creates N threads, each of which sleeps a different, fixed duration, M times." alt="" coords="529,1485,612,1512"/>
<area shape="rect" href="thread_8c.html#a8f7759a71c1c49fc8761ef92aa90a36d" title="Creates a new kernel thread named NAME with the given initial PRIORITY, which executes FUNCTION passi..." alt="" coords="519,196,623,223"/>
<area shape="rect" href="alarm-simultaneous_8c.html#a46bbfad063bc4c9983350bd522fe6fbb" title="Creates N threads, each of which sleeps a different, fixed duration, M times." alt="" coords="330,5,413,32"/>
<area shape="rect" href="bitmap_8c.html#af3d1070908c2f73d4b18741f7fb5695e" title="Creation and destruction." alt="" coords="318,664,425,691"/>
<area shape="rect" href="bitmap_8c.html#adacf8862f49d7e7ceb1ba2368dd76698" title="Destroys bitmap B, freeing its storage." alt="" coords="315,461,428,488"/>
<area shape="rect" href="directory_8c.html#a92d246b6a292843fdfd7e3e1d2b29701" title="Destroys DIR and frees associated resources." alt="" coords="166,259,242,285"/>
<area shape="rect" href="directory_8c.html#a12c77ad2315eb1079f7914b1b1b27ce2" title="Opens and returns the directory for the given INODE, of which it takes ownership." alt="" coords="167,309,241,336"/>
<area shape="rect" href="file_8c.html#a4d12e9de7ab756bef5396c7b37698c9a" title="Closes FILE." alt="" coords="165,183,243,209"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="5,157,107,184"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="7,208,105,235"/>
<area shape="rect" href="file_8c.html#a57cca369d13720dba680d09f76f96c70" title="Opens a file for the given INODE, of which it takes ownership, and returns the new file." alt="" coords="166,360,242,387"/>
<area shape="rect" href="hash_8c.html#ac69fc1bec8463507c3967d0f77653125" title="Destroys hash table H." alt="" coords="320,512,423,539"/>
<area shape="rect" href="inode_8c.html#a74e1a19b5bcae248617541fe6f2f77c5" title="Closes INODE and writes it to disk." alt="" coords="325,259,418,285"/>
<area shape="rect" href="inode_8c.html#aa867b845d1fde30169c685397e05ac3f" title="Initializes an inode with LENGTH bytes of data and writes the new inode to sector SECTOR on the file ..." alt="" coords="155,651,253,677"/>
<area shape="rect" href="inode_8c.html#a31fcd756c686b818d56067b4460bfdb9" title="Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET." alt="" coords="318,563,425,589"/>
<area shape="rect" href="inode_8c.html#a09402d2c8d33dc00b2557daa27d944ee" title="Writes SIZE bytes from BUFFER into INODE, starting at OFFSET." alt="" coords="317,613,426,640"/>
<area shape="rect" href="partition_8c.html#a5723d235ee99ff5ebd79a4db49236237" title="Reads the partition table in the given SECTOR of BLOCK and scans it for partitions of interest to Pin..." alt="" coords="301,739,441,765"/>
<area shape="rect" href="malloc_8c.html#a729621e4209745ef6edbe31f71a2a8eb" title="Attempts to resize OLD_BLOCK to NEW_SIZE bytes, possibly moving it in the process." alt="" coords="341,789,402,816"/>
<area shape="rect" href="hash_8c.html#afc76c6b6a33bf5fac77a82491e17dbf0" title="Changes the number of buckets in hash table H to match the ideal." alt="" coords="340,840,403,867"/>
<area shape="rect" href="input_8c.html#a07e161b7f0ec81e4d4d4990e0b5e6a27" title="Retrieves a key from the input buffer." alt="" coords="529,1105,613,1132"/>
<area shape="rect" href="serial_8c.html#a04858117b8541474fe79c45a044b59cc" title="Flushes anything in the serial buffer out the port in polling mode." alt="" coords="526,1156,615,1183"/>
<area shape="rect" href="serial_8c.html#a2d769aaa2d2ff184e5e70fcf4b9d2354" title="Serial interrupt handler." alt="" coords="316,1176,427,1203"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="527,1207,614,1233"/>
<area shape="rect" href="input_8c.html#ada444892e4e73de28dfbdb5a50e4ed29" title="Adds a key to the input buffer." alt="" coords="529,1257,613,1284"/>
<area shape="rect" href="block_8c.html#a39d3d6f31410885d66cf8f719339d79d" title="Registers a new block device with the given NAME." alt="" coords="319,992,424,1019"/>
<area shape="rect" href="malloc_8c.html#a9b551bee9453c331a3a4a5d95d255e2e" title="Allocates and return A times B bytes initialized to zeroes." alt="" coords="343,891,399,917"/>
</map>
</div>

</div>
</div>
<a id="a343f11e4ce80e077a18e565b6d9ac180" name="a343f11e4ce80e077a18e565b6d9ac180"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a343f11e4ce80e077a18e565b6d9ac180">&#9670;&nbsp;</a></span>lock_try_acquire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> lock_try_acquire </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structlock.html">lock</a> *&#160;</td>
          <td class="paramname"><em>lock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tries to acquires LOCK and returns true if successful or false on failure. </p>
<p >The lock must not already be held by the current thread.</p>
<p >This function will not sleep, so it may be called within an interrupt handler. </p>

<p class="definition">Definition at line <a class="el" href="synch_8c_source.html#l00210">210</a> of file <a class="el" href="synch_8c_source.html">synch.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="synch_8h_source.html#l00023">lock::holder</a>, <a class="el" href="synch_8c_source.html#l00242">lock_held_by_current_thread()</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, <a class="el" href="synch_8c_source.html#l00084">sema_try_down()</a>, <a class="el" href="synch_8h_source.html#l00024">lock::semaphore</a>, and <a class="el" href="thread_8c_source.html#l00256">thread_current()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_a343f11e4ce80e077a18e565b6d9ac180_cgraph.png" border="0" usemap="#asynch_8c_a343f11e4ce80e077a18e565b6d9ac180_cgraph" alt=""/></div>
<map name="asynch_8c_a343f11e4ce80e077a18e565b6d9ac180_cgraph" id="asynch_8c_a343f11e4ce80e077a18e565b6d9ac180_cgraph">
<area shape="rect" title="Tries to acquires LOCK and returns true if successful or false on failure." alt="" coords="5,89,124,116"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="172,23,321,65"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="369,48,479,75"/>
<area shape="rect" href="synch_8c.html#a1e4e794129baf4a30244058661afa31a" title="Down or &quot;P&quot; operation on a semaphore, but only if the semaphore is not already 0." alt="" coords="189,140,305,167"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="544,5,621,32"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="527,56,639,83"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="687,56,804,83"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="537,115,628,141"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="374,165,474,192"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="695,115,796,141"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="539,165,627,192"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="700,165,791,192"/>
</map>
</div>

</div>
</div>
<a id="ae10ded72d3b93a832b7107566f09286c" name="ae10ded72d3b93a832b7107566f09286c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae10ded72d3b93a832b7107566f09286c">&#9670;&nbsp;</a></span>sema_down()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sema_down </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsemaphore.html">semaphore</a> *&#160;</td>
          <td class="paramname"><em>sema</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Down or "P" operation on a semaphore. </p>
<p >Waits for SEMA's value to become positive and then atomically decrements it.</p>
<p >This function may sleep, so it must not be called within an interrupt handler. This function may be called with interrupts disabled, but if it sleeps then the next scheduled thread will probably turn interrupts back on. </p>

<p class="definition">Definition at line <a class="el" href="synch_8c_source.html#l00061">61</a> of file <a class="el" href="synch_8c_source.html">synch.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="interrupt_8c_source.html#l00212">intr_context()</a>, <a class="el" href="interrupt_8c_source.html#l00104">intr_disable()</a>, <a class="el" href="interrupt_8c_source.html#l00081">intr_set_level()</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00217">list_push_back()</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, <a class="el" href="priority-sema_8c_source.html#l00013">sema</a>, <a class="el" href="thread_8c_source.html#l00214">thread_block()</a>, <a class="el" href="thread_8c_source.html#l00256">thread_current()</a>, <a class="el" href="synch_8h_source.html#l00010">semaphore::value</a>, and <a class="el" href="synch_8h_source.html#l00011">semaphore::waiters</a>.</p>

<p class="reference">Referenced by <a class="el" href="synch_8c_source.html#l00288">cond_wait()</a>, <a class="el" href="ide_8c_source.html#l00345">ide_read()</a>, <a class="el" href="ide_8c_source.html#l00365">ide_write()</a>, <a class="el" href="ide_8c_source.html#l00260">identify_ata_device()</a>, <a class="el" href="priority-donate-sema_8c_source.html#l00050">l_thread_func()</a>, <a class="el" href="synch_8c_source.html#l00193">lock_acquire()</a>, <a class="el" href="priority-donate-sema_8c_source.html#l00063">m_thread_func()</a>, <a class="el" href="priority-sema_8c_source.html#l00041">priority_sema_thread()</a>, <a class="el" href="synch_8c_source.html#l00129">sema_self_test()</a>, <a class="el" href="synch_8c_source.html#l00148">sema_test_helper()</a>, and <a class="el" href="thread_8c_source.html#l00106">thread_start()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_ae10ded72d3b93a832b7107566f09286c_cgraph.png" border="0" usemap="#asynch_8c_ae10ded72d3b93a832b7107566f09286c_cgraph" alt=""/></div>
<map name="asynch_8c_ae10ded72d3b93a832b7107566f09286c_cgraph" id="asynch_8c_ae10ded72d3b93a832b7107566f09286c_cgraph">
<area shape="rect" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="5,385,99,412"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="461,208,551,235"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="295,309,385,336"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="147,309,247,336"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="633,968,744,995"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="147,411,246,437"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1002,664,1111,691"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="638,309,739,336"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="296,259,384,285"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1200,968,1268,995"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="829,968,908,995"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1017,917,1097,944"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="1029,968,1085,995"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="302,537,378,564"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1195,689,1273,716"/>
<area shape="rect" href="intq_8c.html#ac473f50d2829cba1321d34a57c425042" title="Returns the position after POS within an intq." alt="" coords="483,563,529,589"/>
<area shape="rect" href="thread_8c.html#ace7a46dcf0f5c9c4cbb8f47a5b3c76f5" title="Chooses and returns the next thread to be scheduled." alt="" coords="437,816,575,843"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1178,613,1290,640"/>
<area shape="rect" href="switch_8h.html#a72fbed245d8de7e36d70eb4682682c98" title="Switches from CUR, which must be the running thread, to NEXT, which must also be running switch_threa..." alt="" coords="451,613,561,640"/>
<area shape="rect" href="thread_8c.html#acbbd25908c41e62d44a179cfbc3962e2" title="Completes a thread switch by activating the new thread&#39;s page tables, and, if the previous thread is ..." alt="" coords="433,461,579,488"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1015,867,1098,893"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="637,867,740,893"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1195,867,1273,893"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="833,867,905,893"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="823,917,914,944"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="1341,613,1459,640"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="627,360,751,387"/>
<area shape="rect" href="process_8c.html#a23823b283ef2815ecc5ae19e772dac24" title="Sets up the CPU for running user code in the current thread." alt="" coords="627,487,750,513"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="799,208,939,235"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1015,107,1098,133"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="987,56,1127,83"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1022,309,1091,336"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="997,157,1116,184"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1205,208,1263,235"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1025,259,1088,285"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1175,107,1293,133"/>
<area shape="rect" href="bitmap_8c.html#ab8d6660c5e30dab9cecef1240c7423d9" title="Returns the value of the bit numbered IDX in B." alt="" coords="1355,107,1445,133"/>
<area shape="rect" href="bitmap_8c.html#acc12f810fdb7b50a620c3852c3656d63" title="Returns an elem_type where only the bit corresponding to BIT_IDX is turned on." alt="" coords="1507,31,1583,57"/>
<area shape="rect" href="bitmap_8c.html#abb94f95006e0ec6ff6b5c88262f28d74" title="Returns the index of the element that contains the bit numbered BIT_IDX." alt="" coords="1507,81,1583,108"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1191,56,1277,83"/>
<area shape="rect" href="bitmap_8c.html#adb8912537854d4a2dcb1f35940a7134b" title="Atomically sets the bit numbered BIT_IDX in B to true." alt="" coords="1351,5,1449,32"/>
<area shape="rect" href="bitmap_8c.html#a5bb6be898ca442c95e725be80c2369a6" title="Atomically sets the bit numbered BIT_IDX in B to false." alt="" coords="1351,56,1449,83"/>
<area shape="rect" href="bitmap_8c.html#a576f7d29f091eac024f70ae8d68997a9" title="Bitmap size." alt="" coords="1187,157,1281,184"/>
<area shape="rect" href="pagedir_8c.html#ac0a75950cc56724fef94d224df4b0cd0" title="Loads page directory PD into the CPU&#39;s page directory base register." alt="" coords="809,461,929,488"/>
<area shape="rect" href="tss_8c.html#a089f0d1278964a0cc36f92d47febd2d4" title="Sets the ring 0 stack pointer in the TSS to point to the end of the thread stack." alt="" coords="825,512,912,539"/>
<area shape="rect" href="vaddr_8h.html#a0f6ff2f4a18892d83d6e1c1a3c2d9f9b" title="Returns physical address at which kernel virtual address VADDR is mapped." alt="" coords="1033,360,1080,387"/>
<area shape="rect" href="vaddr_8h.html#ad3a451f5e710dfb7831cb7be9a1e04f5" title="Returns true if VADDR is a kernel virtual address." alt="" coords="1176,360,1292,387"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_ae10ded72d3b93a832b7107566f09286c_icgraph.png" border="0" usemap="#asynch_8c_ae10ded72d3b93a832b7107566f09286c_icgraph" alt=""/></div>
<map name="asynch_8c_ae10ded72d3b93a832b7107566f09286c_icgraph" id="asynch_8c_ae10ded72d3b93a832b7107566f09286c_icgraph">
<area shape="rect" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="919,664,1012,691"/>
<area shape="rect" href="synch_8c.html#a408896d5b2af213dc2a8da984c696419" title="Atomically releases LOCK and waits for COND to be signaled by some other piece of code." alt="" coords="559,1323,642,1349"/>
<area shape="rect" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="564,107,637,133"/>
<area shape="rect" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49" title="Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="563,157,639,184"/>
<area shape="rect" href="ide_8c.html#afcd1cfa04037980c000c94c826517759" title="Sends an IDENTIFY DEVICE command to disk D and reads the response." alt="" coords="729,5,865,32"/>
<area shape="rect" href="priority-donate-sema_8c.html#aeb0f97fa3c6d25534de6a11bf3532aa3" title=" " alt="" coords="549,208,652,235"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="749,664,846,691"/>
<area shape="rect" href="synch_8c.html#ac007e29a5442996a099aa8172f5e046a" title="Self&#45;test for semaphores that makes control &quot;ping&#45;pong&quot; between a pair of threads." alt="" coords="155,1373,267,1400"/>
<area shape="rect" href="thread_8c.html#a07e468d365e1799676192b95b2067f59" title="Starts preemptive thread scheduling by enabling interrupts." alt="" coords="164,56,257,83"/>
<area shape="rect" href="priority-donate-sema_8c.html#a4dc51b1476966c227801513da4bd6b84" title=" " alt="" coords="742,816,853,843"/>
<area shape="rect" href="priority-sema_8c.html#a256435362d935640e9ba8007e76794d0" title=" " alt="" coords="724,867,871,893"/>
<area shape="rect" href="synch_8c.html#a57b7a9021b4a9c32f00065da020e96cd" title="Thread function used by sema_self_test()." alt="" coords="733,765,861,792"/>
<area shape="rect" href="priority-condvar_8c.html#a0a388ce73d55720aac505642bc72ce37" title=" " alt="" coords="315,1297,477,1324"/>
<area shape="rect" href="ide_8c.html#a5e8e1409e0675bdd93040403c52dd660" title="Initialize the disk subsystem and detect disks." alt="" coords="179,5,243,32"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="15,31,97,57"/>
<area shape="rect" href="priority-donate-multiple_8c.html#a56379b758fb21b5a67de1a87d2a74672" title=" " alt="" coords="547,917,654,944"/>
<area shape="rect" href="priority-donate-one_8c.html#adbcd765439b4d960f0db9ba4a47d421f" title=" " alt="" coords="525,968,676,995"/>
<area shape="rect" href="priority-donate-one_8c.html#aae18eed8351e7789ef848517a96284a5" title=" " alt="" coords="525,1069,676,1096"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="541,867,660,893"/>
<area shape="rect" href="priority-donate-lower_8c.html#ab955dabdbbfc7a7a188317e70b95ef04" title=" " alt="" coords="529,1171,673,1197"/>
<area shape="rect" href="thread_8c.html#a382e72d5d2fb4cfe2b5034eb62a887c8" title="Returns a tid to use for a new thread." alt="" coords="556,563,645,589"/>
<area shape="rect" href="priority-donate-multiple_8c.html#af257d61c4fea017f52981dbe2a40534b" title=" " alt="" coords="547,1221,654,1248"/>
<area shape="rect" href="mlfqs-block_8c.html#afae0754a3b814ae247351cc6ee14276c" title="Checks that recent_cpu and priorities are updated for blocked threads." alt="" coords="551,259,650,285"/>
<area shape="rect" href="priority-donate-chain_8c.html#af3ea65daade3a57b9afbfaf87d187dfd" title=" " alt="" coords="534,309,667,336"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="578,613,623,640"/>
<area shape="rect" href="priority-donate-sema_8c.html#a85675782bf8084df44707dfcfd2d7ae8" title=" " alt="" coords="547,360,654,387"/>
<area shape="rect" href="priority-donate-nest_8c.html#acc1e53225c07946f00921d331e5736c5" title=" " alt="" coords="538,411,663,437"/>
<area shape="rect" href="intq_8c.html#a45ba970f3357ff262d7fafecc50735c6" title="Removes a byte from Q and returns it." alt="" coords="563,664,639,691"/>
<area shape="rect" href="intq_8c.html#a6a440110d5417c12cedf1c2e86f445f8" title="Adds BYTE to the end of Q." alt="" coords="563,715,639,741"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="366,259,426,285"/>
<area shape="rect" href="priority-donate-nest_8c.html#ada3ddea14ea0cb3220f0a00cfa7929dc" title=" " alt="" coords="527,765,674,792"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="533,461,669,488"/>
<area shape="rect" href="priority-fifo_8c.html#a09afbb5707a2af609420fccb0795b96c" title=" " alt="" coords="531,816,670,843"/>
<area shape="rect" href="alarm-wait_8c.html#a208a74d5680b1bc8dab4e3978fc23d98" title="Sleeper thread." alt="" coords="568,1120,633,1147"/>
<area shape="rect" href="alarm-wait_8c.html#a46bbfad063bc4c9983350bd522fe6fbb" title="Creates N threads, each of which sleeps a different, fixed duration, M times." alt="" coords="355,1095,437,1121"/>
<area shape="rect" href="kernel_2console_8c.html#a6912abfdc7e2b2345da944f82cb8305b" title="Writes the N characters in BUFFER to the console." alt="" coords="367,917,425,944"/>
<area shape="rect" href="kernel_2console_8c.html#af4de2514b7778805db3815e8dd6cf09a" title="Writes C to the vga display and serial port." alt="" coords="363,968,429,995"/>
<area shape="rect" href="kernel_2console_8c.html#ad41876f99f190c7488e64ef39c50a23f" title="Writes string S to the console, followed by a new&#45;line character." alt="" coords="373,1019,419,1045"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="367,867,425,893"/>
<area shape="rect" href="thread_8c.html#a8f7759a71c1c49fc8761ef92aa90a36d" title="Creates a new kernel thread named NAME with the given initial PRIORITY, which executes FUNCTION passi..." alt="" coords="344,309,448,336"/>
<area shape="rect" href="bitmap_8c.html#af3d1070908c2f73d4b18741f7fb5695e" title="Creation and destruction." alt="" coords="157,360,264,387"/>
<area shape="rect" href="bitmap_8c.html#adacf8862f49d7e7ceb1ba2368dd76698" title="Destroys bitmap B, freeing its storage." alt="" coords="339,512,453,539"/>
<area shape="rect" href="directory_8c.html#a92d246b6a292843fdfd7e3e1d2b29701" title="Destroys DIR and frees associated resources." alt="" coords="173,620,249,647"/>
<area shape="rect" href="directory_8c.html#a12c77ad2315eb1079f7914b1b1b27ce2" title="Opens and returns the directory for the given INODE, of which it takes ownership." alt="" coords="174,677,247,704"/>
<area shape="rect" href="file_8c.html#a4d12e9de7ab756bef5396c7b37698c9a" title="Closes FILE." alt="" coords="172,461,249,488"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="5,411,107,437"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="7,461,105,488"/>
<area shape="rect" href="file_8c.html#a57cca369d13720dba680d09f76f96c70" title="Opens a file for the given INODE, of which it takes ownership, and returns the new file." alt="" coords="173,740,249,767"/>
<area shape="rect" href="hash_8c.html#ac69fc1bec8463507c3967d0f77653125" title="Destroys hash table H." alt="" coords="345,563,447,589"/>
<area shape="rect" href="inode_8c.html#a74e1a19b5bcae248617541fe6f2f77c5" title="Closes INODE and writes it to disk." alt="" coords="349,664,443,691"/>
</map>
</div>

</div>
</div>
<a id="a1349a31f4880cf4eae026761f0ab3343" name="a1349a31f4880cf4eae026761f0ab3343"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1349a31f4880cf4eae026761f0ab3343">&#9670;&nbsp;</a></span>sema_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sema_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsemaphore.html">semaphore</a> *&#160;</td>
          <td class="paramname"><em>sema</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This file is derived from source code for the Nachos instructional operating system. </p>
<p >The Nachos copyright notice is reproduced in full below. Copyright (c) 1992-1996 The Regents of the University of California. All rights reserved.</p>
<p >Permission to use, copy, modify, and distribute this software and its documentation for any purpose, without fee, and without written agreement is hereby granted, provided that the above copyright notice and the following two paragraphs appear in all copies of this software.</p>
<p >IN NO EVENT SHALL THE UNIVERSITY OF CALIFORNIA BE LIABLE TO ANY PARTY FOR DIRECT, INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE USE OF THIS SOFTWARE AND ITS DOCUMENTATION, EVEN IF THE UNIVERSITY OF CALIFORNIA HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
<p >THE UNIVERSITY OF CALIFORNIA SPECIFICALLY DISCLAIMS ANY WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. THE SOFTWARE PROVIDED HEREUNDER IS ON AN "AS IS" BASIS, AND THE UNIVERSITY OF CALIFORNIA HAS NO OBLIGATION TO PROVIDE MAINTENANCE, SUPPORT, UPDATES, ENHANCEMENTS, OR MODIFICATIONS. Initializes semaphore SEMA to VALUE. A semaphore is a nonnegative integer along with two atomic operators for manipulating it:</p>
<ul>
<li>down or "P": wait for the value to become positive, then decrement it.</li>
<li>up or "V": increment the value (and wake up one waiting thread, if any). </li>
</ul>

<p class="definition">Definition at line <a class="el" href="synch_8c_source.html#l00045">45</a> of file <a class="el" href="synch_8c_source.html">synch.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00061">list_init()</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, <a class="el" href="priority-sema_8c_source.html#l00013">sema</a>, <a class="el" href="synch_8h_source.html#l00010">semaphore::value</a>, and <a class="el" href="synch_8h_source.html#l00011">semaphore::waiters</a>.</p>

<p class="reference">Referenced by <a class="el" href="synch_8c_source.html#l00288">cond_wait()</a>, <a class="el" href="ide_8c_source.html#l00102">ide_init()</a>, <a class="el" href="synch_8c_source.html#l00176">lock_init()</a>, <a class="el" href="synch_8c_source.html#l00129">sema_self_test()</a>, and <a class="el" href="thread_8c_source.html#l00106">thread_start()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_a1349a31f4880cf4eae026761f0ab3343_cgraph.png" border="0" usemap="#asynch_8c_a1349a31f4880cf4eae026761f0ab3343_cgraph" alt=""/></div>
<map name="asynch_8c_a1349a31f4880cf4eae026761f0ab3343_cgraph" id="asynch_8c_a1349a31f4880cf4eae026761f0ab3343_cgraph">
<area shape="rect" title="This file is derived from source code for the Nachos instructional operating system." alt="" coords="5,5,84,32"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a8aa862d10f52f7b0348fce990c7c12db" title="Initializes LIST as an empty list." alt="" coords="132,5,195,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_a1349a31f4880cf4eae026761f0ab3343_icgraph.png" border="0" usemap="#asynch_8c_a1349a31f4880cf4eae026761f0ab3343_icgraph" alt=""/></div>
<map name="asynch_8c_a1349a31f4880cf4eae026761f0ab3343_icgraph" id="asynch_8c_a1349a31f4880cf4eae026761f0ab3343_icgraph">
<area shape="rect" title="This file is derived from source code for the Nachos instructional operating system." alt="" coords="1767,1375,1845,1402"/>
<area shape="rect" href="synch_8c.html#a408896d5b2af213dc2a8da984c696419" title="Atomically releases LOCK and waits for COND to be signaled by some other piece of code." alt="" coords="1636,1218,1719,1245"/>
<area shape="rect" href="ide_8c.html#a5e8e1409e0675bdd93040403c52dd660" title="Initialize the disk subsystem and detect disks." alt="" coords="1475,1249,1539,1275"/>
<area shape="rect" href="synch_8c.html#aa760472aa4916bba476b2165ea25b411" title="Initializes LOCK." alt="" coords="1642,1375,1713,1402"/>
<area shape="rect" href="synch_8c.html#ac007e29a5442996a099aa8172f5e046a" title="Self&#45;test for semaphores that makes control &quot;ping&#45;pong&quot; between a pair of threads." alt="" coords="354,1477,466,1503"/>
<area shape="rect" href="thread_8c.html#a07e468d365e1799676192b95b2067f59" title="Starts preemptive thread scheduling by enabling interrupts." alt="" coords="1284,1705,1377,1731"/>
<area shape="rect" href="priority-condvar_8c.html#a0a388ce73d55720aac505642bc72ce37" title=" " alt="" coords="1425,1198,1588,1225"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="9,1350,91,1377"/>
<area shape="rect" href="kernel_2console_8c.html#acadd2a5d99d952e55a4580dbc8f8739d" title="Enable console locking." alt="" coords="989,1325,1081,1351"/>
<area shape="rect" href="palloc_8c.html#ae93da2ef876a9e957a6245fa2bd68a1f" title="Initializes pool P as starting at START and ending at END, naming it NAME for debugging purposes." alt="" coords="374,1375,446,1402"/>
<area shape="rect" href="intq_8c.html#a74912dc0f8bf3b5cfeecab5630ed3f89" title="Initializes interrupt queue Q." alt="" coords="1473,1527,1541,1554"/>
<area shape="rect" href="malloc_8c.html#a1be0594bb47cfcf2e4616c3baa3b9e13" title="Initializes the malloc() descriptors." alt="" coords="1288,1274,1373,1301"/>
<area shape="rect" href="alarm-wait_8c.html#a46bbfad063bc4c9983350bd522fe6fbb" title="Creates N threads, each of which sleeps a different, fixed duration, M times." alt="" coords="1465,1401,1548,1427"/>
<area shape="rect" href="palloc_8c.html#acc2c206763e5de4e4414fda821ca6db8" title="Initializes the page allocator." alt="" coords="175,1375,256,1402"/>
<area shape="rect" href="serial_8c.html#aa1fb82a5be4690023966ea841c88a624" title="Initializes the serial port device for polling mode." alt="" coords="1297,1527,1364,1554"/>
<area shape="rect" href="input_8c.html#a002df33f6298c53d5ab3892e473bcbde" title="Initializes the input buffer." alt="" coords="1155,1654,1231,1681"/>
<area shape="rect" href="serial_8c.html#a54e99a9877b7ed2a6be751fc43905978" title="Initializes the serial port device for queued interrupt&#45;driven I/O." alt="" coords="647,1553,769,1579"/>
<area shape="rect" href="serial_8c.html#a07c75f3160eed07281583bfaf8eddc1b" title="Sends BYTE to the serial port." alt="" coords="1149,1502,1236,1529"/>
<area shape="rect" href="kernel_2console_8c.html#a5d98987075545c56db87c51597a04bdd" title="Writes C to the vga display and serial port." alt="" coords="968,1401,1101,1427"/>
<area shape="rect" href="kernel_2console_8c.html#a6912abfdc7e2b2345da944f82cb8305b" title="Writes the N characters in BUFFER to the console." alt="" coords="839,1401,898,1427"/>
<area shape="rect" href="kernel_2console_8c.html#af4de2514b7778805db3815e8dd6cf09a" title="Writes C to the vga display and serial port." alt="" coords="532,109,599,135"/>
<area shape="rect" href="kernel_2console_8c.html#ad41876f99f190c7488e64ef39c50a23f" title="Writes string S to the console, followed by a new&#45;line character." alt="" coords="845,1451,892,1478"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="817,1350,920,1377"/>
<area shape="rect" href="tests_8c.html#a7380daad7085b08d0e037abc3136dccd" title="Prints failure message FORMAT as if with printf(), prefixing the output by the name of the test and F..." alt="" coords="391,159,429,186"/>
<area shape="rect" href="tests_8c.html#a9f5464c3d546d12524ce3cfb8694e682" title="Prints FORMAT as if with printf(), prefixing the output by the name of the test and following it with..." alt="" coords="387,109,433,135"/>
<area shape="rect" href="user_2console_8c.html#ad41876f99f190c7488e64ef39c50a23f" title="Writes string S to the console, followed by a new&#45;line character." alt="" coords="387,58,433,85"/>
<area shape="rect" href="shell_8c.html#ae50f2386b53b64d6827fe6e35958898a" title="Reads a line of input from the user into LINE, which has room for SIZE bytes." alt="" coords="177,97,254,123"/>
<area shape="rect" href="tests_8c.html#a31e43c3ff7a147fd2a262e4f78ea07b4" title="Runs the test named NAME." alt="" coords="180,159,251,186"/>
<area shape="rect" href="init_8c.html#aff4f7abdb534106a4f1e2c2581713271" title="Runs the task specified in ARGV[1]." alt="" coords="13,173,87,199"/>
<area shape="rect" href="shell_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="25,97,75,123"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="679,843,737,870"/>
<area shape="rect" href="kernel_2debug_8c.html#a0dba4a46c338129ae12e314e07e9fbe3" title="Halts the OS, printing the source file name, line number, and function name, plus a user&#45;specific mes..." alt="" coords="166,1071,265,1098"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="539,717,591,743"/>
<area shape="rect" href="insult_8c.html#a727c30b9bfdf10e2f075dfb927e443b7" title=" " alt="" coords="381,1173,439,1199"/>
<area shape="rect" href="tar_8c.html#a11d3fc4ba0c33158e98b91bd973212f9" title=" " alt="" coords="153,463,277,490"/>
<area shape="rect" href="tar_8c.html#a736a422fc49cb04f6601997fb136c19c" title=" " alt="" coords="5,438,95,465"/>
<area shape="rect" href="tar_8c.html#a95557238bd1ce1ece7c3859eff9888dc" title=" " alt="" coords="143,362,288,389"/>
<area shape="rect" href="shell_8c.html#a0abb03c13300144f4e7c50807e31ca3a" title="If *POS is past the beginning of LINE, backs up one character position." alt="" coords="367,210,453,237"/>
<area shape="rect" href="block_8c.html#af1e8b4db376000c3c1824b19a3984fbb" title="Prints statistics for each block device used for a Pintos role." alt="" coords="349,565,471,591"/>
<area shape="rect" href="block_8c.html#a39d3d6f31410885d66cf8f719339d79d" title="Registers a new block device with the given NAME." alt="" coords="357,615,463,642"/>
<area shape="rect" href="partition_8c.html#a80cdac8263b0ada84abe4ddf0adb8614" title="We have found a primary or logical partition of the given TYPE on BLOCK, starting at sector START and..." alt="" coords="160,590,271,617"/>
<area shape="rect" href="tests_2internal_2stdio_8c.html#add606a71d9f818f09ede48c54a3b7c1f" title=" " alt="" coords="380,666,440,693"/>
<area shape="rect" href="kernel_2console_8c.html#a0535ab189f0f409b481df0df4a4e460b" title="Prints console statistics." alt="" coords="341,717,479,743"/>
<area shape="rect" href="debug_8c.html#a48a47644097877a8b22a70951445524d" title="Prints the call stack, that is, a list of addresses, one in each of the functions we are nested withi..." alt="" coords="348,1071,472,1098"/>
<area shape="rect" href="filesys_8c.html#a2710836971ed586925cb1c55850bf955" title="Formats the file system." alt="" coords="369,767,451,794"/>
<area shape="rect" href="tar_8c.html#aed54c3c43e1f39c75bd51bf2b7107c6b" title=" " alt="" coords="374,311,446,338"/>
<area shape="rect" href="exception_8c.html#a3b29f840ff063cfddd9970ca12bbdc8d" title="Prints exception statistics." alt="" coords="336,869,484,895"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="359,919,461,946"/>
<area shape="rect" href="fsutil_8c.html#a45adb8f359bde7b04c52bae5421811e0" title="Prints the contents of file ARGV[1] to the system console as hex and ASCII." alt="" coords="373,970,447,997"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="361,1021,459,1047"/>
</map>
</div>

</div>
</div>
<a id="ac007e29a5442996a099aa8172f5e046a" name="ac007e29a5442996a099aa8172f5e046a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac007e29a5442996a099aa8172f5e046a">&#9670;&nbsp;</a></span>sema_self_test()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sema_self_test </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Self-test for semaphores that makes control "ping-pong" between a pair of threads. </p>
<p >Insert calls to <a class="el" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console.">printf()</a> to see what's going on. </p>

<p class="definition">Definition at line <a class="el" href="synch_8c_source.html#l00129">129</a> of file <a class="el" href="synch_8c_source.html">synch.c</a>.</p>

<p class="reference">References <a class="el" href="thread_8h_source.html#l00024">PRI_DEFAULT</a>, <a class="el" href="lib_2stdio_8c_source.html#l00079">printf()</a>, <a class="el" href="priority-sema_8c_source.html#l00013">sema</a>, <a class="el" href="synch_8c_source.html#l00061">sema_down()</a>, <a class="el" href="synch_8c_source.html#l00045">sema_init()</a>, <a class="el" href="synch_8c_source.html#l00148">sema_test_helper()</a>, <a class="el" href="synch_8c_source.html#l00109">sema_up()</a>, and <a class="el" href="thread_8c_source.html#l00166">thread_create()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_ac007e29a5442996a099aa8172f5e046a_cgraph.png" border="0" usemap="#asynch_8c_ac007e29a5442996a099aa8172f5e046a_cgraph" alt=""/></div>
<map name="asynch_8c_ac007e29a5442996a099aa8172f5e046a_cgraph" id="asynch_8c_ac007e29a5442996a099aa8172f5e046a_cgraph">
<area shape="rect" title="Self&#45;test for semaphores that makes control &quot;ping&#45;pong&quot; between a pair of threads." alt="" coords="5,748,117,775"/>
<area shape="rect" href="lib_2stdio_8c.html#a98631211a4a8aee62f572375d5b637be" title="Writes formatted output to the console." alt="" coords="191,483,243,509"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="1019,723,1112,749"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="855,1027,933,1053"/>
<area shape="rect" href="synch_8c.html#a1349a31f4880cf4eae026761f0ab3343" title="This file is derived from source code for the Nachos instructional operating system." alt="" coords="178,596,257,623"/>
<area shape="rect" href="synch_8c.html#a57b7a9021b4a9c32f00065da020e96cd" title="Thread function used by sema_self_test()." alt="" coords="669,976,797,1003"/>
<area shape="rect" href="thread_8c.html#a8f7759a71c1c49fc8761ef92aa90a36d" title="Creates a new kernel thread named NAME with the given initial PRIORITY, which executes FUNCTION passi..." alt="" coords="165,723,269,749"/>
<area shape="rect" href="kernel_2console_8c.html#aae4ab8b56862ed0a04505cafb8a05112" title="The standard vprintf() function, which is like printf() but uses a va_list." alt="" coords="348,419,407,445"/>
<area shape="rect" href="lib_2stdio_8c.html#a54580ccfcedfa31b4b384cacc8966519" title="Internal functions." alt="" coords="517,107,590,133"/>
<area shape="rect" href="kernel_2console_8c.html#a69b6a57a329ae666df343a081a51e7a5" title="Acquires the console lock." alt="" coords="674,368,793,395"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="494,469,613,496"/>
<area shape="rect" href="kernel_2console_8c.html#ada83ac3a119c57c68d54ab7a5c805de3" title="Helper function for vprintf()." alt="" coords="502,419,605,445"/>
<area shape="rect" href="lib_2stdio_8c.html#a1759795abada0ce655326c0754a46c96" title="Wrapper for __vprintf() that converts varargs into a va_list." alt="" coords="700,107,767,133"/>
<area shape="rect" href="lib_2stdio_8c.html#afe54765b33c418c6ceeaea8cc30eea9a" title="Performs an integer conversion, writing output to OUTPUT with auxiliary data AUX." alt="" coords="679,157,787,184"/>
<area shape="rect" href="lib_2stdio_8c.html#afb7ef1a1027f82aa276d48354a0b9218" title="Formats the LENGTH characters starting at STRING according to the conversion specified in C." alt="" coords="683,208,783,235"/>
<area shape="rect" href="lib_2stdio_8c.html#a6b06e855119acdd96dbc1bf3336cd2c7" title="Parses conversion option characters starting at FORMAT and initializes C appropriately." alt="" coords="670,5,797,32"/>
<area shape="rect" href="string_8c.html#a0862027ba42b443d4ce8ff4a0d9b6459" title="If STRING is less than MAXLEN characters in length, returns its actual length." alt="" coords="702,56,765,83"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="1515,571,1605,597"/>
<area shape="rect" href="synch_8c.html#aa9021f4c36b4b177c557e0ed8967d048" title="Acquires LOCK, sleeping until it becomes available if necessary." alt="" coords="845,477,943,504"/>
<area shape="rect" href="synch_8c.html#a3564cf7ad3b72bee0dd6cdd211ccd666" title="Returns true if the current thread holds LOCK, false otherwise." alt="" coords="991,361,1140,402"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1347,621,1456,648"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1521,1015,1599,1041"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1504,709,1616,736"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="1356,925,1447,952"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="1193,925,1293,952"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="1188,1077,1299,1104"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="1194,672,1293,699"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="1509,849,1611,876"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="1357,773,1445,800"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1526,1255,1594,1281"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="1362,1077,1441,1104"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="1363,875,1439,901"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="685,560,782,587"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1360,1331,1443,1357"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="1014,1229,1117,1256"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="1009,1027,1122,1053"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1521,1331,1599,1357"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1207,1331,1279,1357"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1356,1179,1447,1205"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a8aa862d10f52f7b0348fce990c7c12db" title="Initializes LIST as an empty list." alt="" coords="346,520,409,547"/>
<area shape="rect" href="thread_8c.html#a19de4720e289bc3e7202be2b1a059549" title="Allocates a SIZE&#45;byte frame at the top of thread T&#39;s stack and returns a pointer to the frame&#39;s base." alt="" coords="849,1179,939,1205"/>
<area shape="rect" href="thread_8c.html#a382e72d5d2fb4cfe2b5034eb62a887c8" title="Returns a tid to use for a new thread." alt="" coords="509,560,598,587"/>
<area shape="rect" href="thread_8c.html#a34a9d4a5ab1bf577041f4c3f1b8f6c89" title="Does basic initialization of T as a blocked thread named NAME." alt="" coords="1023,900,1107,927"/>
<area shape="rect" href="thread_8c.html#ac40007d0837868671dffa80f581b4723" title="Function used as the basis for a kernel thread." alt="" coords="1013,672,1117,699"/>
<area shape="rect" href="palloc_8c.html#a0c66d7fdb0a9c8da247421261b5ca188" title="Obtains a single free page and returns its kernel virtual address." alt="" coords="317,621,437,648"/>
<area shape="rect" href="switch_8h.html#a77fa63aafbf21cce19006cb6bfcd3fa6" title=" " alt="" coords="329,723,425,749"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1209,824,1278,851"/>
<area shape="rect" href="string_8c.html#a4637af6f79bac4043e1064f0837d0ddc" title="Copies string SRC to DST." alt="" coords="1213,875,1273,901"/>
<area shape="rect" href="thread_8c.html#a87c2438941819bb3cc31658aa9eb66fe" title="Deschedules the current thread and destroys it." alt="" coords="1199,723,1287,749"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="485,616,621,643"/>
</map>
</div>

</div>
</div>
<a id="a57b7a9021b4a9c32f00065da020e96cd" name="a57b7a9021b4a9c32f00065da020e96cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57b7a9021b4a9c32f00065da020e96cd">&#9670;&nbsp;</a></span>sema_test_helper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sema_test_helper </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>sema_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Thread function used by <a class="el" href="synch_8c.html#ac007e29a5442996a099aa8172f5e046a" title="Self-test for semaphores that makes control &quot;ping-pong&quot; between a pair of threads.">sema_self_test()</a>. </p>

<p class="definition">Definition at line <a class="el" href="synch_8c_source.html#l00148">148</a> of file <a class="el" href="synch_8c_source.html">synch.c</a>.</p>

<p class="reference">References <a class="el" href="priority-sema_8c_source.html#l00013">sema</a>, <a class="el" href="synch_8c_source.html#l00061">sema_down()</a>, and <a class="el" href="synch_8c_source.html#l00109">sema_up()</a>.</p>

<p class="reference">Referenced by <a class="el" href="synch_8c_source.html#l00129">sema_self_test()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_a57b7a9021b4a9c32f00065da020e96cd_cgraph.png" border="0" usemap="#asynch_8c_a57b7a9021b4a9c32f00065da020e96cd_cgraph" alt=""/></div>
<map name="asynch_8c_a57b7a9021b4a9c32f00065da020e96cd_cgraph" id="asynch_8c_a57b7a9021b4a9c32f00065da020e96cd_cgraph">
<area shape="rect" title="Thread function used by sema_self_test()." alt="" coords="5,1019,133,1045"/>
<area shape="rect" href="synch_8c.html#ae10ded72d3b93a832b7107566f09286c" title="Down or &quot;P&quot; operation on a semaphore." alt="" coords="181,943,275,969"/>
<area shape="rect" href="synch_8c.html#a6da4176e1c419bd4467b181c66b077da" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="189,1044,267,1071"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="853,943,943,969"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="670,892,761,919"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="489,943,589,969"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="484,1145,595,1172"/>
<area shape="rect" href="thread_8c.html#ad70c4eeb51cd5b0ce2abb939924c7469" title="Puts the current thread to sleep." alt="" coords="330,740,429,767"/>
<area shape="rect" href="thread_8c.html#a0032becedd11c8a8e10a0a6955c90d66" title="Returns the running thread." alt="" coords="1211,487,1321,513"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="847,765,949,792"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="671,943,759,969"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="1409,1385,1477,1412"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="676,1145,755,1172"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="1226,1183,1306,1209"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="870,1145,926,1172"/>
<area shape="rect" href="thread_8c.html#a63e3ec45b7bf0028e55f2b9ab1603306" title="Schedules a new process." alt="" coords="501,639,577,665"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="1405,664,1482,691"/>
<area shape="rect" href="intq_8c.html#ac473f50d2829cba1321d34a57c425042" title="Returns the position after POS within an intq." alt="" coords="692,563,739,589"/>
<area shape="rect" href="thread_8c.html#ace7a46dcf0f5c9c4cbb8f47a5b3c76f5" title="Chooses and returns the next thread to be scheduled." alt="" coords="647,1196,784,1223"/>
<area shape="rect" href="thread_8c.html#a42e628208d70ba10d79c26d902b60650" title="Returns the running thread." alt="" coords="1387,360,1499,387"/>
<area shape="rect" href="switch_8h.html#a72fbed245d8de7e36d70eb4682682c98" title="Switches from CUR, which must be the running thread, to NEXT, which must also be running switch_threa..." alt="" coords="660,613,771,640"/>
<area shape="rect" href="thread_8c.html#acbbd25908c41e62d44a179cfbc3962e2" title="Completes a thread switch by activating the new thread&#39;s page tables, and, if the previous thread is ..." alt="" coords="643,512,788,539"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="1225,1309,1307,1336"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="847,1247,949,1273"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="1404,1309,1483,1336"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="1042,1297,1114,1324"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="1033,1247,1123,1273"/>
<area shape="rect" href="vaddr_8h.html#a42d21e08e54a8ca6c174c731df74fd3e" title="Round down to nearest page boundary." alt="" coords="1551,360,1668,387"/>
<area shape="rect" href="palloc_8c.html#ad3fe56f7c611216596e7565fb8521409" title="Frees the page at PAGE." alt="" coords="836,233,960,260"/>
<area shape="rect" href="process_8c.html#a23823b283ef2815ecc5ae19e772dac24" title="Sets up the CPU for running user code in the current thread." alt="" coords="837,563,959,589"/>
<area shape="rect" href="palloc_8c.html#af4c2af0e0bdc81d1ea21354c4234b20e" title="Frees the PAGE_CNT pages starting at PAGES." alt="" coords="1008,157,1148,184"/>
<area shape="rect" href="bitmap_8c.html#ab8910020ce78e389457c0607990d04d3" title="Returns true if every bit in B between START and START + CNT, exclusive, is set to true,..." alt="" coords="1225,208,1307,235"/>
<area shape="rect" href="bitmap_8c.html#a7b2eaaf4ee3c0f7794b4e5293f3b9760" title="Sets the CNT bits starting at START in B to VALUE." alt="" coords="1196,107,1336,133"/>
<area shape="rect" href="string_8c.html#a32f4138a368f78ed6d4339e679641261" title="Sets the SIZE bytes in DST to VALUE." alt="" coords="1231,259,1301,285"/>
<area shape="rect" href="palloc_8c.html#a2adf802e51d008838946d621cb4e8fb2" title="Returns true if PAGE was allocated from POOL, false otherwise." alt="" coords="1207,5,1325,32"/>
<area shape="rect" href="vaddr_8h.html#a1efae7b168a7e2234c0e4022d889bdc8" title="Virtual page number." alt="" coords="1414,56,1473,83"/>
<area shape="rect" href="vaddr_8h.html#ac12acb882dfd1a70e6c8f69935dc3747" title="Offset within a page." alt="" coords="1235,157,1297,184"/>
<area shape="rect" href="bitmap_8c.html#a90f5f9e5e7afbd943d0c6c33fc0d8557" title="Returns true if any bits in B between START and START + CNT, exclusive, are set to VALUE,..." alt="" coords="1384,208,1503,235"/>
<area shape="rect" href="bitmap_8c.html#ab8d6660c5e30dab9cecef1240c7423d9" title="Returns the value of the bit numbered IDX in B." alt="" coords="1564,208,1655,235"/>
<area shape="rect" href="bitmap_8c.html#acc12f810fdb7b50a620c3852c3656d63" title="Returns an elem_type where only the bit corresponding to BIT_IDX is turned on." alt="" coords="1716,132,1792,159"/>
<area shape="rect" href="bitmap_8c.html#abb94f95006e0ec6ff6b5c88262f28d74" title="Returns the index of the element that contains the bit numbered BIT_IDX." alt="" coords="1716,183,1792,209"/>
<area shape="rect" href="bitmap_8c.html#a766a7941acc1371fb82ed4f70a1ecf37" title="Setting and testing single bits." alt="" coords="1400,107,1487,133"/>
<area shape="rect" href="bitmap_8c.html#adb8912537854d4a2dcb1f35940a7134b" title="Atomically sets the bit numbered BIT_IDX in B to true." alt="" coords="1560,157,1659,184"/>
<area shape="rect" href="bitmap_8c.html#a5bb6be898ca442c95e725be80c2369a6" title="Atomically sets the bit numbered BIT_IDX in B to false." alt="" coords="1560,107,1659,133"/>
<area shape="rect" href="bitmap_8c.html#a576f7d29f091eac024f70ae8d68997a9" title="Bitmap size." alt="" coords="1397,5,1490,32"/>
<area shape="rect" href="pagedir_8c.html#ac0a75950cc56724fef94d224df4b0cd0" title="Loads page directory PD into the CPU&#39;s page directory base register." alt="" coords="1018,613,1138,640"/>
<area shape="rect" href="tss_8c.html#a089f0d1278964a0cc36f92d47febd2d4" title="Sets the ring 0 stack pointer in the TSS to point to the end of the thread stack." alt="" coords="1035,563,1121,589"/>
<area shape="rect" href="vaddr_8h.html#a0f6ff2f4a18892d83d6e1c1a3c2d9f9b" title="Returns physical address at which kernel virtual address VADDR is mapped." alt="" coords="1243,613,1289,640"/>
<area shape="rect" href="vaddr_8h.html#ad3a451f5e710dfb7831cb7be9a1e04f5" title="Returns true if VADDR is a kernel virtual address." alt="" coords="1385,613,1501,640"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="323,1095,436,1121"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_a57b7a9021b4a9c32f00065da020e96cd_icgraph.png" border="0" usemap="#asynch_8c_a57b7a9021b4a9c32f00065da020e96cd_icgraph" alt=""/></div>
<map name="asynch_8c_a57b7a9021b4a9c32f00065da020e96cd_icgraph" id="asynch_8c_a57b7a9021b4a9c32f00065da020e96cd_icgraph">
<area shape="rect" title="Thread function used by sema_self_test()." alt="" coords="165,5,293,32"/>
<area shape="rect" href="synch_8c.html#ac007e29a5442996a099aa8172f5e046a" title="Self&#45;test for semaphores that makes control &quot;ping&#45;pong&quot; between a pair of threads." alt="" coords="5,5,117,32"/>
</map>
</div>

</div>
</div>
<a id="a1e4e794129baf4a30244058661afa31a" name="a1e4e794129baf4a30244058661afa31a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e4e794129baf4a30244058661afa31a">&#9670;&nbsp;</a></span>sema_try_down()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="stdbool_8h.html#abb452686968e48b67397da5f97445f5b">bool</a> sema_try_down </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsemaphore.html">semaphore</a> *&#160;</td>
          <td class="paramname"><em>sema</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Down or "P" operation on a semaphore, but only if the semaphore is not already 0. </p>
<p >Returns true if the semaphore is decremented, false otherwise.</p>
<p >This function may be called from an interrupt handler. </p>

<p class="definition">Definition at line <a class="el" href="synch_8c_source.html#l00084">84</a> of file <a class="el" href="synch_8c_source.html">synch.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="interrupt_8c_source.html#l00104">intr_disable()</a>, <a class="el" href="interrupt_8c_source.html#l00081">intr_set_level()</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, <a class="el" href="priority-sema_8c_source.html#l00013">sema</a>, and <a class="el" href="synch_8h_source.html#l00010">semaphore::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="synch_8c_source.html#l00210">lock_try_acquire()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_a1e4e794129baf4a30244058661afa31a_cgraph.png" border="0" usemap="#asynch_8c_a1e4e794129baf4a30244058661afa31a_cgraph" alt=""/></div>
<map name="asynch_8c_a1e4e794129baf4a30244058661afa31a_cgraph" id="asynch_8c_a1e4e794129baf4a30244058661afa31a_cgraph">
<area shape="rect" title="Down or &quot;P&quot; operation on a semaphore, but only if the semaphore is not already 0." alt="" coords="5,31,121,57"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="317,5,408,32"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="169,56,269,83"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="456,5,557,32"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="319,56,407,83"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="461,56,552,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_a1e4e794129baf4a30244058661afa31a_icgraph.png" border="0" usemap="#asynch_8c_a1e4e794129baf4a30244058661afa31a_icgraph" alt=""/></div>
<map name="asynch_8c_a1e4e794129baf4a30244058661afa31a_icgraph" id="asynch_8c_a1e4e794129baf4a30244058661afa31a_icgraph">
<area shape="rect" title="Down or &quot;P&quot; operation on a semaphore, but only if the semaphore is not already 0." alt="" coords="172,5,288,32"/>
<area shape="rect" href="synch_8c.html#a343f11e4ce80e077a18e565b6d9ac180" title="Tries to acquires LOCK and returns true if successful or false on failure." alt="" coords="5,5,124,32"/>
</map>
</div>

</div>
</div>
<a id="a6da4176e1c419bd4467b181c66b077da" name="a6da4176e1c419bd4467b181c66b077da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6da4176e1c419bd4467b181c66b077da">&#9670;&nbsp;</a></span>sema_up()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sema_up </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsemaphore.html">semaphore</a> *&#160;</td>
          <td class="paramname"><em>sema</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Up or "V" operation on a semaphore. </p>
<p >Increments SEMA's value and wakes up one thread of those waiting for SEMA, if any.</p>
<p >This function may be called from an interrupt handler. </p>

<p class="definition">Definition at line <a class="el" href="synch_8c_source.html#l00109">109</a> of file <a class="el" href="synch_8c_source.html">synch.c</a>.</p>

<p class="reference">References <a class="el" href="debug_8h_source.html#l00031">ASSERT</a>, <a class="el" href="interrupt_8c_source.html#l00104">intr_disable()</a>, <a class="el" href="interrupt_8c_source.html#l00081">intr_set_level()</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00310">list_empty()</a>, <a class="el" href="list_8h_source.html#l00108">list_entry</a>, <a class="el" href="lib_2kernel_2list_8c_source.html#l00260">list_pop_front()</a>, <a class="el" href="stddef_8h_source.html#l00004">NULL</a>, <a class="el" href="priority-sema_8c_source.html#l00013">sema</a>, <a class="el" href="thread_8c_source.html#l00232">thread_unblock()</a>, <a class="el" href="synch_8h_source.html#l00010">semaphore::value</a>, and <a class="el" href="synch_8h_source.html#l00011">semaphore::waiters</a>.</p>

<p class="reference">Referenced by <a class="el" href="alarm-priority_8c_source.html#l00042">alarm_priority_thread()</a>, <a class="el" href="synch_8c_source.html#l00312">cond_signal()</a>, <a class="el" href="priority-donate-sema_8c_source.html#l00072">h_thread_func()</a>, <a class="el" href="thread_8c_source.html#l00389">idle()</a>, <a class="el" href="ide_8c_source.html#l00507">interrupt_handler()</a>, <a class="el" href="synch_8c_source.html#l00229">lock_release()</a>, <a class="el" href="synch_8c_source.html#l00129">sema_self_test()</a>, and <a class="el" href="synch_8c_source.html#l00148">sema_test_helper()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_a6da4176e1c419bd4467b181c66b077da_cgraph.png" border="0" usemap="#asynch_8c_a6da4176e1c419bd4467b181c66b077da_cgraph" alt=""/></div>
<map name="asynch_8c_a6da4176e1c419bd4467b181c66b077da_cgraph" id="asynch_8c_a6da4176e1c419bd4467b181c66b077da_cgraph">
<area shape="rect" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="5,125,83,152"/>
<area shape="rect" href="interrupt_8c.html#abb2fa56d0ab9adc628c697b6190430c3" title="Disables interrupts and returns the previous interrupt status." alt="" coords="451,5,541,32"/>
<area shape="rect" href="interrupt_8c.html#ae3ae93a45d368c3d64fd0b473bd303d0" title="Enables or disables interrupts as specified by LEVEL and returns the previous interrupt status." alt="" coords="297,100,397,127"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a5591fb615fa4861afb657609792b0777" title="Returns true if LIST is empty, false otherwise." alt="" coords="455,201,537,228"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a25d199933dd83abc9cecfe452bf39837" title="Removes the front element from LIST and returns it." alt="" coords="136,252,239,279"/>
<area shape="rect" href="thread_8c.html#a0cd30c260607aec4597c5b613c5e013f" title="Transitions a blocked thread T to the ready&#45;to&#45;run state." alt="" coords="131,75,244,101"/>
<area shape="rect" href="interrupt_8c.html#ac657e1386ac8c557ddafbcc732427fbf" title="Returns the current interrupt status." alt="" coords="589,12,691,39"/>
<area shape="rect" href="interrupt_8c.html#a5a896b58d69d8d5ffa7b738c31b924d1" title="Enables interrupts and returns the previous interrupt status." alt="" coords="452,75,540,101"/>
<area shape="rect" href="interrupt_8c.html#ab253c940fea3774ac64e8c53b05a57a2" title="Returns true during processing of an external interrupt and false at all other times." alt="" coords="595,75,685,101"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a08c9ed5b4d04c46b943f09f84c93064d" title="Returns the beginning of LIST." alt="" coords="601,201,679,228"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a4ed47fea6462c7db4fde2d0a30e9ce26" title="Returns LIST&#39;s tail." alt="" coords="606,151,674,177"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a3e89b017d033355801dafd955caa8ad0" title="Returns the front element in LIST." alt="" coords="311,252,383,279"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a20dc7b49b9631d32e71294ea9cf38e78" title="Removes ELEM from its list and returns the element that followed it." alt="" coords="451,303,541,329"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#ae2dec7db343c61370bd42b559ecf80bd" title="Returns true if ELEM is an interior element, false otherwise." alt="" coords="600,303,680,329"/>
<area shape="rect" href="thread_8c.html#a85274904406e17925db793a7603f9c49" title="Initializes the threading system by transforming the code that&#39;s currently running into a thread." alt="" coords="309,49,386,76"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a997639d9e16bed1f4a450c0bdf7959ba" title="Inserts ELEM at the end of LIST, so that it becomes the back in LIST." alt="" coords="292,151,403,177"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#a57866ab170795aa4191fa14fa1c39dd3" title="Inserts ELEM just before BEFORE, which may be either an interior element or a tail." alt="" coords="457,252,535,279"/>
<area shape="rect" href="lib_2kernel_2list_8c.html#afd128d25023ae454774ad1754af3ee74" title="Returns true if ELEM is a tail, false otherwise." alt="" coords="612,252,668,279"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="synch_8c_a6da4176e1c419bd4467b181c66b077da_icgraph.png" border="0" usemap="#asynch_8c_a6da4176e1c419bd4467b181c66b077da_icgraph" alt=""/></div>
<map name="asynch_8c_a6da4176e1c419bd4467b181c66b077da_icgraph" id="asynch_8c_a6da4176e1c419bd4467b181c66b077da_icgraph">
<area shape="rect" title="Up or &quot;V&quot; operation on a semaphore." alt="" coords="1073,183,1151,209"/>
<area shape="rect" href="alarm-priority_8c.html#a3a8636bb8f03b8450f18ef9dbd774a0c" title=" " alt="" coords="877,5,1025,32"/>
<area shape="rect" href="synch_8c.html#a4534660eba2b75a5e5e34590d743f685" title="If any threads are waiting on COND (protected by LOCK), then this function signals one of them to wak..." alt="" coords="905,56,998,83"/>
<area shape="rect" href="priority-donate-sema_8c.html#a85675782bf8084df44707dfcfd2d7ae8" title=" " alt="" coords="701,208,807,235"/>
<area shape="rect" href="thread_8c.html#a6fbc1c29ff118d92ee1449a1072a00ce" title="Idle thread." alt="" coords="930,791,973,817"/>
<area shape="rect" href="ide_8c.html#a968e89e258918c93a81618744b6c0e35" title="ATA interrupt handler." alt="" coords="890,1145,1013,1172"/>
<area shape="rect" href="synch_8c.html#a0616a97ad47869923552432c218f068a" title="Releases LOCK, which must be owned by the current thread." alt="" coords="903,740,1000,767"/>
<area shape="rect" href="synch_8c.html#ac007e29a5442996a099aa8172f5e046a" title="Self&#45;test for semaphores that makes control &quot;ping&#45;pong&quot; between a pair of threads." alt="" coords="294,157,406,184"/>
<area shape="rect" href="synch_8c.html#a57b7a9021b4a9c32f00065da020e96cd" title="Thread function used by sema_self_test()." alt="" coords="887,157,1015,184"/>
<area shape="rect" href="synch_8c.html#abd647748214f5f33ba24336941ffeb11" title="Wakes up all threads, if any, waiting on COND (protected by LOCK)." alt="" coords="695,56,813,83"/>
<area shape="rect" href="ide_8c.html#a5e8e1409e0675bdd93040403c52dd660" title="Initialize the disk subsystem and detect disks." alt="" coords="722,1429,786,1456"/>
<area shape="rect" href="init_8c.html#a597a4e36419870df906ed14699bf47c7" title="Pintos main entry point." alt="" coords="508,1441,591,1468"/>
<area shape="rect" href="priority-donate-multiple_8c.html#a56379b758fb21b5a67de1a87d2a74672" title=" " alt="" coords="701,765,807,792"/>
<area shape="rect" href="priority-donate-one_8c.html#adbcd765439b4d960f0db9ba4a47d421f" title=" " alt="" coords="679,816,829,843"/>
<area shape="rect" href="priority-donate-one_8c.html#aae18eed8351e7789ef848517a96284a5" title=" " alt="" coords="679,867,829,893"/>
<area shape="rect" href="priority-donate-lower_8c.html#ab955dabdbbfc7a7a188317e70b95ef04" title=" " alt="" coords="682,917,826,944"/>
<area shape="rect" href="thread_8c.html#a382e72d5d2fb4cfe2b5034eb62a887c8" title="Returns a tid to use for a new thread." alt="" coords="709,259,799,285"/>
<area shape="rect" href="priority-donate-multiple_8c.html#af257d61c4fea017f52981dbe2a40534b" title=" " alt="" coords="701,1019,807,1045"/>
<area shape="rect" href="synch_8c.html#a408896d5b2af213dc2a8da984c696419" title="Atomically releases LOCK and waits for COND to be signaled by some other piece of code." alt="" coords="713,1120,795,1147"/>
<area shape="rect" href="priority-condvar_8c.html#a0a388ce73d55720aac505642bc72ce37" title=" " alt="" coords="468,1081,631,1108"/>
<area shape="rect" href="priority-donate-chain_8c.html#af3ea65daade3a57b9afbfaf87d187dfd" title=" " alt="" coords="687,1171,821,1197"/>
<area shape="rect" href="malloc_8c.html#a9f850d0608418aea291e4c0fdab93826" title="Frees block P, which must have been previously allocated with malloc(), calloc(), or realloc()." alt="" coords="527,1391,572,1417"/>
<area shape="rect" href="priority-donate-nest_8c.html#acc1e53225c07946f00921d331e5736c5" title=" " alt="" coords="691,1373,817,1400"/>
<area shape="rect" href="ide_8c.html#afc9cbaf0892e023867624dca21f5bfa2" title="Reads sector SEC_NO from disk D into BUFFER, which must have room for BLOCK_SECTOR_SIZE bytes." alt="" coords="717,309,791,336"/>
<area shape="rect" href="ide_8c.html#a968318bffbdf3ecb701360fc0ed9cf49" title="Write sector SEC_NO to disk D from BUFFER, which must contain BLOCK_SECTOR_SIZE bytes." alt="" coords="716,360,792,387"/>
<area shape="rect" href="intq_8c.html#a45ba970f3357ff262d7fafecc50735c6" title="Removes a byte from Q and returns it." alt="" coords="716,411,792,437"/>
<area shape="rect" href="intq_8c.html#a6a440110d5417c12cedf1c2e86f445f8" title="Adds BYTE to the end of Q." alt="" coords="716,461,792,488"/>
<area shape="rect" href="priority-donate-sema_8c.html#aeb0f97fa3c6d25534de6a11bf3532aa3" title=" " alt="" coords="703,512,805,539"/>
<area shape="rect" href="malloc_8c.html#a9c36d0fe3ec4675cbffdc9b52f5fb399" title="Obtains and returns a new block of at least SIZE bytes." alt="" coords="519,1155,579,1181"/>
<area shape="rect" href="priority-donate-nest_8c.html#ada3ddea14ea0cb3220f0a00cfa7929dc" title=" " alt="" coords="681,563,827,589"/>
<area shape="rect" href="palloc_8c.html#a303ef0c7222e4b461dc79f8a90f31bea" title="Obtains and returns a group of PAGE_CNT contiguous free pages." alt="" coords="686,1272,822,1299"/>
<area shape="rect" href="kernel_2console_8c.html#ace2f2e53045fdaa51273a6e45cc63044" title="Releases the console lock." alt="" coords="695,613,813,640"/>
<area shape="rect" href="priority-fifo_8c.html#a09afbb5707a2af609420fccb0795b96c" title=" " alt="" coords="685,664,823,691"/>
<area shape="rect" href="alarm-wait_8c.html#a208a74d5680b1bc8dab4e3978fc23d98" title="Sleeper thread." alt="" coords="721,715,787,741"/>
<area shape="rect" href="alarm-wait_8c.html#a46bbfad063bc4c9983350bd522fe6fbb" title="Creates N threads, each of which sleeps a different, fixed duration, M times." alt="" coords="508,841,591,868"/>
<area shape="rect" href="thread_8c.html#a8f7759a71c1c49fc8761ef92aa90a36d" title="Creates a new kernel thread named NAME with the given initial PRIORITY, which executes FUNCTION passi..." alt="" coords="497,233,601,260"/>
<area shape="rect" href="bitmap_8c.html#af3d1070908c2f73d4b18741f7fb5695e" title="Creation and destruction." alt="" coords="297,1116,403,1143"/>
<area shape="rect" href="bitmap_8c.html#adacf8862f49d7e7ceb1ba2368dd76698" title="Destroys bitmap B, freeing its storage." alt="" coords="293,1495,407,1521"/>
<area shape="rect" href="directory_8c.html#a92d246b6a292843fdfd7e3e1d2b29701" title="Destroys DIR and frees associated resources." alt="" coords="155,1532,231,1559"/>
<area shape="rect" href="directory_8c.html#a12c77ad2315eb1079f7914b1b1b27ce2" title="Opens and returns the directory for the given INODE, of which it takes ownership." alt="" coords="157,1684,230,1711"/>
<area shape="rect" href="file_8c.html#a4d12e9de7ab756bef5396c7b37698c9a" title="Closes FILE." alt="" coords="155,1368,232,1395"/>
<area shape="rect" href="fsutil_8c.html#a5e71854d868a26c3f243d4d3e4b1ef82" title="Copies file FILE_NAME from the file system to the scratch device, in ustar format." alt="" coords="5,1368,107,1395"/>
<area shape="rect" href="fsutil_8c.html#a645c7bbd9ea64199eed695ec3b2bd26b" title="Extracts a ustar&#45;format tar archive from the scratch block device into the Pintos file system." alt="" coords="7,1267,105,1293"/>
<area shape="rect" href="file_8c.html#a57cca369d13720dba680d09f76f96c70" title="Opens a file for the given INODE, of which it takes ownership, and returns the new file." alt="" coords="155,1431,231,1457"/>
<area shape="rect" href="hash_8c.html#ac69fc1bec8463507c3967d0f77653125" title="Destroys hash table H." alt="" coords="299,1545,401,1572"/>
<area shape="rect" href="inode_8c.html#a74e1a19b5bcae248617541fe6f2f77c5" title="Closes INODE and writes it to disk." alt="" coords="303,1444,397,1471"/>
<area shape="rect" href="inode_8c.html#aa867b845d1fde30169c685397e05ac3f" title="Initializes an inode with LENGTH bytes of data and writes the new inode to sector SECTOR on the file ..." alt="" coords="301,1596,399,1623"/>
<area shape="rect" href="inode_8c.html#a31fcd756c686b818d56067b4460bfdb9" title="Reads SIZE bytes from INODE into BUFFER, starting at position OFFSET." alt="" coords="297,1065,403,1092"/>
<area shape="rect" href="inode_8c.html#a09402d2c8d33dc00b2557daa27d944ee" title="Writes SIZE bytes from BUFFER into INODE, starting at OFFSET." alt="" coords="295,1167,405,1193"/>
<area shape="rect" href="partition_8c.html#a5723d235ee99ff5ebd79a4db49236237" title="Reads the partition table in the given SECTOR of BLOCK and scans it for partitions of interest to Pin..." alt="" coords="280,1241,420,1268"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 4 2021 19:31:06 for PKUOS - Pintos by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
